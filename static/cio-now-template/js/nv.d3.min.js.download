(function(){var n={};if(n.dev=!1,n.tooltip=n.tooltip||{},n.utils=n.utils||{},n.models=n.models||{},n.charts={},n.logs={},n.dom={},n.dispatch=d3.dispatch("render_start","render_end"),Function.prototype.bind||(Function.prototype.bind=function(n){if(typeof this!="function")throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var r=Array.prototype.slice.call(arguments,1),u=this,t=function(){},i=function(){return u.apply(this instanceof t&&n?this:n,r.concat(Array.prototype.slice.call(arguments)))};return t.prototype=this.prototype,i.prototype=new t,i}),n.dev){n.dispatch.on("render_start",function(){n.logs.startTime=+new Date});n.dispatch.on("render_end",function(){n.logs.endTime=+new Date;n.logs.totalTime=n.logs.endTime-n.logs.startTime;n.log("total",n.logs.totalTime)})}n.log=function(){if(n.dev&&window.console&&console.log&&console.log.apply)console.log.apply(console,arguments);else if(n.dev&&window.console&&typeof console.log=="function"&&Function.prototype.bind){var t=Function.prototype.bind.call(console.log,console);t.apply(console,arguments)}return arguments[arguments.length-1]};n.deprecated=function(n,t){console&&console.warn&&console.warn("nvd3 warning: `"+n+"` has been deprecated. ",t||"")};n.render=function(t){t=t||1;n.render.active=!0;n.dispatch.render_start();var i=function(){for(var f,r,u=0;u<t&&(r=n.render.queue[u]);u++)f=r.generate(),typeof r.callback==typeof Function&&r.callback(f);n.render.queue.splice(0,u);n.render.queue.length?setTimeout(i):(n.dispatch.render_end(),n.render.active=!1)};setTimeout(i)};n.render.active=!1;n.render.queue=[];n.addGraph=function(t){typeof arguments[0]==typeof Function&&(t={generate:arguments[0],callback:arguments[1]});n.render.queue.push(t);n.render.active||n.render()};typeof module!="undefined"&&typeof exports!="undefined"&&(module.exports=n);typeof window!="undefined"&&(window.nv=n);n.dom.write=function(n){return window.fastdom!==undefined?fastdom.write(n):n()};n.dom.read=function(n){return window.fastdom!==undefined?fastdom.read(n):n()};n.interactiveGuideline=function(){"use strict";function t(l){l.each(function(l){function a(){var o=d3.mouse(this),n=o[0],f=o[1],h=!0,l=!1,e;if(c&&(n=d3.event.offsetX,f=d3.event.offsetY,d3.event.target.tagName!=="svg"&&(h=!1),d3.event.target.className.baseVal.match("nv-legend")&&(l=!0)),h&&(n-=i.left,f-=i.top),n<0||f<0||n>w||f>v||d3.event.relatedTarget&&d3.event.relatedTarget.ownerSVGElement===undefined||l){if(c&&d3.event.relatedTarget&&d3.event.relatedTarget.ownerSVGElement===undefined&&(d3.event.relatedTarget.className===undefined||d3.event.relatedTarget.className.match(u.nvPointerEventsClass)))return;r.elementMouseout({mouseX:n,mouseY:f});t.renderGuideLine(null);u.hidden(!0);return}u.hidden(!1);e=s.invert(n);r.elementMousemove({mouseX:n,mouseY:f,pointXValue:e});d3.event.type==="dblclick"&&r.elementDblclick({mouseX:n,mouseY:f,pointXValue:e});d3.event.type==="click"&&r.elementClick({mouseX:n,mouseY:f,pointXValue:e});d3.event.type==="mousedown"&&r.elementMouseDown({mouseX:n,mouseY:f,pointXValue:e});d3.event.type==="mouseup"&&r.elementMouseUp({mouseX:n,mouseY:f,pointXValue:e})}var p=d3.select(this),w=e||960,v=o||400,y=p.selectAll("g.nv-wrap.nv-interactiveLineLayer").data([l]),b=y.enter().append("g").attr("class"," nv-wrap nv-interactiveLineLayer");if(b.append("g").attr("class","nv-interactiveGuideLine"),f){f.on("touchmove",a).on("mousemove",a,!0).on("mouseout",a,!0).on("mousedown",a,!0).on("mouseup",a,!0).on("dblclick",a).on("click",a);t.guideLine=null;t.renderGuideLine=function(i){h&&(t.guideLine&&t.guideLine.attr("x1")===i||n.dom.write(function(){var t=y.select(".nv-interactiveGuideLine").selectAll("line").data(i!=null?[n.utils.NaNtoZero(i)]:[],String);t.enter().append("line").attr("class","nv-guideline").attr("x1",function(n){return n}).attr("x2",function(n){return n}).attr("y1",v).attr("y2",0);t.exit().remove()}))}}})}var i={left:0,top:0},e=null,o=null,s=d3.scale.linear(),r=d3.dispatch("elementMousemove","elementMouseout","elementClick","elementDblclick","elementMouseDown","elementMouseUp"),h=!0,f=null,u=n.models.tooltip(),c="ActiveXObject"in window;return u.duration(0).hideDelay(0).hidden(!1),t.dispatch=r,t.tooltip=u,t.margin=function(n){return arguments.length?(i.top=typeof n.top!="undefined"?n.top:i.top,i.left=typeof n.left!="undefined"?n.left:i.left,t):i},t.width=function(n){return arguments.length?(e=n,t):e},t.height=function(n){return arguments.length?(o=n,t):o},t.xScale=function(n){return arguments.length?(s=n,t):s},t.showGuideLine=function(n){return arguments.length?(h=n,t):h},t.svgContainer=function(n){return arguments.length?(f=n,t):f},t};n.interactiveBisect=function(n,t,i){"use strict";var u,e,o;if(!(n instanceof Array))return null;u=typeof i!="function"?function(n){return n.x}:i;var s=function(n,t){return u(n)-t},h=d3.bisector(s).left,r=d3.max([0,h(n,t)-1]),f=u(n[r]);return(typeof f=="undefined"&&(f=r),f===t)?r:(e=d3.min([r+1,n.length-1]),o=u(n[e]),typeof o=="undefined"&&(o=e),Math.abs(o-t)>=Math.abs(f-t)?r:e)};n.nearestValueIndex=function(n,t,i){"use strict";var r=Infinity,u=null;return n.forEach(function(n,f){var e=Math.abs(t-n);n!=null&&e<=r&&e<i&&(r=e,u=f)}),u};n.models.tooltip=function(){"use strict";function ut(){if(!t){var n=e?e:document.body;t=d3.select(n).append("div").attr("class","nvtooltip "+(f?f:"xy-tooltip")).attr("id",g);t.style("top",0).style("left",0);t.style("opacity",0);t.style("position","fixed");t.selectAll("div, table, td, tr").classed(y,!0);t.classed(y,!0)}}function r(){if(l)return tt(u)?(n.dom.write(function(){ut();var n=d(u);n&&(t.node().innerHTML=n);rt()}),r):void 0}var g="nvtooltip-"+Math.floor(Math.random()*1e5),u=null,h="w",i=25,nt=0,f=null,e=null,o=!0,c=200,t=null,s={left:null,top:null},l=!0,a=100,v=!0,y="nv-pointer-events-none",p=function(){return{left:d3.event.clientX,top:d3.event.clientY}},w=function(n){return n},b=function(n){return n},k=function(n){return n},d=function(n){var i,u,f,t,r;return n===null?"":(i=d3.select(document.createElement("table")),v&&(u=i.selectAll("thead").data([n]).enter().append("thead"),u.append("tr").append("td").attr("colspan",3).append("strong").classed("x-value",!0).html(b(n.value))),f=i.selectAll("tbody").data([n]).enter().append("tbody"),t=f.selectAll("tr").data(function(n){return n.series}).enter().append("tr").classed("highlight",function(n){return n.highlight}),t.append("td").classed("legend-color-guide",!0).append("div").style("background-color",function(n){return n.color}),t.append("td").classed("key",!0).classed("total",function(n){return!!n.total}).html(function(n,t){return k(n.key,t)}),t.append("td").classed("value",!0).html(function(n,t){return w(n.value,t)}),t.selectAll("td").each(function(n){if(n.highlight){var t=d3.scale.linear().domain([0,1]).range(["#fff",n.color]),i=.6;d3.select(this).style("border-bottom-color",t(i)).style("border-top-color",t(i))}}),r=i.node().outerHTML,n.footer!==undefined&&(r+="<div class='footer'>"+n.footer+"<\/div>"),r)},tt=function(n){if(n&&n.series){if(n.series instanceof Array)return!!n.series.length;if(n.series instanceof Object)return n.series=[n.series],!0}return!1},it=function(n){var e=t.node().offsetHeight,o=t.node().offsetWidth,s=document.documentElement.clientWidth,c=document.documentElement.clientHeight,r,u,f;switch(h){case"e":r=-o-i;u=-(e/2);n.left+r<0&&(r=i);(f=n.top+u)<0&&(u-=f);(f=n.top+u+e)>c&&(u-=f-c);break;case"w":r=i;u=-(e/2);n.left+r+o>s&&(r=-o-i);(f=n.top+u)<0&&(u-=f);(f=n.top+u+e)>c&&(u-=f-c);break;case"n":r=-(o/2)-5;u=i;n.top+u+e>c&&(u=-e-i);(f=n.left+r)<0&&(r-=f);(f=n.left+r+o)>s&&(r-=f-s);break;case"s":r=-(o/2);u=-e-i;n.top+u<0&&(u=i);(f=n.left+r)<0&&(r-=f);(f=n.left+r+o)>s&&(r-=f-s);break;case"center":r=-(o/2);u=-(e/2);break;default:r=0;u=0}return{left:r,top:u}},rt=function(){n.dom.read(function(){var n=p(),i=it(n),r=n.left+i.left,u=n.top+i.top;if(o)t.interrupt().transition().delay(c).duration(0).style("opacity",0);else{var h="translate("+s.left+"px, "+s.top+"px)",f="translate("+r+"px, "+u+"px)",e=d3.interpolateString(h,f),l=t.style("opacity")<.1;t.interrupt().transition().duration(l?0:a).styleTween("transform",function(){return e},"important").styleTween("-webkit-transform",function(){return e}).style("-ms-transform",f).style("opacity",1)}s.left=r;s.top=u})};return r.nvPointerEventsClass=y,r.options=n.utils.optionsFunc.bind(r),r._options=Object.create({},{duration:{get:function(){return a},set:function(n){a=n}},gravity:{get:function(){return h},set:function(n){h=n}},distance:{get:function(){return i},set:function(n){i=n}},snapDistance:{get:function(){return nt},set:function(n){nt=n}},classes:{get:function(){return f},set:function(n){f=n}},chartContainer:{get:function(){return e},set:function(n){e=n}},enabled:{get:function(){return l},set:function(n){l=n}},hideDelay:{get:function(){return c},set:function(n){c=n}},contentGenerator:{get:function(){return d},set:function(n){d=n}},valueFormatter:{get:function(){return w},set:function(n){w=n}},headerFormatter:{get:function(){return b},set:function(n){b=n}},keyFormatter:{get:function(){return k},set:function(n){k=n}},headerEnabled:{get:function(){return v},set:function(n){v=n}},position:{get:function(){return p},set:function(n){p=n}},hidden:{get:function(){return o},set:function(n){o!=n&&(o=!!n,r())}},data:{get:function(){return u},set:function(n){n.point&&(n.value=n.point.x,n.series=n.series||{},n.series.value=n.point.y,n.series.color=n.point.color||n.series.color);u=n}},node:{get:function(){return t.node()},set:function(){}},id:{get:function(){return g},set:function(){}}}),n.utils.initOptions(r),r};n.utils.windowSize=function(){var n={width:640,height:480};return window.innerWidth&&window.innerHeight?(n.width=window.innerWidth,n.height=window.innerHeight,n):document.compatMode=="CSS1Compat"&&document.documentElement&&document.documentElement.offsetWidth?(n.width=document.documentElement.offsetWidth,n.height=document.documentElement.offsetHeight,n):document.body&&document.body.offsetWidth?(n.width=document.body.offsetWidth,n.height=document.body.offsetHeight,n):n};n.utils.windowResize=function(t){return window.addEventListener?window.addEventListener("resize",t):n.log("ERROR: Failed to bind to window.resize with: ",t),{callback:t,clear:function(){window.removeEventListener("resize",t)}}};n.utils.getColor=function(t){if(t===undefined)return n.utils.defaultColor();if(Array.isArray(t)){var i=d3.scale.ordinal().range(t);return function(n,t){var r=t===undefined?n:t;return n.color||i(r)}}return t};n.utils.defaultColor=function(){return n.utils.getColor(d3.scale.category20().range())};n.utils.customTheme=function(n,t,i){t=t||function(n){return n.key};i=i||d3.scale.category20().range();var r=i.length;return function(u){var f=t(u);return typeof n[f]=="function"?n[f]():n[f]!==undefined?n[f]:(r||(r=i.length),r=r-1,i[r])}};n.utils.pjax=function(t,i){var r=function(r){d3.html(r,function(r){var u=d3.select(i).node();u.parentNode.replaceChild(d3.select(r).select(i).node(),u);n.utils.pjax(t,i)})};d3.selectAll(t).on("click",function(){history.pushState(this.href,this.textContent,this.href);r(this.href);d3.event.preventDefault()});d3.select(window).on("popstate",function(){d3.event.state&&r(d3.event.state)})};n.utils.calcApproxTextWidth=function(n){if(typeof n.style=="function"&&typeof n.text=="function"){var t=parseInt(n.style("font-size").replace("px",""),10),i=n.text().length;return i*t*.5}return 0};n.utils.NaNtoZero=function(n){return typeof n!="number"||isNaN(n)||n===null||n===Infinity||n===-Infinity?0:n};d3.selection.prototype.watchTransition=function(n){var t=[this].concat([].slice.call(arguments,1));return n.transition.apply(n,t)};n.utils.renderWatch=function(t,i){if(!(this instanceof n.utils.renderWatch))return new n.utils.renderWatch(t,i);var u=i!==undefined?i:250,r=[],f=this;this.models=function(n){return n=[].slice.call(arguments,0),n.forEach(function(n){n.__rendered=!1,function(n){n.dispatch.on("renderEnd",function(){n.__rendered=!0;f.renderEnd("model")})}(n);r.indexOf(n)<0&&r.push(n)}),this};this.reset=function(n){n!==undefined&&(u=n);r=[]};this.transition=function(n,t,i){if(t=arguments.length>1?[].slice.call(arguments,1):[],i=t.length>1?t.pop():u!==undefined?u:250,n.__rendered=!1,r.indexOf(n)<0&&r.push(n),i===0)return n.__rendered=!0,n.delay=function(){return this},n.duration=function(){return this},n;n.__rendered=n.length===0?!0:n.every(function(n){return!n.length})?!0:!1;var e=0;return n.transition().duration(i).each(function(){++e}).each("end",function(){--e==0&&(n.__rendered=!0,f.renderEnd.apply(this,t))})};this.renderEnd=function(){r.every(function(n){return n.__rendered})&&(r.forEach(function(n){n.__rendered=!1}),t.renderEnd.apply(this,arguments))}};n.utils.deepExtend=function(t){var i=arguments.length>1?[].slice.call(arguments,1):[];i.forEach(function(i){for(var r in i){var u=t[r]instanceof Array,f=typeof t[r]=="object",e=typeof i[r]=="object";f&&!u&&e?n.utils.deepExtend(t[r],i[r]):t[r]=i[r]}})};n.utils.state=function(){var f;if(!(this instanceof n.utils.state))return new n.utils.state;var i={},o=this,r=function(){},u=function(){return{}},t=null,e=null;this.dispatch=d3.dispatch("change","set");this.dispatch.on("set",function(n){r(n,!0)});this.getter=function(n){return u=n,this};this.setter=function(n,t){return t||(t=function(){}),r=function(i,r){n(i);r&&t()},this};this.init=function(i){t=t||{};n.utils.deepExtend(t,i)};f=function(){var t=u(),n;if(JSON.stringify(t)===JSON.stringify(i))return!1;for(n in t)i[n]===undefined&&(i[n]={}),i[n]=t[n],e=!0;return!0};this.update=function(){t&&(r(t,!1),t=null);f.call(this)&&this.dispatch.change(i)}};n.utils.optionsFunc=function(n){return n&&d3.map(n).forEach(function(n,t){typeof this[n]=="function"&&this[n](t)}.bind(this)),this};n.utils.calcTicksX=function(t,i){var r=1,u=0,f;for(u;u<i.length;u+=1)f=i[u]&&i[u].values?i[u].values.length:0,r=f>r?f:r;return n.log("Requested number of ticks: ",t),n.log("Calculated max values to be: ",r),t=t>r?t=r-1:t,t=t<1?1:t,t=Math.floor(t),n.log("Calculating tick count as: ",t),t};n.utils.calcTicksY=function(t,i){return n.utils.calcTicksX(t,i)};n.utils.initOption=function(n,t){n._calls&&n._calls[t]?n[t]=n._calls[t]:(n[t]=function(i){return arguments.length?(n._overrides[t]=!0,n._options[t]=i,n):n._options[t]},n["_"+t]=function(i){return arguments.length?(n._overrides[t]||(n._options[t]=i),n):n._options[t]})};n.utils.initOptions=function(t){var i,r,u;t._overrides=t._overrides||{};i=Object.getOwnPropertyNames(t._options||{});r=Object.getOwnPropertyNames(t._calls||{});i=i.concat(r);for(u in i)n.utils.initOption(t,i[u])};n.utils.inheritOptionsD3=function(n,t,i){n._d3options=i.concat(n._d3options||[]);i.unshift(t);i.unshift(n);d3.rebind.apply(this,i)};n.utils.arrayUnique=function(n){return n.sort().filter(function(t,i){return!i||t!=n[i-1]})};n.utils.symbolMap=d3.map();n.utils.symbol=function(){function t(t,u){var f=i.call(this,t,u),e=r.call(this,t,u);return d3.svg.symbolTypes.indexOf(f)!==-1?d3.svg.symbol().type(f).size(e)():n.utils.symbolMap.get(f)(e)}var i,r=64;return t.type=function(n){return arguments.length?(i=d3.functor(n),t):i},t.size=function(n){return arguments.length?(r=d3.functor(n),t):r},t};n.utils.inheritOptions=function(t,i){var r=Object.getOwnPropertyNames(i._options||{}),f=Object.getOwnPropertyNames(i._calls||{}),e=i._inherited||[],o=i._d3options||[],u=r.concat(f).concat(e).concat(o);u.unshift(i);u.unshift(t);d3.rebind.apply(this,u);t._inherited=n.utils.arrayUnique(r.concat(f).concat(e).concat(r).concat(t._inherited||[]));t._d3options=n.utils.arrayUnique(o.concat(t._d3options||[]))};n.utils.initSVG=function(n){n.classed({"nvd3-svg":!0})};n.utils.sanitizeHeight=function(n,t){return n||parseInt(t.style("height"),10)||400};n.utils.sanitizeWidth=function(n,t){return n||parseInt(t.style("width"),10)||960};n.utils.availableHeight=function(t,i,r){return n.utils.sanitizeHeight(t,i)-r.top-r.bottom};n.utils.availableWidth=function(t,i,r){return n.utils.sanitizeWidth(t,i)-r.left-r.right};n.utils.noData=function(t,i){var f=t.options(),r=f.margin(),e=f.noData(),o=e==null?["No Data Available."]:[e],s=n.utils.availableHeight(null,i,r),h=n.utils.availableWidth(null,i,r),c=r.left+h/2,l=r.top+s/2,u;i.selectAll("g").remove();u=i.selectAll(".nv-noData").data(o);u.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle");u.attr("x",c).attr("y",l).text(function(n){return n})};n.utils.wrapTicks=function(n,t){n.each(function(){for(var n=d3.select(this),o=n.text().split(/\s+/).reverse(),r,i=[],s=0,f=n.attr("y"),e=parseFloat(n.attr("dy")),u=n.text(null).append("tspan").attr("x",0).attr("y",f).attr("dy",e+"em");r=o.pop();)i.push(r),u.text(i.join(" ")),u.node().getComputedTextLength()>t&&(i.pop(),u.text(i.join(" ")),i=[r],u=n.append("tspan").attr("x",0).attr("y",f).attr("dy",++s*1.1+e+"em").text(r))})};n.models.axis=function(){"use strict";function u(y){return e.reset(),y.each(function(u){var ot=d3.select(this),g,b,rt,y,k,et,nt;n.utils.initSVG(ot);var d=ot.selectAll("g.nv-wrap.nv-axis").data([u]),ht=d.enter().append("g").attr("class","nvd3 nv-wrap nv-axis"),ct=ht.append("g"),tt=d.select("g");a!==null?i.ticks(a):(i.orient()=="top"||i.orient()=="bottom")&&i.ticks(Math.abs(t.range()[1]-t.range()[0])/100);tt.watchTransition(e,"axis").call(i);c=c||i.scale();g=i.tickFormat();g==null&&(g=c.tickFormat());b=tt.selectAll("text.nv-axislabel").data([p||null]);b.exit().remove();switch(i.orient()){case"top":b.enter().append("text").attr("class","nv-axislabel");k=0;t.range().length===1?k=h?t.range()[0]*2+t.rangeBand():0:t.range().length===2?k=h?t.range()[0]+t.range()[1]+t.rangeBand():t.range()[1]:t.range().length>2&&(k=t.range()[t.range().length-1]+(t.range()[1]-t.range()[0]));b.attr("text-anchor","middle").attr("y",0).attr("x",k/2);o&&(y=d.selectAll("g.nv-axisMaxMin").data(t.domain()),y.enter().append("g").attr("class",function(n,t){return["nv-axisMaxMin","nv-axisMaxMin-x",t==0?"nv-axisMin-x":"nv-axisMax-x"].join(" ")}).append("text"),y.exit().remove(),y.attr("transform",function(i){return"translate("+n.utils.NaNtoZero(t(i))+",0)"}).select("text").attr("dy","-0.5em").attr("y",-i.tickPadding()).attr("text-anchor","middle").text(function(n){var t=g(n);return(""+t).match("NaN")?"":t}),y.watchTransition(e,"min-max top").attr("transform",function(i,r){return"translate("+n.utils.NaNtoZero(t.range()[r])+",0)"}));break;case"bottom":rt=v+36;var it=30,st=0,ut=tt.selectAll("g").select("text"),ft="";s%360&&(ut.each(function(){var n=this.getBoundingClientRect(),t=n.width;st=n.height;t>it&&(it=t)}),ft="rotate("+s+" 0,"+(st/2+i.tickPadding())+")",et=Math.abs(Math.sin(s*Math.PI/180)),rt=(et?et*it:it)+30,ut.attr("transform",ft).style("text-anchor",s%360>0?"start":"end"));b.enter().append("text").attr("class","nv-axislabel");k=0;t.range().length===1?k=h?t.range()[0]*2+t.rangeBand():0:t.range().length===2?k=h?t.range()[0]+t.range()[1]+t.rangeBand():t.range()[1]:t.range().length>2&&(k=t.range()[t.range().length-1]+(t.range()[1]-t.range()[0]));b.attr("text-anchor","middle").attr("y",rt).attr("x",k/2);o&&(y=d.selectAll("g.nv-axisMaxMin").data([t.domain()[0],t.domain()[t.domain().length-1]]),y.enter().append("g").attr("class",function(n,t){return["nv-axisMaxMin","nv-axisMaxMin-x",t==0?"nv-axisMin-x":"nv-axisMax-x"].join(" ")}).append("text"),y.exit().remove(),y.attr("transform",function(i){return"translate("+n.utils.NaNtoZero(t(i)+(h?t.rangeBand()/2:0))+",0)"}).select("text").attr("dy",".71em").attr("y",i.tickPadding()).attr("transform",ft).style("text-anchor",s?s%360>0?"start":"end":"middle").text(function(n){var t=g(n);return(""+t).match("NaN")?"":t}),y.watchTransition(e,"min-max bottom").attr("transform",function(i){return"translate("+n.utils.NaNtoZero(t(i)+(h?t.rangeBand()/2:0))+",0)"}));w&&ut.attr("transform",function(n,t){return"translate(0,"+(t%2==0?"0":"12")+")"});break;case"right":b.enter().append("text").attr("class","nv-axislabel");b.style("text-anchor",f?"middle":"begin").attr("transform",f?"rotate(90)":"").attr("y",f?-Math.max(r.right,l)+12:-10).attr("x",f?d3.max(t.range())/2:i.tickPadding());o&&(y=d.selectAll("g.nv-axisMaxMin").data(t.domain()),y.enter().append("g").attr("class",function(n,t){return["nv-axisMaxMin","nv-axisMaxMin-y",t==0?"nv-axisMin-y":"nv-axisMax-y"].join(" ")}).append("text").style("opacity",0),y.exit().remove(),y.attr("transform",function(i){return"translate(0,"+n.utils.NaNtoZero(t(i))+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",i.tickPadding()).style("text-anchor","start").text(function(n){var t=g(n);return(""+t).match("NaN")?"":t}),y.watchTransition(e,"min-max right").attr("transform",function(i,r){return"translate(0,"+n.utils.NaNtoZero(t.range()[r])+")"}).select("text").style("opacity",1));break;case"left":b.enter().append("text").attr("class","nv-axislabel");b.style("text-anchor",f?"middle":"end").attr("transform",f?"rotate(-90)":"").attr("y",f?-Math.max(r.left,l)+25-(v||0):-10).attr("x",f?-d3.max(t.range())/2:-i.tickPadding());o&&(y=d.selectAll("g.nv-axisMaxMin").data(t.domain()),y.enter().append("g").attr("class",function(n,t){return["nv-axisMaxMin","nv-axisMaxMin-y",t==0?"nv-axisMin-y":"nv-axisMax-y"].join(" ")}).append("text").style("opacity",0),y.exit().remove(),y.attr("transform",function(t){return"translate(0,"+n.utils.NaNtoZero(c(t))+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",-i.tickPadding()).attr("text-anchor","end").text(function(n){var t=g(n);return(""+t).match("NaN")?"":t}),y.watchTransition(e,"min-max right").attr("transform",function(i,r){return"translate(0,"+n.utils.NaNtoZero(t.range()[r])+")"}).select("text").style("opacity",1))}b.text(function(n){return n});o&&(i.orient()==="left"||i.orient()==="right")&&(tt.selectAll("g").each(function(n){d3.select(this).select("text").attr("opacity",1);(t(n)<t.range()[1]+10||t(n)>t.range()[0]-10)&&((n>1e-10||n<-1e-10)&&d3.select(this).attr("opacity",0),d3.select(this).select("text").attr("opacity",0))}),t.domain()[0]==t.domain()[1]&&t.domain()[0]==0&&d.selectAll("g.nv-axisMaxMin").style("opacity",function(n,t){return t?0:1}));o&&(i.orient()==="top"||i.orient()==="bottom")&&(nt=[],d.selectAll("g.nv-axisMaxMin").each(function(n,i){try{i?nt.push(t(n)-this.getBoundingClientRect().width-4):nt.push(t(n)+this.getBoundingClientRect().width+4)}catch(r){i?nt.push(t(n)-4):nt.push(t(n)+4)}}),tt.selectAll("g").each(function(n){(t(n)<nt[0]||t(n)>nt[1])&&(n>1e-10||n<-1e-10?d3.select(this).remove():d3.select(this).select("text").remove())}));tt.selectAll(".tick").filter(function(n){return!parseFloat(Math.round(n*1e5)/1e6)&&n!==undefined}).classed("zero",!0);c=t.copy()}),e.renderEnd("axis immediate"),u}var i=d3.svg.axis(),t=d3.scale.linear(),r={top:0,right:0,bottom:0,left:0},l=75,b=60,p=null,o=!0,s=0,f=!0,w=!1,h=!1,a=null,v=0,y=250,k=d3.dispatch("renderEnd"),c,e;return i.scale(t).orient("bottom").tickFormat(function(n){return n}),e=n.utils.renderWatch(k,y),u.axis=i,u.dispatch=k,u.options=n.utils.optionsFunc.bind(u),u._options=Object.create({},{axisLabelDistance:{get:function(){return v},set:function(n){v=n}},staggerLabels:{get:function(){return w},set:function(n){w=n}},rotateLabels:{get:function(){return s},set:function(n){s=n}},rotateYLabel:{get:function(){return f},set:function(n){f=n}},showMaxMin:{get:function(){return o},set:function(n){o=n}},axisLabel:{get:function(){return p},set:function(n){p=n}},height:{get:function(){return b},set:function(n){b=n}},ticks:{get:function(){return a},set:function(n){a=n}},width:{get:function(){return l},set:function(n){l=n}},margin:{get:function(){return r},set:function(n){r.top=n.top!==undefined?n.top:r.top;r.right=n.right!==undefined?n.right:r.right;r.bottom=n.bottom!==undefined?n.bottom:r.bottom;r.left=n.left!==undefined?n.left:r.left}},duration:{get:function(){return y},set:function(n){y=n;e.reset(y)}},scale:{get:function(){return t},set:function(r){t=r;i.scale(t);h=typeof t.rangeBands=="function";n.utils.inheritOptionsD3(u,t,["domain","range","rangeBand","rangeBands"])}}}),n.utils.initOptions(u),n.utils.inheritOptionsD3(u,i,["orient","tickValues","tickSubdivide","tickSize","tickPadding","tickFormat"]),n.utils.inheritOptionsD3(u,t,["domain","range","rangeBand","rangeBands"]),u};n.models.boxPlot=function(){"use strict";function o(g){return e.reset(),g.each(function(o){var ht=l-u.left-u.right,ct=a-u.top-u.bottom,rt,et,ot,it,lt,g,nt,tt;v=d3.select(this);n.utils.initSVG(v);r.domain(y||o.map(function(n,t){return s(n,t)})).rangeBands(p||[0,ht],.1);rt=[];c||(et=d3.min(o.map(function(n){var t=[];return t.push(n.values.Q1),n.values.hasOwnProperty("whisker_low")&&n.values.whisker_low!==null&&t.push(n.values.whisker_low),n.values.hasOwnProperty("outliers")&&n.values.outliers!==null&&(t=t.concat(n.values.outliers)),d3.min(t)})),ot=d3.max(o.map(function(n){var t=[];return t.push(n.values.Q3),n.values.hasOwnProperty("whisker_high")&&n.values.whisker_high!==null&&t.push(n.values.whisker_high),n.values.hasOwnProperty("outliers")&&n.values.outliers!==null&&(t=t.concat(n.values.outliers)),d3.max(t)})),rt=[et,ot]);t.domain(c||rt);t.range(w||[ct,0]);k=k||r;d=d||t.copy().range([t(0),t(0)]);it=v.selectAll("g.nv-wrap").data([o]);lt=it.enter().append("g").attr("class","nvd3 nv-wrap");it.attr("transform","translate("+u.left+","+u.top+")");g=it.selectAll(".nv-boxplot").data(function(n){return n});nt=g.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6);g.attr("class","nv-boxplot").attr("transform",function(n,t){return"translate("+(r(s(n,t))+r.rangeBand()*.05)+", 0)"}).classed("hover",function(n){return n.hover});g.watchTransition(e,"nv-boxplot: boxplots").style("stroke-opacity",1).style("fill-opacity",.75).delay(function(n,t){return t*h/o.length}).attr("transform",function(n,t){return"translate("+(r(s(n,t))+r.rangeBand()*.05)+", 0)"});g.exit().remove();nt.each(function(n,t){var r=d3.select(this);["low","high"].forEach(function(u){n.values.hasOwnProperty("whisker_"+u)&&n.values["whisker_"+u]!==null&&(r.append("line").style("stroke",n.color?n.color:i(n,t)).attr("class","nv-boxplot-whisker nv-boxplot-"+u),r.append("line").style("stroke",n.color?n.color:i(n,t)).attr("class","nv-boxplot-tick nv-boxplot-"+u))})});tt=g.selectAll(".nv-boxplot-outlier").data(function(n){return n.values.hasOwnProperty("outliers")&&n.values.outliers!==null?n.values.outliers:[]});tt.enter().append("circle").style("fill",function(n,t,r){return i(n,r)}).style("stroke",function(n,t,r){return i(n,r)}).on("mouseover",function(n,t,r){d3.select(this).classed("hover",!0);f.elementMouseover({series:{key:n,color:i(n,r)},e:d3.event})}).on("mouseout",function(n,t,r){d3.select(this).classed("hover",!1);f.elementMouseout({series:{key:n,color:i(n,r)},e:d3.event})}).on("mousemove",function(){f.elementMousemove({e:d3.event})});tt.attr("class","nv-boxplot-outlier");tt.watchTransition(e,"nv-boxplot: nv-boxplot-outlier").attr("cx",r.rangeBand()*.45).attr("cy",function(n){return t(n)}).attr("r","3");tt.exit().remove();var ut=function(){return b===null?r.rangeBand()*.9:Math.min(75,r.rangeBand()*.9)},ft=function(){return r.rangeBand()*.45-ut()/2},st=function(){return r.rangeBand()*.45+ut()/2};["low","high"].forEach(function(n){var i=n==="low"?"Q1":"Q3";g.select("line.nv-boxplot-whisker.nv-boxplot-"+n).watchTransition(e,"nv-boxplot: boxplots").attr("x1",r.rangeBand()*.45).attr("y1",function(i){return t(i.values["whisker_"+n])}).attr("x2",r.rangeBand()*.45).attr("y2",function(n){return t(n.values[i])});g.select("line.nv-boxplot-tick.nv-boxplot-"+n).watchTransition(e,"nv-boxplot: boxplots").attr("x1",ft).attr("y1",function(i){return t(i.values["whisker_"+n])}).attr("x2",st).attr("y2",function(i){return t(i.values["whisker_"+n])})});["low","high"].forEach(function(n){nt.selectAll(".nv-boxplot-"+n).on("mouseover",function(t,r,u){d3.select(this).classed("hover",!0);f.elementMouseover({series:{key:t.values["whisker_"+n],color:i(t,u)},e:d3.event})}).on("mouseout",function(t,r,u){d3.select(this).classed("hover",!1);f.elementMouseout({series:{key:t.values["whisker_"+n],color:i(t,u)},e:d3.event})}).on("mousemove",function(){f.elementMousemove({e:d3.event})})});nt.append("rect").attr("class","nv-boxplot-box").on("mouseover",function(n,t){d3.select(this).classed("hover",!0);f.elementMouseover({key:n.label,value:n.label,series:[{key:"Q3",value:n.values.Q3,color:n.color||i(n,t)},{key:"Q2",value:n.values.Q2,color:n.color||i(n,t)},{key:"Q1",value:n.values.Q1,color:n.color||i(n,t)}],data:n,index:t,e:d3.event})}).on("mouseout",function(n,t){d3.select(this).classed("hover",!1);f.elementMouseout({key:n.label,value:n.label,series:[{key:"Q3",value:n.values.Q3,color:n.color||i(n,t)},{key:"Q2",value:n.values.Q2,color:n.color||i(n,t)},{key:"Q1",value:n.values.Q1,color:n.color||i(n,t)}],data:n,index:t,e:d3.event})}).on("mousemove",function(){f.elementMousemove({e:d3.event})});g.select("rect.nv-boxplot-box").watchTransition(e,"nv-boxplot: boxes").attr("y",function(n){return t(n.values.Q3)}).attr("width",ut).attr("x",ft).attr("height",function(n){return Math.abs(t(n.values.Q3)-t(n.values.Q1))||1}).style("fill",function(n,t){return n.color||i(n,t)}).style("stroke",function(n,t){return n.color||i(n,t)});nt.append("line").attr("class","nv-boxplot-median");g.select("line.nv-boxplot-median").watchTransition(e,"nv-boxplot: boxplots line").attr("x1",ft).attr("y1",function(n){return t(n.values.Q2)}).attr("x2",st).attr("y2",function(n){return t(n.values.Q2)});k=r.copy();d=t.copy()}),e.renderEnd("nv-boxplot immediate"),o}var u={top:0,right:0,bottom:0,left:0},l=960,a=500,g=Math.floor(Math.random()*1e4),r=d3.scale.ordinal(),t=d3.scale.linear(),s=function(n){return n.x},nt=function(n){return n.y},i=n.utils.defaultColor(),v=null,y,c,p,w,f=d3.dispatch("elementMouseover","elementMouseout","elementMousemove","renderEnd"),h=250,b=null,k,d,e=n.utils.renderWatch(f,h);return o.dispatch=f,o.options=n.utils.optionsFunc.bind(o),o._options=Object.create({},{width:{get:function(){return l},set:function(n){l=n}},height:{get:function(){return a},set:function(n){a=n}},maxBoxWidth:{get:function(){return b},set:function(n){b=n}},x:{get:function(){return s},set:function(n){s=n}},y:{get:function(){return nt},set:function(n){nt=n}},xScale:{get:function(){return r},set:function(n){r=n}},yScale:{get:function(){return t},set:function(n){t=n}},xDomain:{get:function(){return y},set:function(n){y=n}},yDomain:{get:function(){return c},set:function(n){c=n}},xRange:{get:function(){return p},set:function(n){p=n}},yRange:{get:function(){return w},set:function(n){w=n}},id:{get:function(){return g},set:function(n){g=n}},margin:{get:function(){return u},set:function(n){u.top=n.top!==undefined?n.top:u.top;u.right=n.right!==undefined?n.right:u.right;u.bottom=n.bottom!==undefined?n.bottom:u.bottom;u.left=n.left!==undefined?n.left:u.left}},color:{get:function(){return i},set:function(t){i=n.utils.getColor(t)}},duration:{get:function(){return h},set:function(n){h=n;e.reset(h)}}}),n.utils.initOptions(o),o};n.models.boxPlotChart=function(){"use strict";function i(e){return o.reset(),o.models(r),l&&o.models(s),a&&o.models(f),e.each(function(e){var b=d3.select(this),ot=this,g,nt,it,ut,ft;if(n.utils.initSVG(b),g=(p||parseInt(b.style("width"))||960)-t.left-t.right,nt=(w||parseInt(b.style("height"))||400)-t.top-t.bottom,i.update=function(){d.beforeUpdate();b.transition().duration(u).call(i)},i.container=this,e&&e.length&&e.filter(function(n){return n.values.hasOwnProperty("Q1")&&n.values.hasOwnProperty("Q2")&&n.values.hasOwnProperty("Q3")}).length)b.selectAll(".nv-noData").remove();else return it=b.selectAll(".nv-noData").data([k]),it.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),it.attr("x",t.left+g/2).attr("y",t.top+nt/2).text(function(n){return n}),i;y=r.xScale();c=r.yScale().clamp(!0);var rt=b.selectAll("g.nv-wrap.nv-boxPlotWithAxes").data([e]),tt=rt.enter().append("g").attr("class","nvd3 nv-wrap nv-boxPlotWithAxes").append("g"),et=tt.append("defs"),o=rt.select("g");tt.append("g").attr("class","nv-x nv-axis");tt.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line");tt.append("g").attr("class","nv-barsWrap");o.attr("transform","translate("+t.left+","+t.top+")");v&&o.select(".nv-y.nv-axis").attr("transform","translate("+g+",0)");r.width(g).height(nt);ut=o.select(".nv-barsWrap").datum(e.filter(function(n){return!n.disabled}));ut.transition().call(r);et.append("clipPath").attr("id","nv-x-label-clip-"+r.id()).append("rect");o.select("#nv-x-label-clip-"+r.id()+" rect").attr("width",y.rangeBand()*(h?2:1)).attr("height",16).attr("x",-y.rangeBand()/(h?1:2));l&&(s.scale(y).ticks(n.utils.calcTicksX(g/100,e)).tickSize(-nt,0),o.select(".nv-x.nv-axis").attr("transform","translate(0,"+c.range()[0]+")"),o.select(".nv-x.nv-axis").call(s),ft=o.select(".nv-x.nv-axis").selectAll("g"),h&&ft.selectAll("text").attr("transform",function(n,t,i){return"translate(0,"+(i%2==0?"5":"17")+")"}));a&&(f.scale(c).ticks(Math.floor(nt/36)).tickSize(-g,0),o.select(".nv-y.nv-axis").call(f));o.select(".nv-zeroLine line").attr("x1",0).attr("x2",g).attr("y1",c(0)).attr("y2",c(0))}),o.renderEnd("nv-boxplot chart immediate"),i}var r=n.models.boxPlot(),s=n.models.axis(),f=n.models.axis(),t={top:15,right:10,bottom:50,left:60},p=null,w=null,b=n.utils.getColor(),l=!0,a=!0,v=!1,h=!1,e=n.models.tooltip(),y,c,k="No Data Available.",d=d3.dispatch("beforeUpdate","renderEnd"),u=250,o;s.orient("bottom").showMaxMin(!1).tickFormat(function(n){return n});f.orient(v?"right":"left").tickFormat(d3.format(",.1f"));e.duration(0);o=n.utils.renderWatch(d,u);r.dispatch.on("elementMouseover.tooltip",function(n){e.data(n).hidden(!1)});r.dispatch.on("elementMouseout.tooltip",function(n){e.data(n).hidden(!0)});r.dispatch.on("elementMousemove.tooltip",function(){e()});return i.dispatch=d,i.boxplot=r,i.xAxis=s,i.yAxis=f,i.tooltip=e,i.options=n.utils.optionsFunc.bind(i),i._options=Object.create({},{width:{get:function(){return p},set:function(n){p=n}},height:{get:function(){return w},set:function(n){w=n}},staggerLabels:{get:function(){return h},set:function(n){h=n}},showXAxis:{get:function(){return l},set:function(n){l=n}},showYAxis:{get:function(){return a},set:function(n){a=n}},tooltipContent:{get:function(){return e},set:function(n){e=n}},noData:{get:function(){return k},set:function(n){k=n}},margin:{get:function(){return t},set:function(n){t.top=n.top!==undefined?n.top:t.top;t.right=n.right!==undefined?n.right:t.right;t.bottom=n.bottom!==undefined?n.bottom:t.bottom;t.left=n.left!==undefined?n.left:t.left}},duration:{get:function(){return u},set:function(n){u=n;o.reset(u);r.duration(u);s.duration(u);f.duration(u)}},color:{get:function(){return b},set:function(t){b=n.utils.getColor(t);r.color(b)}},rightAlignYAxis:{get:function(){return v},set:function(n){v=n;f.orient(n?"right":"left")}}}),n.utils.inheritOptions(i,r),n.utils.initOptions(i),i};n.models.bullet=function(){"use strict";function r(u){return u.each(function(r,u){var lt=h-t.left-t.right,d=c-t.top-t.bottom,tt,vt;l=d3.select(this);n.utils.initSVG(l);var ut=f.call(this,r,u).slice().sort(d3.descending),yt=e.call(this,r,u).slice().sort(d3.descending),g=o.call(this,r,u).slice().sort(d3.descending),at=p.call(this,r,u).slice(),pt=w.call(this,r,u).slice(),ft=b.call(this,r,u).slice(),k=d3.scale.linear().domain(d3.extent(d3.merge([s,ut]))).range(v?[lt,0]:[0,lt]),et=this.__chart__||d3.scale.linear().domain([0,Infinity]).range(k.range());this.__chart__=k;var nt=d3.min(ut),y=d3.max(ut),ct=ut[1],ot=l.selectAll("g.nv-wrap.nv-bullet").data([r]),wt=ot.enter().append("g").attr("class","nvd3 nv-wrap nv-bullet"),it=wt.append("g"),st=ot.select("g");it.append("rect").attr("class","nv-range nv-rangeMax");it.append("rect").attr("class","nv-range nv-rangeAvg");it.append("rect").attr("class","nv-range nv-rangeMin");it.append("rect").attr("class","nv-measure");ot.attr("transform","translate("+t.left+","+t.top+")");var bt=function(n){return Math.abs(et(n)-et(0))},ht=function(n){return Math.abs(k(n)-k(0))},kt=function(n){return n<0?et(n):et(0)},rt=function(n){return n<0?k(n):k(0)};st.select("rect.nv-rangeMax").attr("height",d).attr("width",ht(y>0?y:nt)).attr("x",rt(y>0?y:nt)).datum(y>0?y:nt);st.select("rect.nv-rangeAvg").attr("height",d).attr("width",ht(ct)).attr("x",rt(ct)).datum(ct);st.select("rect.nv-rangeMin").attr("height",d).attr("width",ht(y)).attr("x",rt(y)).attr("width",ht(y>0?nt:y)).attr("x",rt(y>0?nt:y)).datum(y>0?nt:y);st.select("rect.nv-measure").style("fill",a).attr("height",d/3).attr("y",d/3).attr("width",g<0?k(0)-k(g[0]):k(g[0])-k(0)).attr("x",rt(g)).on("mouseover",function(){i.elementMouseover({value:g[0],label:ft[0]||"Current",color:d3.select(this).style("fill")})}).on("mousemove",function(){i.elementMousemove({value:g[0],label:ft[0]||"Current",color:d3.select(this).style("fill")})}).on("mouseout",function(){i.elementMouseout({value:g[0],label:ft[0]||"Current",color:d3.select(this).style("fill")})});tt=d/6;vt=yt.map(function(n,t){return{value:n,label:pt[t]}});it.selectAll("path.nv-markerTriangle").data(vt).enter().append("path").attr("class","nv-markerTriangle").attr("transform",function(n){return"translate("+k(n.value)+","+d/2+")"}).attr("d","M0,"+tt+"L"+tt+","+-tt+" "+-tt+","+-tt+"Z").on("mouseover",function(n){i.elementMouseover({value:n.value,label:n.label||"Previous",color:d3.select(this).style("fill"),pos:[k(n.value),d/2]})}).on("mousemove",function(n){i.elementMousemove({value:n.value,label:n.label||"Previous",color:d3.select(this).style("fill")})}).on("mouseout",function(n){i.elementMouseout({value:n.value,label:n.label||"Previous",color:d3.select(this).style("fill")})});ot.selectAll(".nv-range").on("mouseover",function(n,t){var r=at[t]||(t?t==1?"Mean":"Minimum":"Maximum");i.elementMouseover({value:n,label:r,color:d3.select(this).style("fill")})}).on("mousemove",function(){i.elementMousemove({value:g[0],label:ft[0]||"Previous",color:d3.select(this).style("fill")})}).on("mouseout",function(n,t){var r=at[t]||(t?t==1?"Mean":"Minimum":"Maximum");i.elementMouseout({value:n,label:r,color:d3.select(this).style("fill")})})}),r}var t={top:0,right:0,bottom:0,left:0},u="left",v=!1,f=function(n){return n.ranges},e=function(n){return n.markers?n.markers:[0]},o=function(n){return n.measures},p=function(n){return n.rangeLabels?n.rangeLabels:[]},w=function(n){return n.markerLabels?n.markerLabels:[]},b=function(n){return n.measureLabels?n.measureLabels:[]},s=[0],h=380,c=30,l=null,y=null,a=n.utils.getColor(["#1f77b4"]),i=d3.dispatch("elementMouseover","elementMouseout","elementMousemove");return r.dispatch=i,r.options=n.utils.optionsFunc.bind(r),r._options=Object.create({},{ranges:{get:function(){return f},set:function(n){f=n}},markers:{get:function(){return e},set:function(n){e=n}},measures:{get:function(){return o},set:function(n){o=n}},forceX:{get:function(){return s},set:function(n){s=n}},width:{get:function(){return h},set:function(n){h=n}},height:{get:function(){return c},set:function(n){c=n}},tickFormat:{get:function(){return y},set:function(n){y=n}},margin:{get:function(){return t},set:function(n){t.top=n.top!==undefined?n.top:t.top;t.right=n.right!==undefined?n.right:t.right;t.bottom=n.bottom!==undefined?n.bottom:t.bottom;t.left=n.left!==undefined?n.left:t.left}},orient:{get:function(){return u},set:function(n){u=n;v=u=="right"||u=="bottom"}},color:{get:function(){return a},set:function(t){a=n.utils.getColor(t)}}}),n.utils.initOptions(r),r};n.models.bulletChart=function(){"use strict";function i(u){return u.each(function(f,y){var b=d3.select(this),p,d,ft,it;n.utils.initSVG(b);var k=n.utils.availableWidth(l,b,t),w=o-t.top-t.bottom,at=this;if(i.update=function(){i(u)},i.container=this,f&&e.call(this,f,y))b.selectAll(".nv-noData").remove();else return n.utils.noData(i,b),i;var st=e.call(this,f,y).slice().sort(d3.descending),ht=h.call(this,f,y).slice().sort(d3.descending),ct=c.call(this,f,y).slice().sort(d3.descending),g=b.selectAll("g.nv-wrap.nv-bulletChart").data([f]),lt=g.enter().append("g").attr("class","nvd3 nv-wrap nv-bulletChart"),nt=lt.append("g"),rt=g.select("g");nt.append("g").attr("class","nv-bulletWrap");nt.append("g").attr("class","nv-titles");g.attr("transform","translate("+t.left+","+t.top+")");p=d3.scale.linear().domain([0,Math.max(st[0],ht[0],ct[0])]).range(v?[k,0]:[0,k]);d=this.__chart__||d3.scale.linear().domain([0,Infinity]).range(p.range());this.__chart__=p;var vt=function(n){return Math.abs(d(n)-d(0))},yt=function(n){return Math.abs(p(n)-p(0))},ut=nt.select(".nv-titles").append("g").attr("text-anchor","end").attr("transform","translate(-6,"+(o-t.top-t.bottom)/2+")");ut.append("text").attr("class","nv-title").text(function(n){return n.title});ut.append("text").attr("class","nv-subtitle").attr("dy","1em").text(function(n){return n.subtitle});r.width(k).height(w);ft=rt.select(".nv-bulletWrap");d3.transition(ft).call(r);var et=a||p.tickFormat(k/100),tt=rt.selectAll("g.nv-tick").data(p.ticks(s?s:k/50),function(n){return this.textContent||et(n)}),ot=tt.enter().append("g").attr("class","nv-tick").attr("transform",function(n){return"translate("+d(n)+",0)"}).style("opacity",1e-6);ot.append("line").attr("y1",w).attr("y2",w*7/6);ot.append("text").attr("text-anchor","middle").attr("dy","1em").attr("y",w*7/6).text(et);it=d3.transition(tt).attr("transform",function(n){return"translate("+p(n)+",0)"}).style("opacity",1);it.select("line").attr("y1",w).attr("y2",w*7/6);it.select("text").attr("y",w*7/6);d3.transition(tt.exit()).attr("transform",function(n){return"translate("+p(n)+",0)"}).style("opacity",1e-6).remove()}),d3.timer.flush(),i}var r=n.models.bullet(),u=n.models.tooltip(),f="left",v=!1,t={top:5,right:40,bottom:20,left:120},e=function(n){return n.ranges},h=function(n){return n.markers?n.markers:[0]},c=function(n){return n.measures},l=null,o=55,a=null,s=null,y=null,p=d3.dispatch();u.duration(0).headerEnabled(!1);r.dispatch.on("elementMouseover.tooltip",function(n){n.series={key:n.label,value:n.value,color:n.color};u.data(n).hidden(!1)});r.dispatch.on("elementMouseout.tooltip",function(){u.hidden(!0)});r.dispatch.on("elementMousemove.tooltip",function(){u()});return i.bullet=r,i.dispatch=p,i.tooltip=u,i.options=n.utils.optionsFunc.bind(i),i._options=Object.create({},{ranges:{get:function(){return e},set:function(n){e=n}},markers:{get:function(){return h},set:function(n){h=n}},measures:{get:function(){return c},set:function(n){c=n}},width:{get:function(){return l},set:function(n){l=n}},height:{get:function(){return o},set:function(n){o=n}},tickFormat:{get:function(){return a},set:function(n){a=n}},ticks:{get:function(){return s},set:function(n){s=n}},noData:{get:function(){return y},set:function(n){y=n}},margin:{get:function(){return t},set:function(n){t.top=n.top!==undefined?n.top:t.top;t.right=n.right!==undefined?n.right:t.right;t.bottom=n.bottom!==undefined?n.bottom:t.bottom;t.left=n.left!==undefined?n.left:t.left}},orient:{get:function(){return f},set:function(n){f=n;v=f=="right"||f=="bottom"}}}),n.utils.inheritOptions(i,r),n.utils.initOptions(i),i};n.models.candlestickBar=function(){"use strict";function u(it){return it.each(function(u){var rt,ot,it,ft,st,vt,yt;o=d3.select(this);rt=n.utils.availableWidth(p,o,r);ot=n.utils.availableHeight(w,o,r);n.utils.initSVG(o);it=rt/u[0].values.length*.45;i.domain(g||d3.extent(u[0].values.map(s).concat(b)));k?i.range(y||[rt*.5/u[0].values.length,rt*(u[0].values.length-.5)/u[0].values.length]):i.range(y||[5+it/2,rt-it/2-5]);t.domain(nt||[d3.min(u[0].values.map(l).concat(v)),d3.max(u[0].values.map(c).concat(v))]).range(tt||[ot,0]);i.domain()[0]===i.domain()[1]&&(i.domain()[0]?i.domain([i.domain()[0]-i.domain()[0]*.01,i.domain()[1]+i.domain()[1]*.01]):i.domain([-1,1]));t.domain()[0]===t.domain()[1]&&(t.domain()[0]?t.domain([t.domain()[0]+t.domain()[0]*.01,t.domain()[1]-t.domain()[1]*.01]):t.domain([-1,1]));var et=d3.select(this).selectAll("g.nv-wrap.nv-candlestickBar").data([u[0].values]),ht=et.enter().append("g").attr("class","nvd3 nv-wrap nv-candlestickBar"),ct=ht.append("defs"),lt=ht.append("g"),at=et.select("g");lt.append("g").attr("class","nv-ticks");et.attr("transform","translate("+r.left+","+r.top+")");o.on("click",function(n,t){ut.chartClick({data:n,index:t,pos:d3.event,id:h})});ct.append("clipPath").attr("id","nv-chart-clip-path-"+h).append("rect");et.select("#nv-chart-clip-path-"+h+" rect").attr("width",rt).attr("height",ot);at.attr("clip-path",d?"url(#nv-chart-clip-path-"+h+")":"");ft=et.select(".nv-ticks").selectAll(".nv-tick").data(function(n){return n});ft.exit().remove();st=ft.enter().append("g");ft.attr("class",function(n,t,i){return(f(n,t)>e(n,t)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+i+"-"+t});vt=st.append("line").attr("class","nv-candlestick-lines").attr("transform",function(n,t){return"translate("+i(s(n,t))+",0)"}).attr("x1",0).attr("y1",function(n,i){return t(c(n,i))}).attr("x2",0).attr("y2",function(n,i){return t(l(n,i))});yt=st.append("rect").attr("class","nv-candlestick-rects nv-bars").attr("transform",function(n,r){return"translate("+(i(s(n,r))-it/2)+","+(t(a(n,r))-(f(n,r)>e(n,r)?t(e(n,r))-t(f(n,r)):0))+")"}).attr("x",0).attr("y",0).attr("width",it).attr("height",function(n,i){var r=f(n,i),u=e(n,i);return r>u?t(u)-t(r):t(r)-t(u)});ft.select(".nv-candlestick-lines").transition().attr("transform",function(n,t){return"translate("+i(s(n,t))+",0)"}).attr("x1",0).attr("y1",function(n,i){return t(c(n,i))}).attr("x2",0).attr("y2",function(n,i){return t(l(n,i))});ft.select(".nv-candlestick-rects").transition().attr("transform",function(n,r){return"translate("+(i(s(n,r))-it/2)+","+(t(a(n,r))-(f(n,r)>e(n,r)?t(e(n,r))-t(f(n,r)):0))+")"}).attr("x",0).attr("y",0).attr("width",it).attr("height",function(n,i){var r=f(n,i),u=e(n,i);return r>u?t(u)-t(r):t(r)-t(u)})}),u}var r={top:0,right:0,bottom:0,left:0},p=null,w=null,h=Math.floor(Math.random()*1e4),o,i=d3.scale.linear(),t=d3.scale.linear(),s=function(n){return n.x},a=function(n){return n.y},f=function(n){return n.open},e=function(n){return n.close},c=function(n){return n.high},l=function(n){return n.low},b=[],v=[],k=!1,d=!0,it=n.utils.defaultColor(),rt=!1,g,nt,y,tt,ut=d3.dispatch("stateChange","changeState","renderEnd","chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");return u.highlightPoint=function(n,t){u.clearHighlights();o.select(".nv-candlestickBar .nv-tick-0-"+n).classed("hover",t)},u.clearHighlights=function(){o.select(".nv-candlestickBar .nv-tick.hover").classed("hover",!1)},u.dispatch=ut,u.options=n.utils.optionsFunc.bind(u),u._options=Object.create({},{width:{get:function(){return p},set:function(n){p=n}},height:{get:function(){return w},set:function(n){w=n}},xScale:{get:function(){return i},set:function(n){i=n}},yScale:{get:function(){return t},set:function(n){t=n}},xDomain:{get:function(){return g},set:function(n){g=n}},yDomain:{get:function(){return nt},set:function(n){nt=n}},xRange:{get:function(){return y},set:function(n){y=n}},yRange:{get:function(){return tt},set:function(n){tt=n}},forceX:{get:function(){return b},set:function(n){b=n}},forceY:{get:function(){return v},set:function(n){v=n}},padData:{get:function(){return k},set:function(n){k=n}},clipEdge:{get:function(){return d},set:function(n){d=n}},id:{get:function(){return h},set:function(n){h=n}},interactive:{get:function(){return rt},set:function(n){rt=n}},x:{get:function(){return s},set:function(n){s=n}},y:{get:function(){return a},set:function(n){a=n}},open:{get:function(){return f()},set:function(n){f=n}},close:{get:function(){return e()},set:function(n){e=n}},high:{get:function(){return c},set:function(n){c=n}},low:{get:function(){return l},set:function(n){l=n}},margin:{get:function(){return r},set:function(n){r.top=n.top!=undefined?n.top:r.top;r.right=n.right!=undefined?n.right:r.right;r.bottom=n.bottom!=undefined?n.bottom:r.bottom;r.left=n.left!=undefined?n.left:r.left}},color:{get:function(){return it},set:function(t){it=n.utils.getColor(t)}}}),n.utils.initOptions(u),u};n.models.cumulativeLineChart=function(){"use strict";function t(g){return p.reset(),p.models(u),it&&p.models(h),rt&&p.models(o),g.each(function(p){function hi(){d3.select(t.container).style("cursor","ew-resize")}function ci(){r.x=d3.event.x;r.i=Math.round(y.invert(r.x));ui()}function li(){d3.select(t.container).style("cursor","auto");i.index=r.i;c.stateChange(i)}function ui(){dt.data([r]);var n=t.duration();t.duration(0);t.update();t.duration(n)}var g=d3.select(this),kt,fi,ni,ei,oi,ti,ii,dt;n.utils.initSVG(g);g.classed("nv-chart-"+at,!0);var si=this,nt=n.utils.availableWidth(et,g,f),lt=n.utils.availableHeight(tt,g,f);if(t.update=function(){s===0?g.call(t):g.transition().duration(s).call(t)},t.container=this,i.setter(yt(p),t.update).getter(vt(p)).update(),i.disabled=p.map(function(n){return!!n.disabled}),!v){v={};for(kt in i)v[kt]=i[kt]instanceof Array?i[kt].slice(0):i[kt]}if(fi=d3.behavior.drag().on("dragstart",hi).on("drag",ci).on("dragend",li),p&&p.length&&p.filter(function(n){return n.values.length}).length)g.selectAll(".nv-noData").remove();else return n.utils.noData(t,g),t;ht=u.xScale();k=u.yScale();e?u.yDomain(null):(ni=p.filter(function(n){return!n.disabled}).map(function(n){var t=d3.extent(n.values,u.y());return t[0]<-.95&&(t[0]=-.95),[(t[0]-t[1])/(1+t[1]),(t[1]-t[0])/(1+t[0])]}),ei=[d3.min(ni,function(n){return n[0]}),d3.max(ni,function(n){return n[1]})],u.yDomain(ei));y.domain([0,p[0].values.length-1]).range([0,nt]).clamp(!0);var p=pt(r.i,p),ai=ft?"none":"all",bt=g.selectAll("g.nv-wrap.nv-cumulativeLine").data([p]),wt=bt.enter().append("g").attr("class","nvd3 nv-wrap nv-cumulativeLine").append("g"),ct=bt.select("g");wt.append("g").attr("class","nv-interactive");wt.append("g").attr("class","nv-x nv-axis").style("pointer-events","none");wt.append("g").attr("class","nv-y nv-axis");wt.append("g").attr("class","nv-background");wt.append("g").attr("class","nv-linesWrap").style("pointer-events",ai);wt.append("g").attr("class","nv-avgLinesWrap").style("pointer-events","none");wt.append("g").attr("class","nv-legendWrap");wt.append("g").attr("class","nv-controlsWrap");ot&&(l.width(nt),ct.select(".nv-legendWrap").datum(p).call(l),f.top!=l.height()&&(f.top=l.height(),lt=n.utils.availableHeight(tt,g,f)),ct.select(".nv-legendWrap").attr("transform","translate(0,"+-f.top+")"));st&&(oi=[{key:"Re-scale y-axis",disabled:!e}],w.width(140).color(["#444","#444","#444"]).rightAlign(!1).margin({top:5,right:0,bottom:5,left:20}),ct.select(".nv-controlsWrap").datum(oi).attr("transform","translate(0,"+-f.top+")").call(w));bt.attr("transform","translate("+f.left+","+f.top+")");ut&&ct.select(".nv-y.nv-axis").attr("transform","translate("+nt+",0)");ti=p.filter(function(n){return n.tempDisabled});bt.select(".tempDisabled").remove();ti.length&&bt.append("text").attr("class","tempDisabled").attr("x",nt/2).attr("y","-.71em").style("text-anchor","end").text(ti.map(function(n){return n.key}).join(", ")+" values cannot be calculated for this time period.");ft&&(a.width(nt).height(lt).margin({left:f.left,top:f.top}).svgContainer(g).xScale(ht),bt.select(".nv-interactive").call(a));wt.select(".nv-background").append("rect");ct.select(".nv-background rect").attr("width",nt).attr("height",lt);u.y(function(n){return n.display.y}).width(nt).height(lt).color(p.map(function(n,t){return n.color||b(n,t)}).filter(function(n,t){return!p[t].disabled&&!p[t].tempDisabled}));ii=ct.select(".nv-linesWrap").datum(p.filter(function(n){return!n.disabled&&!n.tempDisabled}));ii.call(u);p.forEach(function(n,t){n.seriesIndex=t});var vi=p.filter(function(n){return!n.disabled&&!!d(n)}),ri=ct.select(".nv-avgLinesWrap").selectAll("line").data(vi,function(n){return n.key}),gt=function(n){var t=k(d(n));return t<0?0:t>lt?lt:t};ri.enter().append("line").style("stroke-width",2).style("stroke-dasharray","10,10").style("stroke",function(n){return u.color()(n,n.seriesIndex)}).attr("x1",0).attr("x2",nt).attr("y1",gt).attr("y2",gt);ri.style("stroke-opacity",function(n){var t=k(d(n));return t<0||t>lt?0:1}).attr("x1",0).attr("x2",nt).attr("y1",gt).attr("y2",gt);ri.exit().remove();dt=ii.selectAll(".nv-indexLine").data([r]);dt.enter().append("rect").attr("class","nv-indexLine").attr("width",3).attr("x",-2).attr("fill","red").attr("fill-opacity",.5).style("pointer-events","all").call(fi);dt.attr("transform",function(n){return"translate("+y(n.i)+",0)"}).attr("height",lt);it&&(h.scale(ht)._ticks(n.utils.calcTicksX(nt/70,p)).tickSize(-lt,0),ct.select(".nv-x.nv-axis").attr("transform","translate(0,"+k.range()[0]+")"),ct.select(".nv-x.nv-axis").call(h));rt&&(o.scale(k)._ticks(n.utils.calcTicksY(lt/36,p)).tickSize(-nt,0),ct.select(".nv-y.nv-axis").call(o));ct.select(".nv-background rect").on("click",function(){r.x=d3.mouse(this)[0];r.i=Math.round(y.invert(r.x));i.index=r.i;c.stateChange(i);ui()});u.dispatch.on("elementClick",function(n){r.i=n.pointIndex;r.x=y(r.i);i.index=r.i;c.stateChange(i);ui()});w.dispatch.on("legendClick",function(n){n.disabled=!n.disabled;e=!n.disabled;i.rescaleY=e;c.stateChange(i);t.update()});l.dispatch.on("stateChange",function(n){for(var r in n)i[r]=n[r];c.stateChange(i);t.update()});a.dispatch.on("elementMousemove",function(i){var e,r,s,f,l;if(u.clearHighlights(),f=[],p.filter(function(n,t){return n.seriesIndex=t,!n.disabled}).forEach(function(o,h){r=n.interactiveBisect(o.values,i.pointXValue,t.x());u.highlightPoint(h,r,!0);var c=o.values[r];typeof c!="undefined"&&(typeof e=="undefined"&&(e=c),typeof s=="undefined"&&(s=t.xScale()(t.x()(c,r))),f.push({key:o.key,value:t.y()(c,r),color:b(o,o.seriesIndex)}))}),f.length>2){var v=t.yScale().invert(i.mouseY),y=Math.abs(t.yScale().domain()[0]-t.yScale().domain()[1]),w=.03*y,c=n.nearestValueIndex(f.map(function(n){return n.value}),v,w);c!==null&&(f[c].highlight=!0)}l=h.tickFormat()(t.x()(e,r),r);a.tooltip.chartContainer(si.parentNode).valueFormatter(function(n){return o.tickFormat()(n)}).data({value:l,series:f})();a.renderGuideLine(s)});a.dispatch.on("elementMouseout",function(){u.clearHighlights()});c.on("changeState",function(n){typeof n.disabled!="undefined"&&(p.forEach(function(t,i){t.disabled=n.disabled[i]}),i.disabled=n.disabled);typeof n.index!="undefined"&&(r.i=n.index,r.x=y(r.i),i.index=n.index,dt.data([r]));typeof n.rescaleY!="undefined"&&(e=n.rescaleY);t.update()})}),p.renderEnd("cumulativeLineChart immediate"),t}function pt(n,t){return g||(g=u.y()),t.map(function(t){var r,i;return t.values?(r=t.values[n],r==null)?t:(i=g(r,n),i<-.95&&!ct)?(t.tempDisabled=!0,t):(t.tempDisabled=!1,t.values=t.values.map(function(n,t){return n.display={y:(g(n,t)-i)/(1+i)},n}),t):t})}var u=n.models.line(),h=n.models.axis(),o=n.models.axis(),l=n.models.legend(),w=n.models.legend(),a=n.interactiveGuideline(),nt=n.models.tooltip(),f={top:30,right:30,bottom:50,left:60},b=n.utils.defaultColor(),et=null,tt=null,ot=!0,it=!0,rt=!0,ut=!1,st=!0,ft=!1,e=!0,ht,k,at=u.id(),i=n.utils.state(),v=null,lt=null,d=function(n){return n.average},c=d3.dispatch("stateChange","changeState","renderEnd"),s=250,ct=!1,g;i.index=0;i.rescaleY=e;h.orient("bottom").tickPadding(7);o.orient(ut?"right":"left");nt.valueFormatter(function(n,t){return o.tickFormat()(n,t)}).headerFormatter(function(n,t){return h.tickFormat()(n,t)});w.updateState(!1);var y=d3.scale.linear(),r={i:0,x:0},p=n.utils.renderWatch(c,s),vt=function(n){return function(){return{active:n.map(function(n){return!n.disabled}),index:r.i,rescaleY:e}}},yt=function(n){return function(t){t.index!==undefined&&(r.i=t.index);t.rescaleY!==undefined&&(e=t.rescaleY);t.active!==undefined&&n.forEach(function(n,i){n.disabled=!t.active[i]})}};u.dispatch.on("elementMouseover.tooltip",function(n){var i={x:t.x()(n.point),y:t.y()(n.point),color:n.point.color};n.point=i;nt.data(n).hidden(!1)});u.dispatch.on("elementMouseout.tooltip",function(){nt.hidden(!0)});return g=null,t.dispatch=c,t.lines=u,t.legend=l,t.controls=w,t.xAxis=h,t.yAxis=o,t.interactiveLayer=a,t.state=i,t.tooltip=nt,t.options=n.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return et},set:function(n){et=n}},height:{get:function(){return tt},set:function(n){tt=n}},rescaleY:{get:function(){return e},set:function(n){e=n}},showControls:{get:function(){return st},set:function(n){st=n}},showLegend:{get:function(){return ot},set:function(n){ot=n}},average:{get:function(){return d},set:function(n){d=n}},defaultState:{get:function(){return v},set:function(n){v=n}},noData:{get:function(){return lt},set:function(n){lt=n}},showXAxis:{get:function(){return it},set:function(n){it=n}},showYAxis:{get:function(){return rt},set:function(n){rt=n}},noErrorCheck:{get:function(){return ct},set:function(n){ct=n}},margin:{get:function(){return f},set:function(n){f.top=n.top!==undefined?n.top:f.top;f.right=n.right!==undefined?n.right:f.right;f.bottom=n.bottom!==undefined?n.bottom:f.bottom;f.left=n.left!==undefined?n.left:f.left}},color:{get:function(){return b},set:function(t){b=n.utils.getColor(t);l.color(b)}},useInteractiveGuideline:{get:function(){return ft},set:function(n){ft=n;n===!0&&(t.interactive(!1),t.useVoronoi(!1))}},rightAlignYAxis:{get:function(){return ut},set:function(n){ut=n;o.orient(n?"right":"left")}},duration:{get:function(){return s},set:function(n){s=n;u.duration(s);h.duration(s);o.duration(s);p.reset(s)}}}),n.utils.inheritOptions(t,u),n.utils.initOptions(t),t};n.models.discreteBar=function(){"use strict";function o(y){return f.reset(),y.each(function(o){var st=p-i.left-i.right,ot=w-i.top-i.bottom,ft,rt,y,et;b=d3.select(this);n.utils.initSVG(b);o.forEach(function(n,t){n.values.forEach(function(n){n.series=t})});ft=a&&s?[]:o.map(function(n){return n.values.map(function(n,t){return{x:h(n,t),y:u(n,t),y0:n.y0}})});r.domain(a||d3.merge(ft).map(function(n){return n.x})).rangeBands(g||[0,st],.1);t.domain(s||d3.extent(d3.merge(ft).map(function(n){return n.y}).concat(k)));l?t.range(v||[ot-(t.domain()[0]<0?12:0),t.domain()[1]>0?12:0]):t.range(v||[ot,0]);tt=tt||r;it=it||t.copy().range([t(0),t(0)]);var ut=b.selectAll("g.nv-wrap.nv-discretebar").data([o]),ht=ut.enter().append("g").attr("class","nvd3 nv-wrap nv-discretebar"),ct=ht.append("g"),lt=ut.select("g");ct.append("g").attr("class","nv-groups");ut.attr("transform","translate("+i.left+","+i.top+")");rt=ut.select(".nv-groups").selectAll(".nv-group").data(function(n){return n},function(n){return n.key});rt.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6);rt.exit().watchTransition(f,"discreteBar: exit groups").style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove();rt.attr("class",function(n,t){return"nv-group nv-series-"+t}).classed("hover",function(n){return n.hover});rt.watchTransition(f,"discreteBar: groups").style("stroke-opacity",1).style("fill-opacity",.75);y=rt.selectAll("g.nv-bar").data(function(n){return n.values});y.exit().remove();et=y.enter().append("g").attr("transform",function(n,i){return"translate("+(r(h(n,i))+r.rangeBand()*.05)+", "+t(0)+")"}).on("mouseover",function(n,t){d3.select(this).classed("hover",!0);e.elementMouseover({data:n,index:t,color:d3.select(this).style("fill")})}).on("mouseout",function(n,t){d3.select(this).classed("hover",!1);e.elementMouseout({data:n,index:t,color:d3.select(this).style("fill")})}).on("mousemove",function(n,t){e.elementMousemove({data:n,index:t,color:d3.select(this).style("fill")})}).on("click",function(n,t){e.elementClick({data:n,index:t,color:d3.select(this).style("fill")});d3.event.stopPropagation()}).on("dblclick",function(n,t){e.elementDblClick({data:n,index:t,color:d3.select(this).style("fill")});d3.event.stopPropagation()});et.append("rect").attr("height",0).attr("width",r.rangeBand()*.9/o.length);l?(et.append("text").attr("text-anchor","middle"),y.select("text").text(function(n,t){return d(u(n,t))}).watchTransition(f,"discreteBar: bars text").attr("x",r.rangeBand()*.9/2).attr("y",function(n,i){return u(n,i)<0?t(u(n,i))-t(0)+12:-4})):y.selectAll("text").remove();y.attr("class",function(n,t){return u(n,t)<0?"nv-bar negative":"nv-bar positive"}).style("fill",function(n,t){return n.color||c(n,t)}).style("stroke",function(n,t){return n.color||c(n,t)}).select("rect").attr("class",nt).watchTransition(f,"discreteBar: bars rect").attr("width",r.rangeBand()*.9/o.length);y.watchTransition(f,"discreteBar: bars").attr("transform",function(n,i){var f=r(h(n,i))+r.rangeBand()*.05,e=u(n,i)<0?t(0):t(0)-t(u(n,i))<1?t(0)-1:t(u(n,i));return"translate("+f+", "+e+")"}).select("rect").attr("height",function(n,i){return Math.max(Math.abs(t(u(n,i))-t(s&&s[0]||0))||1)});tt=r.copy();it=t.copy()}),f.renderEnd("discreteBar immediate"),o}var i={top:0,right:0,bottom:0,left:0},p=960,w=500,rt=Math.floor(Math.random()*1e4),b,r=d3.scale.ordinal(),t=d3.scale.linear(),h=function(n){return n.x},u=function(n){return n.y},k=[0],c=n.utils.defaultColor(),l=!1,d=d3.format(",.2f"),a,s,g,v,e=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),nt="discreteBar",y=250,tt,it,f=n.utils.renderWatch(e,y);return o.dispatch=e,o.options=n.utils.optionsFunc.bind(o),o._options=Object.create({},{width:{get:function(){return p},set:function(n){p=n}},height:{get:function(){return w},set:function(n){w=n}},forceY:{get:function(){return k},set:function(n){k=n}},showValues:{get:function(){return l},set:function(n){l=n}},x:{get:function(){return h},set:function(n){h=n}},y:{get:function(){return u},set:function(n){u=n}},xScale:{get:function(){return r},set:function(n){r=n}},yScale:{get:function(){return t},set:function(n){t=n}},xDomain:{get:function(){return a},set:function(n){a=n}},yDomain:{get:function(){return s},set:function(n){s=n}},xRange:{get:function(){return g},set:function(n){g=n}},yRange:{get:function(){return v},set:function(n){v=n}},valueFormat:{get:function(){return d},set:function(n){d=n}},id:{get:function(){return rt},set:function(n){rt=n}},rectClass:{get:function(){return nt},set:function(n){nt=n}},margin:{get:function(){return i},set:function(n){i.top=n.top!==undefined?n.top:i.top;i.right=n.right!==undefined?n.right:i.right;i.bottom=n.bottom!==undefined?n.bottom:i.bottom;i.left=n.left!==undefined?n.left:i.left}},color:{get:function(){return c},set:function(t){c=n.utils.getColor(t)}},duration:{get:function(){return y},set:function(n){y=n;f.reset(y)}}}),n.utils.initOptions(o),o};n.models.discreteBarChart=function(){"use strict";function t(h){return o.reset(),o.models(i),a&&o.models(e),v&&o.models(u),h.each(function(o){var k=d3.select(this),ot=this,nt,tt,ft,rt;if(n.utils.initSVG(k),nt=n.utils.availableWidth(w,k,r),tt=n.utils.availableHeight(b,k,r),t.update=function(){g.beforeUpdate();k.transition().duration(f).call(t)},t.container=this,o&&o.length&&o.filter(function(n){return n.values.length}).length)k.selectAll(".nv-noData").remove();else return n.utils.noData(t,k),t;p=i.xScale();s=i.yScale().clamp(!0);var ut=k.selectAll("g.nv-wrap.nv-discreteBarWithAxes").data([o]),it=ut.enter().append("g").attr("class","nvd3 nv-wrap nv-discreteBarWithAxes").append("g"),et=it.append("defs"),h=ut.select("g");it.append("g").attr("class","nv-x nv-axis");it.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line");it.append("g").attr("class","nv-barsWrap");h.attr("transform","translate("+r.left+","+r.top+")");y&&h.select(".nv-y.nv-axis").attr("transform","translate("+nt+",0)");i.width(nt).height(tt);ft=h.select(".nv-barsWrap").datum(o.filter(function(n){return!n.disabled}));ft.transition().call(i);et.append("clipPath").attr("id","nv-x-label-clip-"+i.id()).append("rect");h.select("#nv-x-label-clip-"+i.id()+" rect").attr("width",p.rangeBand()*(c?2:1)).attr("height",16).attr("x",-p.rangeBand()/(c?1:2));a&&(e.scale(p)._ticks(n.utils.calcTicksX(nt/100,o)).tickSize(-tt,0),h.select(".nv-x.nv-axis").attr("transform","translate(0,"+(s.range()[0]+(i.showValues()&&s.domain()[0]<0?16:0))+")"),h.select(".nv-x.nv-axis").call(e),rt=h.select(".nv-x.nv-axis").selectAll("g"),c&&rt.selectAll("text").attr("transform",function(n,t,i){return"translate(0,"+(i%2==0?"5":"17")+")"}),l&&rt.selectAll(".tick text").attr("transform","rotate("+l+" 0,0)").style("text-anchor",l>0?"start":"end"),d&&h.selectAll(".tick text").call(n.utils.wrapTicks,t.xAxis.rangeBand()));v&&(u.scale(s)._ticks(n.utils.calcTicksY(tt/36,o)).tickSize(-nt,0),h.select(".nv-y.nv-axis").call(u));h.select(".nv-zeroLine line").attr("x1",0).attr("x2",nt).attr("y1",s(0)).attr("y2",s(0))}),o.renderEnd("discreteBar chart immediate"),t}var i=n.models.discreteBar(),e=n.models.axis(),u=n.models.axis(),h=n.models.tooltip(),r={top:15,right:10,bottom:50,left:60},w=null,b=null,k=n.utils.getColor(),a=!0,v=!0,y=!1,c=!1,d=!1,l=0,p,s,nt=null,g=d3.dispatch("beforeUpdate","renderEnd"),f=250,o;e.orient("bottom").showMaxMin(!1).tickFormat(function(n){return n});u.orient(y?"right":"left").tickFormat(d3.format(",.1f"));h.duration(0).headerEnabled(!1).valueFormatter(function(n,t){return u.tickFormat()(n,t)}).keyFormatter(function(n,t){return e.tickFormat()(n,t)});o=n.utils.renderWatch(g,f);i.dispatch.on("elementMouseover.tooltip",function(n){n.series={key:t.x()(n.data),value:t.y()(n.data),color:n.color};h.data(n).hidden(!1)});i.dispatch.on("elementMouseout.tooltip",function(){h.hidden(!0)});i.dispatch.on("elementMousemove.tooltip",function(){h()});return t.dispatch=g,t.discretebar=i,t.xAxis=e,t.yAxis=u,t.tooltip=h,t.options=n.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return w},set:function(n){w=n}},height:{get:function(){return b},set:function(n){b=n}},staggerLabels:{get:function(){return c},set:function(n){c=n}},rotateLabels:{get:function(){return l},set:function(n){l=n}},wrapLabels:{get:function(){return d},set:function(n){d=!!n}},showXAxis:{get:function(){return a},set:function(n){a=n}},showYAxis:{get:function(){return v},set:function(n){v=n}},noData:{get:function(){return nt},set:function(n){nt=n}},margin:{get:function(){return r},set:function(n){r.top=n.top!==undefined?n.top:r.top;r.right=n.right!==undefined?n.right:r.right;r.bottom=n.bottom!==undefined?n.bottom:r.bottom;r.left=n.left!==undefined?n.left:r.left}},duration:{get:function(){return f},set:function(n){f=n;o.reset(f);i.duration(f);e.duration(f);u.duration(f)}},color:{get:function(){return k},set:function(t){k=n.utils.getColor(t);i.color(k)}},rightAlignYAxis:{get:function(){return y},set:function(n){y=n;u.orient(n?"right":"left")}}}),n.utils.inheritOptions(t,i),n.utils.initOptions(t),t};n.models.distribution=function(){"use strict";function t(s){return o.reset(),s.each(function(t){var k=h-(r==="x"?i.left+i.right:i.top+i.bottom),y=r=="x"?"y":"x",p=d3.select(this),s,a;n.utils.initSVG(p);e=e||f;var v=p.selectAll("g.nv-distribution").data([t]),w=v.enter().append("g").attr("class","nvd3 nv-distribution"),d=w.append("g"),b=v.select("g");v.attr("transform","translate("+i.left+","+i.top+")");s=b.selectAll("g.nv-dist").data(function(n){return n},function(n){return n.key});s.enter().append("g");s.attr("class",function(n,t){return"nv-dist nv-series-"+t}).style("stroke",function(n,t){return l(n,t)});a=s.selectAll("line.nv-dist"+r).data(function(n){return n.values});a.enter().append("line").attr(r+"1",function(n,t){return e(u(n,t))}).attr(r+"2",function(n,t){return e(u(n,t))});o.transition(s.exit().selectAll("line.nv-dist"+r),"dist exit").attr(r+"1",function(n,t){return f(u(n,t))}).attr(r+"2",function(n,t){return f(u(n,t))}).style("stroke-opacity",0).remove();a.attr("class",function(n,t){return"nv-dist"+r+" nv-dist"+r+"-"+t}).attr(y+"1",0).attr(y+"2",c);o.transition(a,"dist").attr(r+"1",function(n,t){return f(u(n,t))}).attr(r+"2",function(n,t){return f(u(n,t))});e=f.copy()}),o.renderEnd("distribution immediate"),t}var i={top:0,right:0,bottom:0,left:0},h=400,c=8,r="x",u=function(n){return n[r]},l=n.utils.defaultColor(),f=d3.scale.linear(),s=250,a=d3.dispatch("renderEnd"),e,o=n.utils.renderWatch(a,s);return t.options=n.utils.optionsFunc.bind(t),t.dispatch=a,t.margin=function(n){return arguments.length?(i.top=typeof n.top!="undefined"?n.top:i.top,i.right=typeof n.right!="undefined"?n.right:i.right,i.bottom=typeof n.bottom!="undefined"?n.bottom:i.bottom,i.left=typeof n.left!="undefined"?n.left:i.left,t):i},t.width=function(n){return arguments.length?(h=n,t):h},t.axis=function(n){return arguments.length?(r=n,t):r},t.size=function(n){return arguments.length?(c=n,t):c},t.getData=function(n){return arguments.length?(u=d3.functor(n),t):u},t.scale=function(n){return arguments.length?(f=n,t):f},t.color=function(i){return arguments.length?(l=n.utils.getColor(i),t):l},t.duration=function(n){return arguments.length?(s=n,o.reset(s),t):s},t};n.models.furiousLegend=function(){"use strict";function e(w){function b(n,t){return i!="furious"?"#000":r?n.disengaged?u(n,t):"#fff":r?void 0:!n.disabled?"#fff":u(n,t)}function k(n,t){return r&&i=="furious"?n.disengaged?"#fff":u(n,t):!n.disabled?u(n,t):"#fff"}return w.each(function(e){var wt=o-t.left-t.right,bt=d3.select(this),w,it,st,kt,lt,rt,g,nt,at,ft,vt;n.utils.initSVG(bt);var ct=bt.selectAll("g.nv-legend").data([e]),dt=ct.enter().append("g").attr("class","nvd3 nv-legend").append("g"),ot=ct.select("g");ct.attr("transform","translate("+t.left+","+t.top+")");w=ot.selectAll(".nv-series").data(function(n){return i!="furious"?n:n.filter(function(n){return r?!0:!n.disengaged})});it=w.enter().append("g").attr("class","nv-series");i=="classic"?(it.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5),st=w.select("circle")):i=="furious"&&(it.append("rect").style("stroke-width",2).attr("class","nv-legend-symbol").attr("rx",3).attr("ry",3),st=w.select("rect"),it.append("g").attr("class","nv-check-box").property("innerHTML",'<path d="M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z" class="nv-box"><\/path><path d="M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511" class="nv-check"><\/path>').attr("transform","translate(-10,-8)scale(0.5)"),kt=w.select(".nv-check-box"),kt.each(function(n,t){d3.select(this).selectAll("path").attr("stroke",b(n,t))}));it.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8");lt=w.select("text.nv-legend-text");w.on("mouseover",function(n,t){f.legendMouseover(n,t)}).on("mouseout",function(n,t){f.legendMouseout(n,t)}).on("click",function(n,t){var u,e;f.legendClick(n,t);u=w.data();a&&(i=="classic"?p?(u.forEach(function(n){n.disabled=!0}),n.disabled=!1):(n.disabled=!n.disabled,u.every(function(n){return n.disabled})&&u.forEach(function(n){n.disabled=!1})):i=="furious"&&(r?(n.disengaged=!n.disengaged,n.userDisabled=n.userDisabled==undefined?!!n.disabled:n.userDisabled,n.disabled=n.disengaged||n.userDisabled):r||(n.disabled=!n.disabled,n.userDisabled=n.disabled,e=u.filter(function(n){return!n.disengaged}),e.every(function(n){return n.userDisabled})&&u.forEach(function(n){n.disabled=n.userDisabled=!1}))),f.stateChange({disabled:u.map(function(n){return!!n.disabled}),disengaged:u.map(function(n){return!!n.disengaged})}))}).on("dblclick",function(n,t){if((i!="furious"||!r)&&(f.legendDblclick(n,t),a)){var u=w.data();u.forEach(function(n){n.disabled=!0;i=="furious"&&(n.userDisabled=n.disabled)});n.disabled=!1;i=="furious"&&(n.userDisabled=n.disabled);f.stateChange({disabled:u.map(function(n){return!!n.disabled})})}});w.classed("nv-disabled",function(n){return n.userDisabled});w.exit().remove();lt.attr("fill",b).text(s);switch(i){case"furious":rt=23;break;case"classic":rt=20}if(v){g=[];w.each(function(t){var i,u,r;s(t).length>c?(u=s(t).substring(0,c),i=d3.select(this).select("text").text(u+"..."),d3.select(this).append("svg:title").text(s(t))):i=d3.select(this).select("text");try{if(r=i.node().getComputedTextLength(),r<=0)throw Error();}catch(f){r=n.utils.calcApproxTextWidth(i)}g.push(r+l)});for(var d=0,ut=0,tt=[];ut<wt&&d<g.length;)tt[d]=g[d],ut+=g[d++];for(d===0&&(d=1);ut>wt&&d>1;){for(tt=[],d--,nt=0;nt<g.length;nt++)g[nt]>(tt[nt%d]||0)&&(tt[nt%d]=g[nt]);ut=tt.reduce(function(n,t){return n+t})}for(at=[],ft=0,vt=0;ft<d;ft++)at[ft]=vt,vt+=tt[ft];w.attr("transform",function(n,t){return"translate("+at[t%d]+","+(5+Math.floor(t/d)*rt)+")"});y?ot.attr("transform","translate("+(o-t.right-ut)+","+t.top+")"):ot.attr("transform","translate(0,"+t.top+")");h=t.top+t.bottom+Math.ceil(g.length/d)*rt}else{var yt=5,et=5,pt=0,ht;w.attr("transform",function(){var n=d3.select(this).select("text").node().getComputedTextLength()+l;return ht=et,o<t.left+t.right+ht+n&&(et=ht=5,yt+=rt),et+=n,et>pt&&(pt=et),"translate("+ht+","+yt+")"});ot.attr("transform","translate("+(o-t.right-pt)+","+t.top+")");h=t.top+t.bottom+yt+15}i=="furious"&&st.attr("width",function(n,t){return lt[0][t].getComputedTextLength()+27}).attr("height",18).attr("y",-9).attr("x",-15);st.style("fill",k).style("stroke",function(n,t){return n.color||u(n,t)})}),e}var t={top:5,right:0,bottom:5,left:0},o=400,h=20,s=function(n){return n.key},u=n.utils.getColor(),c=20,v=!0,l=28,y=!0,a=!0,p=!1,r=!1,f=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange"),i="classic";return e.dispatch=f,e.options=n.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return o},set:function(n){o=n}},height:{get:function(){return h},set:function(n){h=n}},key:{get:function(){return s},set:function(n){s=n}},align:{get:function(){return v},set:function(n){v=n}},rightAlign:{get:function(){return y},set:function(n){y=n}},maxKeyLength:{get:function(){return c},set:function(n){c=n}},padding:{get:function(){return l},set:function(n){l=n}},updateState:{get:function(){return a},set:function(n){a=n}},radioButtonMode:{get:function(){return p},set:function(n){p=n}},expanded:{get:function(){return r},set:function(n){r=n}},vers:{get:function(){return i},set:function(n){i=n}},margin:{get:function(){return t},set:function(n){t.top=n.top!==undefined?n.top:t.top;t.right=n.right!==undefined?n.right:t.right;t.bottom=n.bottom!==undefined?n.bottom:t.bottom;t.left=n.left!==undefined?n.left:t.left}},color:{get:function(){return u},set:function(t){u=n.utils.getColor(t)}}}),n.utils.initOptions(e),e};n.models.historicalBar=function(){"use strict";function f(it){return it.each(function(f){var it,ft,ut;a.reset();o=d3.select(this);it=n.utils.availableWidth(v,o,r);ft=n.utils.availableHeight(y,o,r);n.utils.initSVG(o);i.domain(g||d3.extent(f[0].values.map(c).concat(p)));b?i.range(l||[it*.5/f[0].values.length,it*(f[0].values.length-.5)/f[0].values.length]):i.range(l||[0,it]);t.domain(nt||d3.extent(f[0].values.map(u).concat(w))).range(tt||[ft,0]);i.domain()[0]===i.domain()[1]&&(i.domain()[0]?i.domain([i.domain()[0]-i.domain()[0]*.01,i.domain()[1]+i.domain()[1]*.01]):i.domain([-1,1]));t.domain()[0]===t.domain()[1]&&(t.domain()[0]?t.domain([t.domain()[0]+t.domain()[0]*.01,t.domain()[1]-t.domain()[1]*.01]):t.domain([-1,1]));var rt=o.selectAll("g.nv-wrap.nv-historicalBar-"+e).data([f[0].values]),et=rt.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBar-"+e),ot=et.append("defs"),st=et.append("g"),ht=rt.select("g");st.append("g").attr("class","nv-bars");rt.attr("transform","translate("+r.left+","+r.top+")");o.on("click",function(n,t){s.chartClick({data:n,index:t,pos:d3.event,id:e})});ot.append("clipPath").attr("id","nv-chart-clip-path-"+e).append("rect");rt.select("#nv-chart-clip-path-"+e+" rect").attr("width",it).attr("height",ft);ht.attr("clip-path",k?"url(#nv-chart-clip-path-"+e+")":"");ut=rt.select(".nv-bars").selectAll(".nv-bar").data(function(n){return n},function(n,t){return c(n,t)});ut.exit().remove();ut.enter().append("rect").attr("x",0).attr("y",function(i,r){return n.utils.NaNtoZero(t(Math.max(0,u(i,r))))}).attr("height",function(i,r){return n.utils.NaNtoZero(Math.abs(t(u(i,r))-t(0)))}).attr("transform",function(n,t){return"translate("+(i(c(n,t))-it/f[0].values.length*.45)+",0)"}).on("mouseover",function(n,t){h&&(d3.select(this).classed("hover",!0),s.elementMouseover({data:n,index:t,color:d3.select(this).style("fill")}))}).on("mouseout",function(n,t){h&&(d3.select(this).classed("hover",!1),s.elementMouseout({data:n,index:t,color:d3.select(this).style("fill")}))}).on("mousemove",function(n,t){h&&s.elementMousemove({data:n,index:t,color:d3.select(this).style("fill")})}).on("click",function(n,t){h&&(s.elementClick({data:n,index:t,color:d3.select(this).style("fill")}),d3.event.stopPropagation())}).on("dblclick",function(n,t){h&&(s.elementDblClick({data:n,index:t,color:d3.select(this).style("fill")}),d3.event.stopPropagation())});ut.attr("fill",function(n,t){return d(n,t)}).attr("class",function(n,t,i){return(u(n,t)<0?"nv-bar negative":"nv-bar positive")+" nv-bar-"+i+"-"+t}).watchTransition(a,"bars").attr("transform",function(n,t){return"translate("+(i(c(n,t))-it/f[0].values.length*.45)+",0)"}).attr("width",it/f[0].values.length*.9);ut.watchTransition(a,"bars").attr("y",function(i,r){var f=u(i,r)<0?t(0):t(0)-t(u(i,r))<1?t(0)-1:t(u(i,r));return n.utils.NaNtoZero(f)}).attr("height",function(i,r){return n.utils.NaNtoZero(Math.max(Math.abs(t(u(i,r))-t(0)),1))})}),a.renderEnd("historicalBar immediate"),f}var r={top:0,right:0,bottom:0,left:0},v=null,y=null,e=Math.floor(Math.random()*1e4),o=null,i=d3.scale.linear(),t=d3.scale.linear(),c=function(n){return n.x},u=function(n){return n.y},p=[],w=[0],b=!1,k=!0,d=n.utils.defaultColor(),g,nt,l,tt,s=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),h=!0,a=n.utils.renderWatch(s,0);return f.highlightPoint=function(n,t){o.select(".nv-bars .nv-bar-0-"+n).classed("hover",t)},f.clearHighlights=function(){o.select(".nv-bars .nv-bar.hover").classed("hover",!1)},f.dispatch=s,f.options=n.utils.optionsFunc.bind(f),f._options=Object.create({},{width:{get:function(){return v},set:function(n){v=n}},height:{get:function(){return y},set:function(n){y=n}},forceX:{get:function(){return p},set:function(n){p=n}},forceY:{get:function(){return w},set:function(n){w=n}},padData:{get:function(){return b},set:function(n){b=n}},x:{get:function(){return c},set:function(n){c=n}},y:{get:function(){return u},set:function(n){u=n}},xScale:{get:function(){return i},set:function(n){i=n}},yScale:{get:function(){return t},set:function(n){t=n}},xDomain:{get:function(){return g},set:function(n){g=n}},yDomain:{get:function(){return nt},set:function(n){nt=n}},xRange:{get:function(){return l},set:function(n){l=n}},yRange:{get:function(){return tt},set:function(n){tt=n}},clipEdge:{get:function(){return k},set:function(n){k=n}},id:{get:function(){return e},set:function(n){e=n}},interactive:{get:function(){return h},set:function(n){h=n}},margin:{get:function(){return r},set:function(n){r.top=n.top!==undefined?n.top:r.top;r.right=n.right!==undefined?n.right:r.right;r.bottom=n.bottom!==undefined?n.bottom:r.bottom;r.left=n.left!==undefined?n.left:r.left}},color:{get:function(){return d},set:function(t){d=n.utils.getColor(t)}}}),n.utils.initOptions(f),f};n.models.historicalBarChart=function(t){"use strict";function i(t){return t.each(function(p){var ut,lt,ft,et,ht,at;if(c.reset(),c.models(u),b&&c.models(o),k&&c.models(e),ut=d3.select(this),lt=this,n.utils.initSVG(ut),ft=n.utils.availableWidth(g,ut,r),et=n.utils.availableHeight(w,ut,r),i.update=function(){ut.transition().duration(y).call(i)},i.container=this,f.disabled=p.map(function(n){return!!n.disabled}),!a){a={};for(ht in f)a[ht]=f[ht]instanceof Array?f[ht].slice(0):f[ht]}if(p&&p.length&&p.filter(function(n){return n.values.length}).length)ut.selectAll(".nv-noData").remove();else return n.utils.noData(i,ut),i;it=u.xScale();rt=u.yScale();var ot=ut.selectAll("g.nv-wrap.nv-historicalBarChart").data([p]),ct=ot.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBarChart").append("g"),st=ot.select("g");ct.append("g").attr("class","nv-x nv-axis");ct.append("g").attr("class","nv-y nv-axis");ct.append("g").attr("class","nv-barsWrap");ct.append("g").attr("class","nv-legendWrap");ct.append("g").attr("class","nv-interactive");nt&&(s.width(ft),st.select(".nv-legendWrap").datum(p).call(s),r.top!=s.height()&&(r.top=s.height(),et=n.utils.availableHeight(w,ut,r)),ot.select(".nv-legendWrap").attr("transform","translate(0,"+-r.top+")"));ot.attr("transform","translate("+r.left+","+r.top+")");d&&st.select(".nv-y.nv-axis").attr("transform","translate("+ft+",0)");tt&&(h.width(ft).height(et).margin({left:r.left,top:r.top}).svgContainer(ut).xScale(it),ot.select(".nv-interactive").call(h));u.width(ft).height(et).color(p.map(function(n,t){return n.color||l(n,t)}).filter(function(n,t){return!p[t].disabled}));at=st.select(".nv-barsWrap").datum(p.filter(function(n){return!n.disabled}));at.transition().call(u);b&&(o.scale(it)._ticks(n.utils.calcTicksX(ft/100,p)).tickSize(-et,0),st.select(".nv-x.nv-axis").attr("transform","translate(0,"+rt.range()[0]+")"),st.select(".nv-x.nv-axis").transition().call(o));k&&(e.scale(rt)._ticks(n.utils.calcTicksY(et/36,p)).tickSize(-ft,0),st.select(".nv-y.nv-axis").transition().call(e));h.dispatch.on("elementMousemove",function(t){var f,r,s,c,a;u.clearHighlights();c=[];p.filter(function(n,t){return n.seriesIndex=t,!n.disabled}).forEach(function(e){r=n.interactiveBisect(e.values,t.pointXValue,i.x());u.highlightPoint(r,!0);var o=e.values[r];o!==undefined&&(f===undefined&&(f=o),s===undefined&&(s=i.xScale()(i.x()(o,r))),c.push({key:e.key,value:i.y()(o,r),color:l(e,e.seriesIndex),data:e.values[r]}))});a=o.tickFormat()(i.x()(f,r));h.tooltip.chartContainer(lt.parentNode).valueFormatter(function(n){return e.tickFormat()(n)}).data({value:a,index:r,series:c})();h.renderGuideLine(s)});h.dispatch.on("elementMouseout",function(){v.tooltipHide();u.clearHighlights()});s.dispatch.on("legendClick",function(n){n.disabled=!n.disabled;p.filter(function(n){return!n.disabled}).length||p.map(function(n){return n.disabled=!1,ot.selectAll(".nv-series").classed("disabled",!1),n});f.disabled=p.map(function(n){return!!n.disabled});v.stateChange(f);t.transition().call(i)});s.dispatch.on("legendDblclick",function(n){p.forEach(function(n){n.disabled=!0});n.disabled=!1;f.disabled=p.map(function(n){return!!n.disabled});v.stateChange(f);i.update()});v.on("changeState",function(n){typeof n.disabled!="undefined"&&(p.forEach(function(t,i){t.disabled=n.disabled[i]}),f.disabled=n.disabled);i.update()})}),c.renderEnd("historicalBarChart immediate"),i}var u=t||n.models.historicalBar(),o=n.models.axis(),e=n.models.axis(),s=n.models.legend(),h=n.interactiveGuideline(),p=n.models.tooltip(),r={top:30,right:90,bottom:50,left:90},l=n.utils.defaultColor(),g=null,w=null,nt=!1,b=!0,k=!0,d=!1,tt=!1,it,rt,f={},a=null,ut=null,v=d3.dispatch("tooltipHide","stateChange","changeState","renderEnd"),y=250,c;o.orient("bottom").tickPadding(7);e.orient(d?"right":"left");p.duration(0).headerEnabled(!1).valueFormatter(function(n,t){return e.tickFormat()(n,t)}).headerFormatter(function(n,t){return o.tickFormat()(n,t)});c=n.utils.renderWatch(v,0);u.dispatch.on("elementMouseover.tooltip",function(n){n.series={key:i.x()(n.data),value:i.y()(n.data),color:n.color};p.data(n).hidden(!1)});u.dispatch.on("elementMouseout.tooltip",function(){p.hidden(!0)});u.dispatch.on("elementMousemove.tooltip",function(){p()});return i.dispatch=v,i.bars=u,i.legend=s,i.xAxis=o,i.yAxis=e,i.interactiveLayer=h,i.tooltip=p,i.options=n.utils.optionsFunc.bind(i),i._options=Object.create({},{width:{get:function(){return g},set:function(n){g=n}},height:{get:function(){return w},set:function(n){w=n}},showLegend:{get:function(){return nt},set:function(n){nt=n}},showXAxis:{get:function(){return b},set:function(n){b=n}},showYAxis:{get:function(){return k},set:function(n){k=n}},defaultState:{get:function(){return a},set:function(n){a=n}},noData:{get:function(){return ut},set:function(n){ut=n}},margin:{get:function(){return r},set:function(n){r.top=n.top!==undefined?n.top:r.top;r.right=n.right!==undefined?n.right:r.right;r.bottom=n.bottom!==undefined?n.bottom:r.bottom;r.left=n.left!==undefined?n.left:r.left}},color:{get:function(){return l},set:function(t){l=n.utils.getColor(t);s.color(l);u.color(l)}},duration:{get:function(){return y},set:function(n){y=n;c.reset(y);e.duration(y);o.duration(y)}},rightAlignYAxis:{get:function(){return d},set:function(n){d=n;e.orient(n?"right":"left")}},useInteractiveGuideline:{get:function(){return tt},set:function(n){tt=n;n===!0&&i.interactive(!1)}}}),n.utils.inheritOptions(i,u),n.utils.initOptions(i),i};n.models.ohlcBarChart=function(){var t=n.models.historicalBarChart(n.models.ohlcBar());return t.useInteractiveGuideline(!0),t.interactiveLayer.tooltip.contentGenerator(function(n){var i=n.series[0].data,r=i.open<i.close?"2ca02c":"d62728";return'<h3 style="color: #'+r+'">'+n.value+"<\/h3><table><tr><td>open:<\/td><td>"+t.yAxis.tickFormat()(i.open)+"<\/td><\/tr><tr><td>close:<\/td><td>"+t.yAxis.tickFormat()(i.close)+"<\/td><\/tr><tr><td>high<\/td><td>"+t.yAxis.tickFormat()(i.high)+"<\/td><\/tr><tr><td>low:<\/td><td>"+t.yAxis.tickFormat()(i.low)+"<\/td><\/tr><\/table>"}),t};n.models.candlestickBarChart=function(){var t=n.models.historicalBarChart(n.models.candlestickBar());return t.useInteractiveGuideline(!0),t.interactiveLayer.tooltip.contentGenerator(function(n){var i=n.series[0].data,r=i.open<i.close?"2ca02c":"d62728";return'<h3 style="color: #'+r+'">'+n.value+"<\/h3><table><tr><td>open:<\/td><td>"+t.yAxis.tickFormat()(i.open)+"<\/td><\/tr><tr><td>close:<\/td><td>"+t.yAxis.tickFormat()(i.close)+"<\/td><\/tr><tr><td>high<\/td><td>"+t.yAxis.tickFormat()(i.high)+"<\/td><\/tr><tr><td>low:<\/td><td>"+t.yAxis.tickFormat()(i.low)+"<\/td><\/tr><\/table>"}),t};n.models.legend=function(){"use strict";function f(w){function b(n,t){return i!="furious"?"#000":r?n.disengaged?"#000":"#fff":r?void 0:(n.color||(n.color=h(n,t)),!n.disabled?"#fff":n.color)}function k(n,t){return r&&i=="furious"?n.disengaged?"#eee":n.color||h(n,t):n.color||h(n,t)}function d(n){return r&&i=="furious"?1:!n.disabled?1:0}return w.each(function(f){var wt=e-t.left-t.right,bt=d3.select(this),w,et,ct,tt,kt,at,g,nt,h,it,rt,vt,ot,yt,dt;n.utils.initSVG(bt);var lt=bt.selectAll("g.nv-legend").data([f]),gt=lt.enter().append("g").attr("class","nvd3 nv-legend").append("g"),ft=lt.select("g");lt.attr("transform","translate("+t.left+","+t.top+")");w=ft.selectAll(".nv-series").data(function(n){return i!="furious"?n:n.filter(function(n){return r?!0:!n.disengaged})});et=w.enter().append("g").attr("class","nv-series");switch(i){case"furious":tt=23;break;case"classic":tt=20}i=="classic"?(et.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5),ct=w.select("circle")):i=="furious"&&(et.append("rect").style("stroke-width",2).attr("class","nv-legend-symbol").attr("rx",3).attr("ry",3),ct=w.select(".nv-legend-symbol"),et.append("g").attr("class","nv-check-box").property("innerHTML",'<path d="M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z" class="nv-box"><\/path><path d="M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511" class="nv-check"><\/path>').attr("transform","translate(-10,-8)scale(0.5)"),kt=w.select(".nv-check-box"),kt.each(function(n,t){d3.select(this).selectAll("path").attr("stroke",b(n,t))}));et.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8");at=w.select("text.nv-legend-text");w.on("mouseover",function(n,t){u.legendMouseover(n,t)}).on("mouseout",function(n,t){u.legendMouseout(n,t)}).on("click",function(n,t){var f,e;u.legendClick(n,t);f=w.data();a&&(i=="classic"?p?(f.forEach(function(n){n.disabled=!0}),n.disabled=!1):(n.disabled=!n.disabled,f.every(function(n){return n.disabled})&&f.forEach(function(n){n.disabled=!1})):i=="furious"&&(r?(n.disengaged=!n.disengaged,n.userDisabled=n.userDisabled==undefined?!!n.disabled:n.userDisabled,n.disabled=n.disengaged||n.userDisabled):r||(n.disabled=!n.disabled,n.userDisabled=n.disabled,e=f.filter(function(n){return!n.disengaged}),e.every(function(n){return n.userDisabled})&&f.forEach(function(n){n.disabled=n.userDisabled=!1}))),u.stateChange({disabled:f.map(function(n){return!!n.disabled}),disengaged:f.map(function(n){return!!n.disengaged})}))}).on("dblclick",function(n,t){if((i!="furious"||!r)&&(u.legendDblclick(n,t),a)){var f=w.data();f.forEach(function(n){n.disabled=!0;i=="furious"&&(n.userDisabled=n.disabled)});n.disabled=!1;i=="furious"&&(n.userDisabled=n.disabled);u.stateChange({disabled:f.map(function(n){return!!n.disabled})})}});if(w.classed("nv-disabled",function(n){return n.userDisabled}),w.exit().remove(),at.attr("fill",b).text(o),g=0,v){for(nt=[],w.each(function(t){var i,u,r;o(t).length>c?(u=o(t).substring(0,c),i=d3.select(this).select("text").text(u+"..."),d3.select(this).append("svg:title").text(o(t))):i=d3.select(this).select("text");try{if(r=i.node().getComputedTextLength(),r<=0)throw Error();}catch(f){r=n.utils.calcApproxTextWidth(i)}nt.push(r+l)}),h=0,it=[],g=0;g<wt&&h<nt.length;)it[h]=nt[h],g+=nt[h++];for(h===0&&(h=1);g>wt&&h>1;){for(it=[],h--,rt=0;rt<nt.length;rt++)nt[rt]>(it[rt%h]||0)&&(it[rt%h]=nt[rt]);g=it.reduce(function(n,t){return n+t})}for(vt=[],ot=0,yt=0;ot<h;ot++)vt[ot]=yt,yt+=it[ot];w.attr("transform",function(n,t){return"translate("+vt[t%h]+","+(5+Math.floor(t/h)*tt)+")"});y?ft.attr("transform","translate("+(e-t.right-g)+","+t.top+")"):ft.attr("transform","translate(0,"+t.top+")");s=t.top+t.bottom+Math.ceil(nt.length/h)*tt}else{var pt=5,st=5,ht=0,ut;w.attr("transform",function(){var n=d3.select(this).select("text").node().getComputedTextLength()+l;return ut=st,e<t.left+t.right+ut+n&&(st=ut=5,pt+=tt),st+=n,st>ht&&(ht=st),g<ut+ht&&(g=ut+ht),"translate("+ut+","+pt+")"});ft.attr("transform","translate("+(e-t.right-ht)+","+t.top+")");s=t.top+t.bottom+pt+15}i=="furious"&&(ct.attr("width",function(n,t){return at[0][t].getComputedTextLength()+27}).attr("height",18).attr("y",-9).attr("x",-15),gt.insert("rect",":first-child").attr("class","nv-legend-bg").attr("fill","#eee").attr("opacity",0),dt=ft.select(".nv-legend-bg"),dt.transition().duration(300).attr("x",-tt).attr("width",g+tt-12).attr("height",s+10).attr("y",-t.top-10).attr("opacity",r?1:0));ct.style("fill",k).style("fill-opacity",d).style("stroke",k)}),f}var t={top:5,right:0,bottom:5,left:0},e=400,s=20,o=function(n){return n.key},h=n.utils.getColor(),c=20,v=!0,l=32,y=!0,a=!0,p=!1,r=!1,u=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange"),i="classic";return f.dispatch=u,f.options=n.utils.optionsFunc.bind(f),f._options=Object.create({},{width:{get:function(){return e},set:function(n){e=n}},height:{get:function(){return s},set:function(n){s=n}},key:{get:function(){return o},set:function(n){o=n}},align:{get:function(){return v},set:function(n){v=n}},maxKeyLength:{get:function(){return c},set:function(n){c=n}},rightAlign:{get:function(){return y},set:function(n){y=n}},padding:{get:function(){return l},set:function(n){l=n}},updateState:{get:function(){return a},set:function(n){a=n}},radioButtonMode:{get:function(){return p},set:function(n){p=n}},expanded:{get:function(){return r},set:function(n){r=n}},vers:{get:function(){return i},set:function(n){i=n}},margin:{get:function(){return t},set:function(n){t.top=n.top!==undefined?n.top:t.top;t.right=n.right!==undefined?n.right:t.right;t.bottom=n.bottom!==undefined?n.bottom:t.bottom;t.left=n.left!==undefined?n.left:t.left}},color:{get:function(){return h},set:function(t){h=n.utils.getColor(t)}}}),n.utils.initOptions(f),f};n.models.line=function(){"use strict";function u(y){return e.reset(),e.models(t),y.each(function(u){var it,tt,rt,y,ut,ft;l=d3.select(this);it=n.utils.availableWidth(k,l,r);tt=n.utils.availableHeight(d,l,r);n.utils.initSVG(l);v=t.xScale();i=t.yScale();w=w||v;c=c||i;var p=l.selectAll("g.nv-wrap.nv-line").data([u]),et=p.enter().append("g").attr("class","nvd3 nv-wrap nv-line"),st=et.append("defs"),ot=et.append("g"),ht=p.select("g");ot.append("g").attr("class","nv-groups");ot.append("g").attr("class","nv-scatterWrap");p.attr("transform","translate("+r.left+","+r.top+")");t.width(it).height(tt);rt=p.select(".nv-scatterWrap");rt.call(t);st.append("clipPath").attr("id","nv-edge-clip-"+t.id()).append("rect");p.select("#nv-edge-clip-"+t.id()+" rect").attr("width",it).attr("height",tt>0?tt:0);ht.attr("clip-path",b?"url(#nv-edge-clip-"+t.id()+")":"");rt.attr("clip-path",b?"url(#nv-edge-clip-"+t.id()+")":"");y=p.select(".nv-groups").selectAll(".nv-group").data(function(n){return n},function(n){return n.key});y.enter().append("g").style("stroke-opacity",1e-6).style("stroke-width",function(n){return n.strokeWidth||nt}).style("fill-opacity",1e-6);y.exit().remove();y.attr("class",function(n,t){return(n.classed||"")+" nv-group nv-series-"+t}).classed("hover",function(n){return n.hover}).style("fill",function(n,t){return a(n,t)}).style("stroke",function(n,t){return a(n,t)});y.watchTransition(e,"line: groups").style("stroke-opacity",1).style("fill-opacity",function(n){return n.fillOpacity||.5});ut=y.selectAll("path.nv-area").data(function(n){return g(n)?[n]:[]});ut.enter().append("path").attr("class","nv-area").attr("d",function(t){return d3.svg.area().interpolate(h).defined(s).x(function(t,i){return n.utils.NaNtoZero(w(o(t,i)))}).y0(function(t,i){return n.utils.NaNtoZero(c(f(t,i)))}).y1(function(){return c(i.domain()[0]<=0?i.domain()[1]>=0?0:i.domain()[1]:i.domain()[0])}).apply(this,[t.values])});y.exit().selectAll("path.nv-area").remove();ut.watchTransition(e,"line: areaPaths").attr("d",function(t){return d3.svg.area().interpolate(h).defined(s).x(function(t,i){return n.utils.NaNtoZero(v(o(t,i)))}).y0(function(t,r){return n.utils.NaNtoZero(i(f(t,r)))}).y1(function(){return i(i.domain()[0]<=0?i.domain()[1]>=0?0:i.domain()[1]:i.domain()[0])}).apply(this,[t.values])});ft=y.selectAll("path.nv-line").data(function(n){return[n.values]});ft.enter().append("path").attr("class","nv-line").attr("d",d3.svg.line().interpolate(h).defined(s).x(function(t,i){return n.utils.NaNtoZero(w(o(t,i)))}).y(function(t,i){return n.utils.NaNtoZero(c(f(t,i)))}));ft.watchTransition(e,"line: linePaths").attr("d",d3.svg.line().interpolate(h).defined(s).x(function(t,i){return n.utils.NaNtoZero(v(o(t,i)))}).y(function(t,r){return n.utils.NaNtoZero(i(f(t,r)))}));w=v.copy();c=i.copy()}),e.renderEnd("line immediate"),u}var t=n.models.scatter(),r={top:0,right:0,bottom:0,left:0},k=960,d=500,l=null,nt=1.5,a=n.utils.defaultColor(),o=function(n){return n.x},f=function(n){return n.y},s=function(n,t){return!isNaN(f(n,t))&&f(n,t)!==null},g=function(n){return n.area},b=!1,v,i,h="linear",y=250,p=d3.dispatch("elementClick","elementMouseover","elementMouseout","renderEnd"),w,c,e;t.pointSize(16).pointDomain([16,256]);e=n.utils.renderWatch(p,y);u.dispatch=p;u.scatter=t;t.dispatch.on("elementClick",function(){p.elementClick.apply(this,arguments)});t.dispatch.on("elementMouseover",function(){p.elementMouseover.apply(this,arguments)});t.dispatch.on("elementMouseout",function(){p.elementMouseout.apply(this,arguments)});return u.options=n.utils.optionsFunc.bind(u),u._options=Object.create({},{width:{get:function(){return k},set:function(n){k=n}},height:{get:function(){return d},set:function(n){d=n}},defined:{get:function(){return s},set:function(n){s=n}},interpolate:{get:function(){return h},set:function(n){h=n}},clipEdge:{get:function(){return b},set:function(n){b=n}},margin:{get:function(){return r},set:function(n){r.top=n.top!==undefined?n.top:r.top;r.right=n.right!==undefined?n.right:r.right;r.bottom=n.bottom!==undefined?n.bottom:r.bottom;r.left=n.left!==undefined?n.left:r.left}},duration:{get:function(){return y},set:function(n){y=n;e.reset(y);t.duration(y)}},isArea:{get:function(){return g},set:function(n){g=d3.functor(n)}},x:{get:function(){return o},set:function(n){o=n;t.x(n)}},y:{get:function(){return f},set:function(n){f=n;t.y(n)}},color:{get:function(){return a},set:function(i){a=n.utils.getColor(i);t.color(a)}}}),n.utils.inheritOptions(u,t),n.utils.initOptions(u),u};n.models.lineChart=function(){"use strict";function t(p){return a.reset(),a.models(r),b&&a.models(o),k&&a.models(u),p.each(function(a){var p=d3.select(this),at=this,rt,et,ht,lt;if(n.utils.initSVG(p),rt=n.utils.availableWidth(g,p,i),et=n.utils.availableHeight(w,p,i),t.update=function(){e===0?p.call(t):p.transition().duration(e).call(t)},t.container=this,f.setter(ft(a),t.update).getter(ut(a)).update(),f.disabled=a.map(function(n){return!!n.disabled}),!l){l={};for(ht in f)l[ht]=f[ht]instanceof Array?f[ht].slice(0):f[ht]}if(a&&a.length&&a.filter(function(n){return n.values.length}).length)p.selectAll(".nv-noData").remove();else return n.utils.noData(t,p),t;tt=r.xScale();it=r.yScale();var ct=p.selectAll("g.nv-wrap.nv-lineChart").data([a]),st=ct.enter().append("g").attr("class","nvd3 nv-wrap nv-lineChart").append("g"),ot=ct.select("g");st.append("rect").style("opacity",0);st.append("g").attr("class","nv-x nv-axis");st.append("g").attr("class","nv-y nv-axis");st.append("g").attr("class","nv-linesWrap");st.append("g").attr("class","nv-legendWrap");st.append("g").attr("class","nv-interactive");ot.select("rect").attr("width",rt).attr("height",et>0?et:0);nt&&(h.width(rt),ot.select(".nv-legendWrap").datum(a).call(h),i.top!=h.height()&&(i.top=h.height(),et=n.utils.availableHeight(w,p,i)),ct.select(".nv-legendWrap").attr("transform","translate(0,"+-i.top+")"));ct.attr("transform","translate("+i.left+","+i.top+")");v&&ot.select(".nv-y.nv-axis").attr("transform","translate("+rt+",0)");d&&(s.width(rt).height(et).margin({left:i.left,top:i.top}).svgContainer(p).xScale(tt),ct.select(".nv-interactive").call(s));r.width(rt).height(et).color(a.map(function(n,t){return n.color||c(n,t)}).filter(function(n,t){return!a[t].disabled}));lt=ot.select(".nv-linesWrap").datum(a.filter(function(n){return!n.disabled}));lt.call(r);b&&(o.scale(tt)._ticks(n.utils.calcTicksX(rt/100,a)).tickSize(-et,0),ot.select(".nv-x.nv-axis").attr("transform","translate(0,"+it.range()[0]+")"),ot.select(".nv-x.nv-axis").call(o));k&&(u.scale(it)._ticks(n.utils.calcTicksY(et/36,a)).tickSize(-rt,0),ot.select(".nv-y.nv-axis").call(u));h.dispatch.on("stateChange",function(n){for(var i in n)f[i]=n[i];y.stateChange(f);t.update()});s.dispatch.on("elementMousemove",function(i){var h,f,l,e,y;if(r.clearHighlights(),e=[],a.filter(function(n,t){return n.seriesIndex=t,!n.disabled}).forEach(function(u,o){f=n.interactiveBisect(u.values,i.pointXValue,t.x());var s=u.values[f],a=t.y()(s,f);(a!=null&&r.highlightPoint(o,f,!0),s!==undefined)&&(h===undefined&&(h=s),l===undefined&&(l=t.xScale()(t.x()(s,f))),e.push({key:u.key,value:a,color:c(u,u.seriesIndex)}))}),e.length>2){var p=t.yScale().invert(i.mouseY),w=Math.abs(t.yScale().domain()[0]-t.yScale().domain()[1]),b=.03*w,v=n.nearestValueIndex(e.map(function(n){return n.value}),p,b);v!==null&&(e[v].highlight=!0)}y=o.tickFormat()(t.x()(h,f));s.tooltip.chartContainer(at.parentNode).valueFormatter(function(n){return n==null?"N/A":u.tickFormat()(n)}).data({value:y,index:f,series:e})();s.renderGuideLine(l)});s.dispatch.on("elementClick",function(i){var u,f=[];a.filter(function(n,t){return n.seriesIndex=t,!n.disabled}).forEach(function(r){var e=n.interactiveBisect(r.values,i.pointXValue,t.x()),o=r.values[e],s;typeof o!="undefined"&&(typeof u=="undefined"&&(u=t.xScale()(t.x()(o,e))),s=t.yScale()(t.y()(o,e)),f.push({point:o,pointIndex:e,pos:[u,s],seriesIndex:r.seriesIndex,series:r}))});r.dispatch.elementClick(f)});s.dispatch.on("elementMouseout",function(){r.clearHighlights()});y.on("changeState",function(n){typeof n.disabled!="undefined"&&a.length===n.disabled.length&&(a.forEach(function(t,i){t.disabled=n.disabled[i]}),f.disabled=n.disabled);t.update()})}),a.renderEnd("lineChart immediate"),t}var r=n.models.line(),o=n.models.axis(),u=n.models.axis(),h=n.models.legend(),s=n.interactiveGuideline(),p=n.models.tooltip(),i={top:30,right:20,bottom:50,left:60},c=n.utils.defaultColor(),g=null,w=null,nt=!0,b=!0,k=!0,v=!1,d=!1,tt,it,f=n.utils.state(),l=null,rt=null,y=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd"),e=250;o.orient("bottom").tickPadding(7);u.orient(v?"right":"left");p.valueFormatter(function(n,t){return u.tickFormat()(n,t)}).headerFormatter(function(n,t){return o.tickFormat()(n,t)});var a=n.utils.renderWatch(y,e),ut=function(n){return function(){return{active:n.map(function(n){return!n.disabled})}}},ft=function(n){return function(t){t.active!==undefined&&n.forEach(function(n,i){n.disabled=!t.active[i]})}};r.dispatch.on("elementMouseover.tooltip",function(n){p.data(n).hidden(!1)});r.dispatch.on("elementMouseout.tooltip",function(){p.hidden(!0)});return t.dispatch=y,t.lines=r,t.legend=h,t.xAxis=o,t.yAxis=u,t.interactiveLayer=s,t.tooltip=p,t.dispatch=y,t.options=n.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return g},set:function(n){g=n}},height:{get:function(){return w},set:function(n){w=n}},showLegend:{get:function(){return nt},set:function(n){nt=n}},showXAxis:{get:function(){return b},set:function(n){b=n}},showYAxis:{get:function(){return k},set:function(n){k=n}},defaultState:{get:function(){return l},set:function(n){l=n}},noData:{get:function(){return rt},set:function(n){rt=n}},margin:{get:function(){return i},set:function(n){i.top=n.top!==undefined?n.top:i.top;i.right=n.right!==undefined?n.right:i.right;i.bottom=n.bottom!==undefined?n.bottom:i.bottom;i.left=n.left!==undefined?n.left:i.left}},duration:{get:function(){return e},set:function(n){e=n;a.reset(e);r.duration(e);o.duration(e);u.duration(e)}},color:{get:function(){return c},set:function(t){c=n.utils.getColor(t);h.color(c);r.color(c)}},rightAlignYAxis:{get:function(){return v},set:function(n){v=n;u.orient(v?"right":"left")}},useInteractiveGuideline:{get:function(){return d},set:function(n){d=n;d&&(r.interactive(!1),r.useVoronoi(!1))}}}),n.utils.inheritOptions(t,r),n.utils.initOptions(t),t};n.models.linePlusBarChart=function(){"use strict";function t(y){return y.each(function(y){function rr(n){var r=+(n=="e"),i=r?1:-1,t=fi/3;return"M"+.5*i+","+t+"A6,6 0 0 "+r+" "+6.5*i+","+(t+6)+"V"+(2*t-6)+"A6,6 0 0 "+r+" "+.5*i+","+2*t+"ZM"+2.5*i+","+(t+8)+"V"+(2*t-8)+"M"+4.5*i+","+(t+8)+"V"+(2*t-8)}function ur(){f.empty()||f.extent(a);pi.data([f.empty()?o.domain():a]).each(function(n){var t=o(n[0])-o.range()[0],i=o.range()[1]-o(n[1]);d3.select(this).select(".left").attr("width",t<0?0:t);d3.select(this).select(".right").attr("x",o(n[1])).attr("width",i<0?0:i)})}function ir(){a=f.empty()?null:f.extent();l=f.empty()?o.domain():f.extent();st.brush({extent:l,brush:f});ur();u.width(ri).height(hi).color(y.map(function(n,t){return n.color||p(n,t)}).filter(function(n,t){return!y[t].disabled&&y[t].bar}));r.width(ri).height(hi).color(y.map(function(n,t){return n.color||p(n,t)}).filter(function(n,t){return!y[t].disabled&&!y[t].bar}));var t=ni.select(".nv-focus .nv-barsWrap").datum(ui.length?ui.map(function(n){return{key:n.key,values:n.values.filter(function(n,t){return u.x()(n,t)>=l[0]&&u.x()(n,t)<=l[1]})}}):[{values:[]}]),i=ni.select(".nv-focus .nv-linesWrap").datum(kt(oi)?[{values:[]}]:oi.filter(function(n){return!n.disabled}).map(function(n){return{area:n.area,fillOpacity:n.fillOpacity,key:n.key,values:n.values.filter(function(n,t){return r.x()(n,t)>=l[0]&&r.x()(n,t)<=l[1]})}}));k=ui.length?u.xScale():r.xScale();b.scale(k)._ticks(n.utils.calcTicksX(ri/100,y)).tickSize(-hi,0);b.domain([Math.ceil(l[0]),Math.floor(l[1])]);ni.select(".nv-x.nv-axis").transition().duration(v).call(b);t.transition().duration(v).call(u);i.transition().duration(v).call(r);ni.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+yt.range()[0]+")");g.scale(yt)._ticks(n.utils.calcTicksY(hi/36,y)).tickSize(-ri,0);nt.scale(dt)._ticks(n.utils.calcTicksY(hi/36,y)).tickSize(ui.length?0:-ri,0);ni.select(".nv-focus .nv-y1.nv-axis").style("opacity",ui.length?1:0);ni.select(".nv-focus .nv-y2.nv-axis").style("opacity",oi.length&&!kt(oi)?1:0).attr("transform","translate("+k.range()[1]+",0)");ni.select(".nv-focus .nv-y1.nv-axis").transition().duration(v).call(g);ni.select(".nv-focus .nv-y2.nv-axis").transition().duration(v).call(nt)}var ei=d3.select(this),fr=this,li,ui,oi,ki,di,ci,si,yi,gi,nr,tr,pi,wi,bi;n.utils.initSVG(ei);var ri=n.utils.availableWidth(ct,ei,i),hi=n.utils.availableHeight(ut,ei,i)-(ot?tt:0),fi=tt-e.top-e.bottom;if(t.update=function(){ei.transition().duration(v).call(t)},t.container=this,h.setter(ii(y),t.update).getter(ti(y)).update(),h.disabled=y.map(function(n){return!!n.disabled}),!ht){ht={};for(li in h)ht[li]=h[li]instanceof Array?h[li].slice(0):h[li]}if(y&&y.length&&y.filter(function(n){return n.values.length}).length)ei.selectAll(".nv-noData").remove();else return n.utils.noData(t,ei),t;ui=y.filter(function(n){return!n.disabled&&n.bar});oi=y.filter(function(n){return!n.bar});k=u.xScale();o=d.scale();yt=u.yScale();dt=r.yScale();pt=w.yScale();gt=c.yScale();ki=y.filter(function(n){return!n.disabled&&n.bar}).map(function(n){return n.values.map(function(n,t){return{x:ft(n,t),y:et(n,t)}})});di=y.filter(function(n){return!n.disabled&&!n.bar}).map(function(n){return n.values.map(function(n,t){return{x:ft(n,t),y:et(n,t)}})});k.range([0,ri]);o.domain(d3.extent(d3.merge(ki.concat(di)),function(n){return n.x})).range([0,ri]);var ai=ei.selectAll("g.nv-wrap.nv-linePlusBar").data([y]),vi=ai.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),ni=ai.select("g");vi.append("g").attr("class","nv-legendWrap");ci=vi.append("g").attr("class","nv-focus");ci.append("g").attr("class","nv-x nv-axis");ci.append("g").attr("class","nv-y1 nv-axis");ci.append("g").attr("class","nv-y2 nv-axis");ci.append("g").attr("class","nv-barsWrap");ci.append("g").attr("class","nv-linesWrap");si=vi.append("g").attr("class","nv-context");si.append("g").attr("class","nv-x nv-axis");si.append("g").attr("class","nv-y1 nv-axis");si.append("g").attr("class","nv-y2 nv-axis");si.append("g").attr("class","nv-barsWrap");si.append("g").attr("class","nv-linesWrap");si.append("g").attr("class","nv-brushBackground");si.append("g").attr("class","nv-x nv-brush");lt&&(yi=s.align()?ri/2:ri,gi=s.align()?yi:0,s.width(yi),ni.select(".nv-legendWrap").datum(y.map(function(n){return n.originalKey=n.originalKey===undefined?n.key:n.originalKey,n.key=n.originalKey+(n.bar?wt:bt),n})).call(s),i.top!=s.height()&&(i.top=s.height(),hi=n.utils.availableHeight(ut,ei,i)-tt),ni.select(".nv-legendWrap").attr("transform","translate("+gi+","+-i.top+")"));ai.attr("transform","translate("+i.left+","+i.top+")");ni.select(".nv-context").style("display",ot?"initial":"none");w.width(ri).height(fi).color(y.map(function(n,t){return n.color||p(n,t)}).filter(function(n,t){return!y[t].disabled&&y[t].bar}));c.width(ri).height(fi).color(y.map(function(n,t){return n.color||p(n,t)}).filter(function(n,t){return!y[t].disabled&&!y[t].bar}));nr=ni.select(".nv-context .nv-barsWrap").datum(ui.length?ui:[{values:[]}]);tr=ni.select(".nv-context .nv-linesWrap").datum(kt(oi)?[{values:[]}]:oi.filter(function(n){return!n.disabled}));ni.select(".nv-context").attr("transform","translate(0,"+(hi+i.bottom+e.top)+")");nr.transition().call(w);tr.transition().call(c);vt&&(d._ticks(n.utils.calcTicksX(ri/100,y)).tickSize(-fi,0),ni.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+pt.range()[0]+")"),ni.select(".nv-context .nv-x.nv-axis").transition().call(d));at&&(it.scale(pt)._ticks(fi/36).tickSize(-ri,0),rt.scale(gt)._ticks(fi/36).tickSize(ui.length?0:-ri,0),ni.select(".nv-context .nv-y3.nv-axis").style("opacity",ui.length?1:0).attr("transform","translate(0,"+o.range()[0]+")"),ni.select(".nv-context .nv-y2.nv-axis").style("opacity",oi.length?1:0).attr("transform","translate("+o.range()[1]+",0)"),ni.select(".nv-context .nv-y1.nv-axis").transition().call(it),ni.select(".nv-context .nv-y2.nv-axis").transition().call(rt));f.x(o).on("brush",ir);a&&f.extent(a);pi=ni.select(".nv-brushBackground").selectAll("g").data([a||f.extent()]);wi=pi.enter().append("g");wi.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",fi);wi.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",fi);bi=ni.select(".nv-x.nv-brush").call(f);bi.selectAll("rect").attr("height",fi);bi.selectAll(".resize").append("path").attr("d",rr);s.dispatch.on("stateChange",function(n){for(var i in n)h[i]=n[i];st.stateChange(h);t.update()});st.on("changeState",function(n){typeof n.disabled!="undefined"&&(y.forEach(function(t,i){t.disabled=n.disabled[i]}),h.disabled=n.disabled);t.update()});ir()}),t}var r=n.models.line(),c=n.models.line(),u=n.models.historicalBar(),w=n.models.historicalBar(),b=n.models.axis(),d=n.models.axis(),g=n.models.axis(),nt=n.models.axis(),it=n.models.axis(),rt=n.models.axis(),s=n.models.legend(),f=d3.svg.brush(),y=n.models.tooltip(),i={top:30,right:30,bottom:30,left:60},e={top:0,right:30,bottom:20,left:60},ct=null,ut=null,ft=function(n){return n.x},et=function(n){return n.y},p=n.utils.defaultColor(),lt=!0,ot=!0,at=!1,vt=!0,tt=50,l,a=null,k,o,yt,dt,pt,gt,ni=null,st=d3.dispatch("brush","stateChange","changeState"),v=0,h=n.utils.state(),ht=null,wt=" (left axis)",bt=" (right axis)";r.clipEdge(!0);c.interactive(!1);c.pointActive(function(){return!1});b.orient("bottom").tickPadding(5);g.orient("left");nt.orient("right");d.orient("bottom").tickPadding(5);it.orient("left");rt.orient("right");y.headerEnabled(!0).headerFormatter(function(n,t){return b.tickFormat()(n,t)});var ti=function(n){return function(){return{active:n.map(function(n){return!n.disabled})}}},ii=function(n){return function(t){t.active!==undefined&&n.forEach(function(n,i){n.disabled=!t.active[i]})}},kt=function(n){return n.every(function(n){return n.disabled})};r.dispatch.on("elementMouseover.tooltip",function(n){y.duration(100).valueFormatter(function(n,t){return nt.tickFormat()(n,t)}).data(n).hidden(!1)});r.dispatch.on("elementMouseout.tooltip",function(){y.hidden(!0)});u.dispatch.on("elementMouseover.tooltip",function(n){n.value=t.x()(n.data);n.series={value:t.y()(n.data),color:n.color};y.duration(0).valueFormatter(function(n,t){return g.tickFormat()(n,t)}).data(n).hidden(!1)});u.dispatch.on("elementMouseout.tooltip",function(){y.hidden(!0)});u.dispatch.on("elementMousemove.tooltip",function(){y()});return t.dispatch=st,t.legend=s,t.lines=r,t.lines2=c,t.bars=u,t.bars2=w,t.xAxis=b,t.x2Axis=d,t.y1Axis=g,t.y2Axis=nt,t.y3Axis=it,t.y4Axis=rt,t.tooltip=y,t.options=n.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return ct},set:function(n){ct=n}},height:{get:function(){return ut},set:function(n){ut=n}},showLegend:{get:function(){return lt},set:function(n){lt=n}},brushExtent:{get:function(){return a},set:function(n){a=n}},noData:{get:function(){return ni},set:function(n){ni=n}},focusEnable:{get:function(){return ot},set:function(n){ot=n}},focusHeight:{get:function(){return tt},set:function(n){tt=n}},focusShowAxisX:{get:function(){return vt},set:function(n){vt=n}},focusShowAxisY:{get:function(){return at},set:function(n){at=n}},legendLeftAxisHint:{get:function(){return wt},set:function(n){wt=n}},legendRightAxisHint:{get:function(){return bt},set:function(n){bt=n}},margin:{get:function(){return i},set:function(n){i.top=n.top!==undefined?n.top:i.top;i.right=n.right!==undefined?n.right:i.right;i.bottom=n.bottom!==undefined?n.bottom:i.bottom;i.left=n.left!==undefined?n.left:i.left}},focusMargin:{get:function(){return e},set:function(n){e.top=n.top!==undefined?n.top:e.top;e.right=n.right!==undefined?n.right:e.right;e.bottom=n.bottom!==undefined?n.bottom:e.bottom;e.left=n.left!==undefined?n.left:e.left}},duration:{get:function(){return v},set:function(n){v=n}},color:{get:function(){return p},set:function(t){p=n.utils.getColor(t);s.color(p)}},x:{get:function(){return ft},set:function(n){ft=n;r.x(n);c.x(n);u.x(n);w.x(n)}},y:{get:function(){return et},set:function(n){et=n;r.y(n);c.y(n);u.y(n);w.y(n)}}}),n.utils.inheritOptions(t,r),n.utils.initOptions(t),t};n.models.lineWithFocusChart=function(){"use strict";function t(g){return g.each(function(g){function fi(n){var r=+(n=="e"),i=r?1:-1,t=yt/3;return"M"+.5*i+","+t+"A6,6 0 0 "+r+" "+6.5*i+","+(t+6)+"V"+(2*t-6)+"A6,6 0 0 "+r+" "+.5*i+","+2*t+"ZM"+2.5*i+","+(t+8)+"V"+(2*t-8)+"M"+4.5*i+","+(t+8)+"V"+(2*t-8)}function ei(){u.empty()||u.extent(l);gt.data([u.empty()?c.domain():l]).each(function(n){var t=c(n[0])-it.range()[0],i=at-c(n[1]);d3.select(this).select(".left").attr("width",t<0?0:t);d3.select(this).select(".right").attr("x",c(n[1])).attr("width",i<0?0:i)})}function ri(){var n,t;(l=u.empty()?null:u.extent(),n=u.empty()?c.domain():u.extent(),Math.abs(n[0]-n[1])<=1)||(ut.brush({extent:n,brush:u}),ei(),t=st.select(".nv-focus .nv-linesWrap").datum(g.filter(function(n){return!n.disabled}).map(function(t){return{key:t.key,area:t.area,classed:t.classed,values:t.values.filter(function(t,r){return i.x()(t,r)>=n[0]&&i.x()(t,r)<=n[1]})}})),t.transition().duration(o).call(i),st.select(".nv-focus .nv-x.nv-axis").transition().duration(o).call(s),st.select(".nv-focus .nv-y.nv-axis").transition().duration(o).call(h))}var lt=d3.select(this),ui=this,wt,bt,pt,ii,gt,ni,ti;n.utils.initSVG(lt);var at=n.utils.availableWidth(ft,lt,r),vt=n.utils.availableHeight(nt,lt,r)-d,yt=d-f.top-f.bottom;if(t.update=function(){lt.transition().duration(o).call(t)},t.container=this,a.setter(ct(g),t.update).getter(ht(g)).update(),a.disabled=g.map(function(n){return!!n.disabled}),!k){k={};for(wt in a)k[wt]=a[wt]instanceof Array?a[wt].slice(0):a[wt]}if(g&&g.length&&g.filter(function(n){return n.values.length}).length)lt.selectAll(".nv-noData").remove();else return n.utils.noData(t,lt),t;it=i.xScale();ot=i.yScale();c=e.xScale();rt=e.yScale();var kt=lt.selectAll("g.nv-wrap.nv-lineWithFocusChart").data([g]),dt=kt.enter().append("g").attr("class","nvd3 nv-wrap nv-lineWithFocusChart").append("g"),st=kt.select("g");dt.append("g").attr("class","nv-legendWrap");bt=dt.append("g").attr("class","nv-focus");bt.append("g").attr("class","nv-x nv-axis");bt.append("g").attr("class","nv-y nv-axis");bt.append("g").attr("class","nv-linesWrap");bt.append("g").attr("class","nv-interactive");pt=dt.append("g").attr("class","nv-context");pt.append("g").attr("class","nv-x nv-axis");pt.append("g").attr("class","nv-y nv-axis");pt.append("g").attr("class","nv-linesWrap");pt.append("g").attr("class","nv-brushBackground");pt.append("g").attr("class","nv-x nv-brush");et&&(v.width(at),st.select(".nv-legendWrap").datum(g).call(v),r.top!=v.height()&&(r.top=v.height(),vt=n.utils.availableHeight(nt,lt,r)-d),st.select(".nv-legendWrap").attr("transform","translate(0,"+-r.top+")"));kt.attr("transform","translate("+r.left+","+r.top+")");tt&&(y.width(at).height(vt).margin({left:r.left,top:r.top}).svgContainer(lt).xScale(it),kt.select(".nv-interactive").call(y));i.width(at).height(vt).color(g.map(function(n,t){return n.color||b(n,t)}).filter(function(n,t){return!g[t].disabled}));e.defined(i.defined()).width(at).height(yt).color(g.map(function(n,t){return n.color||b(n,t)}).filter(function(n,t){return!g[t].disabled}));st.select(".nv-context").attr("transform","translate(0,"+(vt+r.bottom+f.top)+")");ii=st.select(".nv-context .nv-linesWrap").datum(g.filter(function(n){return!n.disabled}));d3.transition(ii).call(e);s.scale(it)._ticks(n.utils.calcTicksX(at/100,g)).tickSize(-vt,0);h.scale(ot)._ticks(n.utils.calcTicksY(vt/36,g)).tickSize(-at,0);st.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+vt+")");u.x(c).on("brush",function(){ri()});l&&u.extent(l);gt=st.select(".nv-brushBackground").selectAll("g").data([l||u.extent()]);ni=gt.enter().append("g");ni.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",yt);ni.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",yt);ti=st.select(".nv-x.nv-brush").call(u);ti.selectAll("rect").attr("height",yt);ti.selectAll(".resize").append("path").attr("d",fi);ri();p.scale(c)._ticks(n.utils.calcTicksX(at/100,g)).tickSize(-yt,0);st.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+rt.range()[0]+")");d3.transition(st.select(".nv-context .nv-x.nv-axis")).call(p);w.scale(rt)._ticks(n.utils.calcTicksY(yt/36,g)).tickSize(-at,0);d3.transition(st.select(".nv-context .nv-y.nv-axis")).call(w);st.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+rt.range()[0]+")");v.dispatch.on("stateChange",function(n){for(var i in n)a[i]=n[i];ut.stateChange(a);t.update()});y.dispatch.on("elementMousemove",function(r){var o,f,l,e,v;if(i.clearHighlights(),e=[],g.filter(function(n,t){return n.seriesIndex=t,!n.disabled}).forEach(function(s,h){var v=u.empty()?c.domain():u.extent(),y=s.values.filter(function(n,t){return i.x()(n,t)>=v[0]&&i.x()(n,t)<=v[1]}),a,p;(f=n.interactiveBisect(y,r.pointXValue,i.x()),a=y[f],p=t.y()(a,f),p!=null&&i.highlightPoint(h,f,!0),a!==undefined)&&(o===undefined&&(o=a),l===undefined&&(l=t.xScale()(t.x()(a,f))),e.push({key:s.key,value:t.y()(a,f),color:b(s,s.seriesIndex)}))}),e.length>2){var p=t.yScale().invert(r.mouseY),w=Math.abs(t.yScale().domain()[0]-t.yScale().domain()[1]),k=.03*w,a=n.nearestValueIndex(e.map(function(n){return n.value}),p,k);a!==null&&(e[a].highlight=!0)}v=s.tickFormat()(t.x()(o,f));y.tooltip.chartContainer(ui.parentNode).valueFormatter(function(n){return n==null?"N/A":h.tickFormat()(n)}).data({value:v,index:f,series:e})();y.renderGuideLine(l)});y.dispatch.on("elementMouseout",function(){i.clearHighlights()});ut.on("changeState",function(n){typeof n.disabled!="undefined"&&g.forEach(function(t,i){t.disabled=n.disabled[i]});t.update()})}),t}var i=n.models.line(),e=n.models.line(),s=n.models.axis(),h=n.models.axis(),p=n.models.axis(),w=n.models.axis(),v=n.models.legend(),u=d3.svg.brush(),g=n.models.tooltip(),y=n.interactiveGuideline(),r={top:30,right:30,bottom:30,left:60},f={top:0,right:30,bottom:20,left:60},b=n.utils.defaultColor(),ft=null,nt=null,d=50,tt=!1,it,ot,c,rt,et=!0,l=null,st=null,ut=d3.dispatch("brush","stateChange","changeState"),o=250,a=n.utils.state(),k=null,ht,ct;i.clipEdge(!0).duration(0);e.interactive(!1);e.pointActive(function(){return!1});s.orient("bottom").tickPadding(5);h.orient("left");p.orient("bottom").tickPadding(5);w.orient("left");g.valueFormatter(function(n,t){return h.tickFormat()(n,t)}).headerFormatter(function(n,t){return s.tickFormat()(n,t)});ht=function(n){return function(){return{active:n.map(function(n){return!n.disabled})}}};ct=function(n){return function(t){t.active!==undefined&&n.forEach(function(n,i){n.disabled=!t.active[i]})}};i.dispatch.on("elementMouseover.tooltip",function(n){g.data(n).hidden(!1)});i.dispatch.on("elementMouseout.tooltip",function(){g.hidden(!0)});return t.dispatch=ut,t.legend=v,t.lines=i,t.lines2=e,t.xAxis=s,t.yAxis=h,t.x2Axis=p,t.y2Axis=w,t.interactiveLayer=y,t.tooltip=g,t.options=n.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return ft},set:function(n){ft=n}},height:{get:function(){return nt},set:function(n){nt=n}},focusHeight:{get:function(){return d},set:function(n){d=n}},showLegend:{get:function(){return et},set:function(n){et=n}},brushExtent:{get:function(){return l},set:function(n){l=n}},defaultState:{get:function(){return k},set:function(n){k=n}},noData:{get:function(){return st},set:function(n){st=n}},margin:{get:function(){return r},set:function(n){r.top=n.top!==undefined?n.top:r.top;r.right=n.right!==undefined?n.right:r.right;r.bottom=n.bottom!==undefined?n.bottom:r.bottom;r.left=n.left!==undefined?n.left:r.left}},focusMargin:{get:function(){return f},set:function(n){f.top=n.top!==undefined?n.top:f.top;f.right=n.right!==undefined?n.right:f.right;f.bottom=n.bottom!==undefined?n.bottom:f.bottom;f.left=n.left!==undefined?n.left:f.left}},color:{get:function(){return b},set:function(t){b=n.utils.getColor(t);v.color(b)}},interpolate:{get:function(){return i.interpolate()},set:function(n){i.interpolate(n);e.interpolate(n)}},xTickFormat:{get:function(){return s.tickFormat()},set:function(n){s.tickFormat(n);p.tickFormat(n)}},yTickFormat:{get:function(){return h.tickFormat()},set:function(n){h.tickFormat(n);w.tickFormat(n)}},duration:{get:function(){return o},set:function(n){o=n;h.duration(o);w.duration(o);s.duration(o);p.duration(o)}},x:{get:function(){return i.x()},set:function(n){i.x(n);e.x(n)}},y:{get:function(){return i.y()},set:function(n){i.y(n);e.y(n)}},useInteractiveGuideline:{get:function(){return tt},set:function(n){tt=n;tt&&(i.interactive(!1),i.useVoronoi(!1))}}}),n.utils.inheritOptions(t,i),n.utils.initOptions(t),t};n.models.multiBar=function(){"use strict";function c(ht){return w.reset(),ht.each(function(c){var bt=d-r.left-r.right,kt=g-r.top-r.bottom,ht,gt,ct,yt,at,pt,lt,ri,wt;nt=d3.select(this);n.utils.initSVG(nt);ht=0;gt=function(n,t){return n.series===c.length-1&&t===c[0].values.length-1?!0:!1};e&&c.length&&(e=[{values:c[0].values.map(function(n){return{x:n.x,y:0,series:n.series,size:.01}})}]);f&&(ct=d3.layout.stack().offset(rt).values(function(n){return n.values}).y(u)(!c.length&&e?e:c),ct.forEach(function(n,t){n.nonStackable?(c[t].nonStackableSeries=ht++,ct[t]=c[t]):t>0&&ct[t-1].nonStackable&&ct[t].values.map(function(n,i){n.y0-=ct[t-1].values[i].y;n.y1=n.y0+n.y})}),c=ct);c.forEach(function(n,t){n.values.forEach(function(i){i.series=t;i.key=n.key})});f&&c[0].values.map(function(n,t){var i=0,r=0;c.map(function(n,u){if(!c[u].nonStackable){var f=n.values[t];f.size=Math.abs(f.y);f.y<0?(f.y1=r,r=r-f.size):(f.y1=f.size+i,i=i+f.size)}})});yt=b&&k?[]:c.map(function(n,t){return n.values.map(function(n,i){return{x:y(n,i),y:u(n,i),y0:n.y0,y1:n.y1,idx:t}})});i.domain(b||d3.merge(yt).map(function(n){return n.x})).rangeBands(ut||[0,bt],et);t.domain(k||d3.extent(d3.merge(yt).map(function(n){var t=n.y;return f&&!c[n.idx].nonStackable&&(t=n.y>0?n.y1:n.y1+n.y),t}).concat(tt))).range(ft||[kt,0]);i.domain()[0]===i.domain()[1]&&(i.domain()[0]?i.domain([i.domain()[0]-i.domain()[0]*.01,i.domain()[1]+i.domain()[1]*.01]):i.domain([-1,1]));t.domain()[0]===t.domain()[1]&&(t.domain()[0]?t.domain([t.domain()[0]+t.domain()[0]*.01,t.domain()[1]-t.domain()[1]*.01]):t.domain([-1,1]));ot=ot||i;a=a||t;var vt=nt.selectAll("g.nv-wrap.nv-multibar").data([c]),dt=vt.enter().append("g").attr("class","nvd3 nv-wrap nv-multibar"),ni=dt.append("defs"),ti=dt.append("g"),ii=vt.select("g");ti.append("g").attr("class","nv-groups");vt.attr("transform","translate("+r.left+","+r.top+")");ni.append("clipPath").attr("id","nv-edge-clip-"+v).append("rect");vt.select("#nv-edge-clip-"+v+" rect").attr("width",bt).attr("height",kt);ii.attr("clip-path",it?"url(#nv-edge-clip-"+v+")":"");at=vt.select(".nv-groups").selectAll(".nv-group").data(function(n){return n},function(n,t){return t});at.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6);pt=w.transition(at.exit().selectAll("rect.nv-bar"),"multibarExit",Math.min(100,s)).attr("y",function(n){var t=a(0)||0;return f&&c[n.series]&&!c[n.series].nonStackable&&(t=a(n.y0)),t}).attr("height",0).remove();pt.delay&&pt.delay(function(n,t){return t*(s/(st+1))-t});at.attr("class",function(n,t){return"nv-group nv-series-"+t}).classed("hover",function(n){return n.hover}).style("fill",function(n,t){return l(n,t)}).style("stroke",function(n,t){return l(n,t)});at.style("stroke-opacity",1).style("fill-opacity",.75);lt=at.selectAll("rect.nv-bar").data(function(n){return e&&!c.length?e.values:n.values});lt.exit().remove();ri=lt.enter().append("rect").attr("class",function(n,t){return u(n,t)<0?"nv-bar negative":"nv-bar positive"}).attr("x",function(n,t,r){return f&&!c[r].nonStackable?0:r*i.rangeBand()/c.length}).attr("y",function(n,t,i){return a(f&&!c[i].nonStackable?n.y0:0)||0}).attr("height",0).attr("width",function(n,t,r){return i.rangeBand()/(f&&!c[r].nonStackable?1:c.length)}).attr("transform",function(n,t){return"translate("+i(y(n,t))+",0)"});lt.style("fill",function(n,t,i){return l(n,i,t)}).style("stroke",function(n,t,i){return l(n,i,t)}).on("mouseover",function(n,t){d3.select(this).classed("hover",!0);h.elementMouseover({data:n,index:t,color:d3.select(this).style("fill")})}).on("mouseout",function(n,t){d3.select(this).classed("hover",!1);h.elementMouseout({data:n,index:t,color:d3.select(this).style("fill")})}).on("mousemove",function(n,t){h.elementMousemove({data:n,index:t,color:d3.select(this).style("fill")})}).on("click",function(n,t){h.elementClick({data:n,index:t,color:d3.select(this).style("fill")});d3.event.stopPropagation()}).on("dblclick",function(n,t){h.elementDblClick({data:n,index:t,color:d3.select(this).style("fill")});d3.event.stopPropagation()});lt.attr("class",function(n,t){return u(n,t)<0?"nv-bar negative":"nv-bar positive"}).attr("transform",function(n,t){return"translate("+i(y(n,t))+",0)"});p&&(o||(o=c.map(function(){return!0})),lt.style("fill",function(n,t,i){return d3.rgb(p(n,t)).darker(o.map(function(n,t){return t}).filter(function(n,t){return!o[t]})[i]).toString()}).style("stroke",function(n,t,i){return d3.rgb(p(n,t)).darker(o.map(function(n,t){return t}).filter(function(n,t){return!o[t]})[i]).toString()}));wt=lt.watchTransition(w,"multibar",Math.min(250,s)).delay(function(n,t){return t*s/c[0].values.length});f?wt.attr("y",function(n,i,r){return c[r].nonStackable?u(n,i)<0?t(0):t(0)-t(u(n,i))<-1?t(0)-1:t(u(n,i))||0:t(n.y1)}).attr("height",function(n,i,r){return c[r].nonStackable?Math.max(Math.abs(t(u(n,i))-t(0)),0)||0:Math.max(Math.abs(t(n.y+n.y0)-t(n.y0)),0)}).attr("x",function(n,t,r){var u=0;return c[r].nonStackable&&(u=n.series*i.rangeBand()/c.length,c.length!==ht&&(u=c[r].nonStackableSeries*i.rangeBand()/(ht*2))),u}).attr("width",function(n,t,r){if(c[r].nonStackable){var u=i.rangeBand()/ht;return c.length!==ht&&(u=i.rangeBand()/(ht*2)),u}return i.rangeBand()}):wt.attr("x",function(n){return n.series*i.rangeBand()/c.length}).attr("width",i.rangeBand()/c.length).attr("y",function(n,i){return u(n,i)<0?t(0):t(0)-t(u(n,i))<1?t(0)-1:t(u(n,i))||0}).attr("height",function(n,i){return Math.max(Math.abs(t(u(n,i))-t(0)),1)||0});ot=i.copy();a=t.copy();c[0]&&c[0].values&&(st=c[0].values.length)}),w.renderEnd("multibar immediate"),c}var r={top:0,right:0,bottom:0,left:0},d=960,g=500,i=d3.scale.ordinal(),t=d3.scale.linear(),v=Math.floor(Math.random()*1e4),nt=null,y=function(n){return n.x},u=function(n){return n.y},tt=[0],it=!0,f=!1,rt="zero",l=n.utils.defaultColor(),e=!1,p=null,o,s=500,b,k,ut,ft,et=.1,h=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),ot,a,w=n.utils.renderWatch(h,s),st=0;return c.dispatch=h,c.options=n.utils.optionsFunc.bind(c),c._options=Object.create({},{width:{get:function(){return d},set:function(n){d=n}},height:{get:function(){return g},set:function(n){g=n}},x:{get:function(){return y},set:function(n){y=n}},y:{get:function(){return u},set:function(n){u=n}},xScale:{get:function(){return i},set:function(n){i=n}},yScale:{get:function(){return t},set:function(n){t=n}},xDomain:{get:function(){return b},set:function(n){b=n}},yDomain:{get:function(){return k},set:function(n){k=n}},xRange:{get:function(){return ut},set:function(n){ut=n}},yRange:{get:function(){return ft},set:function(n){ft=n}},forceY:{get:function(){return tt},set:function(n){tt=n}},stacked:{get:function(){return f},set:function(n){f=n}},stackOffset:{get:function(){return rt},set:function(n){rt=n}},clipEdge:{get:function(){return it},set:function(n){it=n}},disabled:{get:function(){return o},set:function(n){o=n}},id:{get:function(){return v},set:function(n){v=n}},hideable:{get:function(){return e},set:function(n){e=n}},groupSpacing:{get:function(){return et},set:function(n){et=n}},margin:{get:function(){return r},set:function(n){r.top=n.top!==undefined?n.top:r.top;r.right=n.right!==undefined?n.right:r.right;r.bottom=n.bottom!==undefined?n.bottom:r.bottom;r.left=n.left!==undefined?n.left:r.left}},duration:{get:function(){return s},set:function(n){s=n;w.reset(s)}},color:{get:function(){return l},set:function(t){l=n.utils.getColor(t)}},barColor:{get:function(){return p},set:function(t){p=t?n.utils.getColor(t):null}}}),n.utils.initOptions(c),c};n.models.multiBarChart=function(){"use strict";function t(v){return l.reset(),l.models(i),g&&l.models(s),nt&&l.models(f),v.each(function(l){var ct=d3.select(this),ui=this,vt,yt,pt,kt,gt,bt,ri;if(n.utils.initSVG(ct),vt=n.utils.availableWidth(tt,ct,r),yt=n.utils.availableHeight(b,ct,r),t.update=function(){o===0?ct.call(t):ct.transition().duration(o).call(t)},t.container=this,u.setter(at(l),t.update).getter(lt(l)).update(),u.disabled=l.map(function(n){return!!n.disabled}),!c){c={};for(pt in u)c[pt]=u[pt]instanceof Array?u[pt].slice(0):u[pt]}if(l&&l.length&&l.filter(function(n){return n.values.length}).length)ct.selectAll(".nv-noData").remove();else return n.utils.noData(t,ct),t;ht=i.xScale();et=i.yScale();var dt=ct.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([l]),wt=dt.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g"),v=dt.select("g");if(wt.append("g").attr("class","nv-x nv-axis"),wt.append("g").attr("class","nv-y nv-axis"),wt.append("g").attr("class","nv-barsWrap"),wt.append("g").attr("class","nv-legendWrap"),wt.append("g").attr("class","nv-controlsWrap"),it&&(e.width(vt-ot()),v.select(".nv-legendWrap").datum(l).call(e),r.top!=e.height()&&(r.top=e.height(),yt=n.utils.availableHeight(b,ct,r)),v.select(".nv-legendWrap").attr("transform","translate("+ot()+","+-r.top+")")),d&&(kt=[{key:h.grouped||"Grouped",disabled:i.stacked()},{key:h.stacked||"Stacked",disabled:!i.stacked()}],a.width(ot()).color(["#444","#444","#444"]),v.select(".nv-controlsWrap").datum(kt).attr("transform","translate(0,"+-r.top+")").call(a)),dt.attr("transform","translate("+r.left+","+r.top+")"),y&&v.select(".nv-y.nv-axis").attr("transform","translate("+vt+",0)"),i.disabled(l.map(function(n){return n.disabled})).width(vt).height(yt).color(l.map(function(n,t){return n.color||k(n,t)}).filter(function(n,t){return!l[t].disabled})),gt=v.select(".nv-barsWrap").datum(l.filter(function(n){return!n.disabled})),gt.call(i),g){if(s.scale(ht)._ticks(n.utils.calcTicksX(vt/100,l)).tickSize(-yt,0),v.select(".nv-x.nv-axis").attr("transform","translate(0,"+et.range()[0]+")"),v.select(".nv-x.nv-axis").call(s),bt=v.select(".nv-x.nv-axis > g").selectAll("g"),bt.selectAll("line, text").style("opacity",1),ut){var ni=function(n,t){return"translate("+n+","+t+")"},ti=5,ii=17;bt.selectAll("text").attr("transform",function(n,t,i){return ni(0,i%2==0?ti:ii)});ri=d3.selectAll(".nv-x.nv-axis .nv-wrap g g text")[0].length;v.selectAll(".nv-x.nv-axis .nv-axisMaxMin text").attr("transform",function(n,t){return ni(0,t===0||ri%2!=0?ii:ti)})}ft&&v.selectAll(".tick text").call(n.utils.wrapTicks,t.xAxis.rangeBand());rt&&bt.filter(function(n,t){return t%Math.ceil(l[0].values.length/(vt/100))!=0}).selectAll("text, line").style("opacity",0);p&&bt.selectAll(".tick text").attr("transform","rotate("+p+" 0,0)").style("text-anchor",p>0?"start":"end");v.select(".nv-x.nv-axis").selectAll("g.nv-axisMaxMin text").style("opacity",1)}nt&&(f.scale(et)._ticks(n.utils.calcTicksY(yt/36,l)).tickSize(-vt,0),v.select(".nv-y.nv-axis").call(f));e.dispatch.on("stateChange",function(n){for(var i in n)u[i]=n[i];w.stateChange(u);t.update()});a.dispatch.on("legendClick",function(n){if(n.disabled){kt=kt.map(function(n){return n.disabled=!0,n});n.disabled=!1;switch(n.key){case"Grouped":case h.grouped:i.stacked(!1);break;case"Stacked":case h.stacked:i.stacked(!0)}u.stacked=i.stacked();w.stateChange(u);t.update()}});w.on("changeState",function(n){typeof n.disabled!="undefined"&&(l.forEach(function(t,i){t.disabled=n.disabled[i]}),u.disabled=n.disabled);typeof n.stacked!="undefined"&&(i.stacked(n.stacked),u.stacked=n.stacked,st=n.stacked);t.update()})}),l.renderEnd("multibarchart immediate"),t}var i=n.models.multiBar(),s=n.models.axis(),f=n.models.axis(),e=n.models.legend(),a=n.models.legend(),v=n.models.tooltip(),r={top:30,right:20,bottom:50,left:60},tt=null,b=null,k=n.utils.defaultColor(),d=!0,h={},it=!0,g=!0,nt=!0,y=!1,rt=!0,ut=!1,ft=!1,p=0,ht,et,u=n.utils.state(),c=null,ct=null,w=d3.dispatch("stateChange","changeState","renderEnd"),ot=function(){return d?180:0},o=250;u.stacked=!1;i.stacked(!1);s.orient("bottom").tickPadding(7).showMaxMin(!1).tickFormat(function(n){return n});f.orient(y?"right":"left").tickFormat(d3.format(",.1f"));v.duration(0).valueFormatter(function(n,t){return f.tickFormat()(n,t)}).headerFormatter(function(n,t){return s.tickFormat()(n,t)});a.updateState(!1);var l=n.utils.renderWatch(w),st=!1,lt=function(n){return function(){return{active:n.map(function(n){return!n.disabled}),stacked:st}}},at=function(n){return function(t){t.stacked!==undefined&&(st=t.stacked);t.active!==undefined&&n.forEach(function(n,i){n.disabled=!t.active[i]})}};i.dispatch.on("elementMouseover.tooltip",function(n){n.value=t.x()(n.data);n.series={key:n.data.key,value:t.y()(n.data),color:n.color};v.data(n).hidden(!1)});i.dispatch.on("elementMouseout.tooltip",function(){v.hidden(!0)});i.dispatch.on("elementMousemove.tooltip",function(){v()});return t.dispatch=w,t.multibar=i,t.legend=e,t.controls=a,t.xAxis=s,t.yAxis=f,t.state=u,t.tooltip=v,t.options=n.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return tt},set:function(n){tt=n}},height:{get:function(){return b},set:function(n){b=n}},showLegend:{get:function(){return it},set:function(n){it=n}},showControls:{get:function(){return d},set:function(n){d=n}},controlLabels:{get:function(){return h},set:function(n){h=n}},showXAxis:{get:function(){return g},set:function(n){g=n}},showYAxis:{get:function(){return nt},set:function(n){nt=n}},defaultState:{get:function(){return c},set:function(n){c=n}},noData:{get:function(){return ct},set:function(n){ct=n}},reduceXTicks:{get:function(){return rt},set:function(n){rt=n}},rotateLabels:{get:function(){return p},set:function(n){p=n}},staggerLabels:{get:function(){return ut},set:function(n){ut=n}},wrapLabels:{get:function(){return ft},set:function(n){ft=!!n}},margin:{get:function(){return r},set:function(n){r.top=n.top!==undefined?n.top:r.top;r.right=n.right!==undefined?n.right:r.right;r.bottom=n.bottom!==undefined?n.bottom:r.bottom;r.left=n.left!==undefined?n.left:r.left}},duration:{get:function(){return o},set:function(n){o=n;i.duration(o);s.duration(o);f.duration(o);l.reset(o)}},color:{get:function(){return k},set:function(t){k=n.utils.getColor(t);e.color(k)}},rightAlignYAxis:{get:function(){return y},set:function(n){y=n;f.orient(y?"right":"left")}},barColor:{get:function(){return i.barColor},set:function(n){i.barColor(n);e.color(function(n,t){return d3.rgb("#ccc").darker(t*1.5).toString()})}}}),n.utils.inheritOptions(t,i),n.utils.initOptions(t),t};n.models.multiBarHorizontal=function(){"use strict";function c(g){return e.reset(),g.each(function(c){var vt=tt-u.left-u.right,pt=it-u.top-u.bottom,at,ot,g,ct;st=d3.select(this);n.utils.initSVG(st);f&&(c=d3.layout.stack().offset("zero").values(function(n){return n.values}).y(i)(c));c.forEach(function(n,t){n.values.forEach(function(i){i.series=t;i.key=n.key})});f&&c[0].values.map(function(n,t){var i=0,r=0;c.map(function(n){var u=n.values[t];u.size=Math.abs(u.y);u.y<0?(u.y1=r-u.size,r=r-u.size):(u.y1=i,i=i+u.size)})});at=b&&k?[]:c.map(function(n){return n.values.map(function(n,t){return{x:h(n,t),y:i(n,t),y0:n.y0,y1:n.y1}})});r.domain(b||d3.merge(at).map(function(n){return n.x})).rangeBands(ft||[0,pt],ut);t.domain(k||d3.extent(d3.merge(at).map(function(n){return f?n.y>0?n.y1+n.y:n.y1:n.y}).concat(rt)));p&&!f?t.range(d||[t.domain()[0]<0?w:0,vt-(t.domain()[1]>0?w:0)]):t.range(d||[0,vt]);et=et||r;nt=nt||d3.scale.linear().domain(t.domain()).range([t(0),t(0)]);var lt=d3.select(this).selectAll("g.nv-wrap.nv-multibarHorizontal").data([c]),yt=lt.enter().append("g").attr("class","nvd3 nv-wrap nv-multibarHorizontal"),bt=yt.append("defs"),wt=yt.append("g"),kt=lt.select("g");wt.append("g").attr("class","nv-groups");lt.attr("transform","translate("+u.left+","+u.top+")");ot=lt.select(".nv-groups").selectAll(".nv-group").data(function(n){return n},function(n,t){return t});ot.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6);ot.exit().watchTransition(e,"multibarhorizontal: exit groups").style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove();ot.attr("class",function(n,t){return"nv-group nv-series-"+t}).classed("hover",function(n){return n.hover}).style("fill",function(n,t){return y(n,t)}).style("stroke",function(n,t){return y(n,t)});ot.watchTransition(e,"multibarhorizontal: groups").style("stroke-opacity",1).style("fill-opacity",.75);g=ot.selectAll("g.nv-bar").data(function(n){return n.values});g.exit().remove();ct=g.enter().append("g").attr("transform",function(n,t,i){return"translate("+nt(f?n.y0:0)+","+(f?0:i*r.rangeBand()/c.length+r(h(n,t)))+")"});ct.append("rect").attr("width",0).attr("height",r.rangeBand()/(f?1:c.length));g.on("mouseover",function(n,t){d3.select(this).classed("hover",!0);s.elementMouseover({data:n,index:t,color:d3.select(this).style("fill")})}).on("mouseout",function(n,t){d3.select(this).classed("hover",!1);s.elementMouseout({data:n,index:t,color:d3.select(this).style("fill")})}).on("mouseout",function(n,t){s.elementMouseout({data:n,index:t,color:d3.select(this).style("fill")})}).on("mousemove",function(n,t){s.elementMousemove({data:n,index:t,color:d3.select(this).style("fill")})}).on("click",function(n,t){s.elementClick({data:n,index:t,color:d3.select(this).style("fill")});d3.event.stopPropagation()}).on("dblclick",function(n,t){s.elementDblClick({data:n,index:t,color:d3.select(this).style("fill")});d3.event.stopPropagation()});a(c[0],0)&&(ct.append("polyline"),g.select("polyline").attr("fill","none").attr("points",function(n,i){var u=a(n,i),e=.8*r.rangeBand()/((f?1:c.length)*2),o;return u=u.length?u:[-Math.abs(u),Math.abs(u)],u=u.map(function(n){return t(n)-t(0)}),o=[[u[0],-e],[u[0],e],[u[0],0],[u[1],0],[u[1],-e],[u[1],e]],o.map(function(n){return n.join(",")}).join(" ")}).attr("transform",function(n,u){var e=r.rangeBand()/((f?1:c.length)*2);return"translate("+(i(n,u)<0?0:t(i(n,u))-t(0))+", "+e+")"}));ct.append("text");p&&!f?(g.select("text").attr("text-anchor",function(n,t){return i(n,t)<0?"end":"start"}).attr("y",r.rangeBand()/(c.length*2)).attr("dy",".32em").text(function(n,t){var u=l(i(n,t)),r=a(n,t);return r===undefined?u:r.length?u+"+"+l(Math.abs(r[1]))+"-"+l(Math.abs(r[0])):u+"±"+l(Math.abs(r))}),g.watchTransition(e,"multibarhorizontal: bars").select("text").attr("x",function(n,r){return i(n,r)<0?-4:t(i(n,r))-t(0)+4})):g.selectAll("text").text("");ht&&!f?(ct.append("text").classed("nv-bar-label",!0),g.select("text.nv-bar-label").attr("text-anchor",function(n,t){return i(n,t)<0?"start":"end"}).attr("y",r.rangeBand()/(c.length*2)).attr("dy",".32em").text(function(n,t){return h(n,t)}),g.watchTransition(e,"multibarhorizontal: bars").select("text.nv-bar-label").attr("x",function(n,r){return i(n,r)<0?t(0)-t(i(n,r))+4:-4})):g.selectAll("text.nv-bar-label").text("");g.attr("class",function(n,t){return i(n,t)<0?"nv-bar negative":"nv-bar positive"});v&&(o||(o=c.map(function(){return!0})),g.style("fill",function(n,t,i){return d3.rgb(v(n,t)).darker(o.map(function(n,t){return t}).filter(function(n,t){return!o[t]})[i]).toString()}).style("stroke",function(n,t,i){return d3.rgb(v(n,t)).darker(o.map(function(n,t){return t}).filter(function(n,t){return!o[t]})[i]).toString()}));f?g.watchTransition(e,"multibarhorizontal: bars").attr("transform",function(n,i){return"translate("+t(n.y1)+","+r(h(n,i))+")"}).select("rect").attr("width",function(n,r){return Math.abs(t(i(n,r)+n.y0)-t(n.y0))||0}).attr("height",r.rangeBand()):g.watchTransition(e,"multibarhorizontal: bars").attr("transform",function(n,u){return"translate("+(i(n,u)<0?t(i(n,u)):t(0))+","+(n.series*r.rangeBand()/c.length+r(h(n,u)))+")"}).select("rect").attr("height",r.rangeBand()/c.length).attr("width",function(n,r){return Math.max(Math.abs(t(i(n,r))-t(0)),1)||0});et=r.copy();nt=t.copy()}),e.renderEnd("multibarHorizontal immediate"),c}var u={top:0,right:0,bottom:0,left:0},tt=960,it=500,ot=Math.floor(Math.random()*1e4),st=null,r=d3.scale.ordinal(),t=d3.scale.linear(),h=function(n){return n.x},i=function(n){return n.y},a=function(n){return n.yErr},rt=[0],y=n.utils.defaultColor(),v=null,o,f=!1,p=!1,ht=!1,w=60,ut=.1,l=d3.format(",.2f"),b,k,ft,d,g=250,s=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),et,nt,e=n.utils.renderWatch(s,g);return c.dispatch=s,c.options=n.utils.optionsFunc.bind(c),c._options=Object.create({},{width:{get:function(){return tt},set:function(n){tt=n}},height:{get:function(){return it},set:function(n){it=n}},x:{get:function(){return h},set:function(n){h=n}},y:{get:function(){return i},set:function(n){i=n}},yErr:{get:function(){return a},set:function(n){a=n}},xScale:{get:function(){return r},set:function(n){r=n}},yScale:{get:function(){return t},set:function(n){t=n}},xDomain:{get:function(){return b},set:function(n){b=n}},yDomain:{get:function(){return k},set:function(n){k=n}},xRange:{get:function(){return ft},set:function(n){ft=n}},yRange:{get:function(){return d},set:function(n){d=n}},forceY:{get:function(){return rt},set:function(n){rt=n}},stacked:{get:function(){return f},set:function(n){f=n}},showValues:{get:function(){return p},set:function(n){p=n}},disabled:{get:function(){return o},set:function(n){o=n}},id:{get:function(){return ot},set:function(n){ot=n}},valueFormat:{get:function(){return l},set:function(n){l=n}},valuePadding:{get:function(){return w},set:function(n){w=n}},groupSpacing:{get:function(){return ut},set:function(n){ut=n}},margin:{get:function(){return u},set:function(n){u.top=n.top!==undefined?n.top:u.top;u.right=n.right!==undefined?n.right:u.right;u.bottom=n.bottom!==undefined?n.bottom:u.bottom;u.left=n.left!==undefined?n.left:u.left}},duration:{get:function(){return g},set:function(n){g=n;e.reset(g)}},color:{get:function(){return y},set:function(t){y=n.utils.getColor(t)}},barColor:{get:function(){return v},set:function(t){v=t?n.utils.getColor(t):null}}}),n.utils.initOptions(c),c};n.models.multiBarHorizontalChart=function(){"use strict";function t(v){return l.reset(),l.models(i),d&&l.models(o),g&&l.models(s),v.each(function(l){var ft=d3.select(this),wt=this,ht,st,ct,at,yt,pt;if(n.utils.initSVG(ft),ht=n.utils.availableWidth(tt,ft,r),st=n.utils.availableHeight(p,ft,r),t.update=function(){ft.transition().duration(e).call(t)},t.container=this,h=i.stacked(),u.setter(ot(l),t.update).getter(et(l)).update(),u.disabled=l.map(function(n){return!!n.disabled}),!c){c={};for(ct in u)c[ct]=u[ct]instanceof Array?u[ct].slice(0):u[ct]}if(l&&l.length&&l.filter(function(n){return n.values.length}).length)ft.selectAll(".nv-noData").remove();else return n.utils.noData(t,ft),t;ut=i.xScale();nt=i.yScale();var vt=ft.selectAll("g.nv-wrap.nv-multiBarHorizontalChart").data([l]),lt=vt.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarHorizontalChart").append("g"),v=vt.select("g");lt.append("g").attr("class","nv-x nv-axis");lt.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line");lt.append("g").attr("class","nv-barsWrap");lt.append("g").attr("class","nv-legendWrap");lt.append("g").attr("class","nv-controlsWrap");it&&(f.width(ht-rt()),v.select(".nv-legendWrap").datum(l).call(f),r.top!=f.height()&&(r.top=f.height(),st=n.utils.availableHeight(p,ft,r)),v.select(".nv-legendWrap").attr("transform","translate("+rt()+","+-r.top+")"));b&&(at=[{key:k.grouped||"Grouped",disabled:i.stacked()},{key:k.stacked||"Stacked",disabled:!i.stacked()}],a.width(rt()).color(["#444","#444","#444"]),v.select(".nv-controlsWrap").datum(at).attr("transform","translate(0,"+-r.top+")").call(a));vt.attr("transform","translate("+r.left+","+r.top+")");i.disabled(l.map(function(n){return n.disabled})).width(ht).height(st).color(l.map(function(n,t){return n.color||w(n,t)}).filter(function(n,t){return!l[t].disabled}));yt=v.select(".nv-barsWrap").datum(l.filter(function(n){return!n.disabled}));yt.transition().call(i);d&&(o.scale(ut)._ticks(n.utils.calcTicksY(st/24,l)).tickSize(-ht,0),v.select(".nv-x.nv-axis").call(o),pt=v.select(".nv-x.nv-axis").selectAll("g"),pt.selectAll("line, text"));g&&(s.scale(nt)._ticks(n.utils.calcTicksX(ht/100,l)).tickSize(-st,0),v.select(".nv-y.nv-axis").attr("transform","translate(0,"+st+")"),v.select(".nv-y.nv-axis").call(s));v.select(".nv-zeroLine line").attr("x1",nt(0)).attr("x2",nt(0)).attr("y1",0).attr("y2",-st);f.dispatch.on("stateChange",function(n){for(var i in n)u[i]=n[i];y.stateChange(u);t.update()});a.dispatch.on("legendClick",function(n){if(n.disabled){at=at.map(function(n){return n.disabled=!0,n});n.disabled=!1;switch(n.key){case"Grouped":i.stacked(!1);break;case"Stacked":i.stacked(!0)}u.stacked=i.stacked();y.stateChange(u);h=i.stacked();t.update()}});y.on("changeState",function(n){typeof n.disabled!="undefined"&&(l.forEach(function(t,i){t.disabled=n.disabled[i]}),u.disabled=n.disabled);typeof n.stacked!="undefined"&&(i.stacked(n.stacked),u.stacked=n.stacked,h=n.stacked);t.update()})}),l.renderEnd("multibar horizontal chart immediate"),t}var i=n.models.multiBarHorizontal(),o=n.models.axis(),s=n.models.axis(),f=n.models.legend().height(30),a=n.models.legend().height(30),v=n.models.tooltip(),r={top:30,right:20,bottom:50,left:60},tt=null,p=null,w=n.utils.defaultColor(),b=!0,k={},it=!0,d=!0,g=!0,h=!1,ut,nt,u=n.utils.state(),c=null,ft=null,y=d3.dispatch("stateChange","changeState","renderEnd"),rt=function(){return b?180:0},e=250;u.stacked=!1;i.stacked(h);o.orient("left").tickPadding(5).showMaxMin(!1).tickFormat(function(n){return n});s.orient("bottom").tickFormat(d3.format(",.1f"));v.duration(0).valueFormatter(function(n,t){return s.tickFormat()(n,t)}).headerFormatter(function(n,t){return o.tickFormat()(n,t)});a.updateState(!1);var et=function(n){return function(){return{active:n.map(function(n){return!n.disabled}),stacked:h}}},ot=function(n){return function(t){t.stacked!==undefined&&(h=t.stacked);t.active!==undefined&&n.forEach(function(n,i){n.disabled=!t.active[i]})}},l=n.utils.renderWatch(y,e);i.dispatch.on("elementMouseover.tooltip",function(n){n.value=t.x()(n.data);n.series={key:n.data.key,value:t.y()(n.data),color:n.color};v.data(n).hidden(!1)});i.dispatch.on("elementMouseout.tooltip",function(){v.hidden(!0)});i.dispatch.on("elementMousemove.tooltip",function(){v()});return t.dispatch=y,t.multibar=i,t.legend=f,t.controls=a,t.xAxis=o,t.yAxis=s,t.state=u,t.tooltip=v,t.options=n.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return tt},set:function(n){tt=n}},height:{get:function(){return p},set:function(n){p=n}},showLegend:{get:function(){return it},set:function(n){it=n}},showControls:{get:function(){return b},set:function(n){b=n}},controlLabels:{get:function(){return k},set:function(n){k=n}},showXAxis:{get:function(){return d},set:function(n){d=n}},showYAxis:{get:function(){return g},set:function(n){g=n}},defaultState:{get:function(){return c},set:function(n){c=n}},noData:{get:function(){return ft},set:function(n){ft=n}},margin:{get:function(){return r},set:function(n){r.top=n.top!==undefined?n.top:r.top;r.right=n.right!==undefined?n.right:r.right;r.bottom=n.bottom!==undefined?n.bottom:r.bottom;r.left=n.left!==undefined?n.left:r.left}},duration:{get:function(){return e},set:function(n){e=n;l.reset(e);i.duration(e);o.duration(e);s.duration(e)}},color:{get:function(){return w},set:function(t){w=n.utils.getColor(t);f.color(w)}},barColor:{get:function(){return i.barColor},set:function(n){i.barColor(n);f.color(function(n,t){return d3.rgb("#ccc").darker(t*1.5).toString()})}}}),n.utils.inheritOptions(t,i),n.utils.initOptions(t),t};n.models.multiChart=function(){"use strict";function t(ot){return ot.each(function(ot){function ei(n){var t=ot[n.seriesIndex].yAxis===2?w:p;n.value=n.point.x;n.series={value:n.point.y,color:n.point.color,key:n.series.key};r.duration(0).valueFormatter(function(n,i){return t.tickFormat()(n,i)}).data(n).hidden(!1)}function oi(n){var t=ot[n.seriesIndex].yAxis===2?w:p;n.value=n.point.x;n.series={value:n.point.y,color:n.point.color,key:n.series.key};r.duration(100).valueFormatter(function(n,i){return t.tickFormat()(n,i)}).data(n).hidden(!1)}function si(n){var t=ot[n.seriesIndex].yAxis===2?w:p;n.point.x=f.x()(n.point);n.point.y=f.y()(n.point);r.duration(0).valueFormatter(function(n,i){return t.tickFormat()(n,i)}).data(n).hidden(!1)}function hi(n){var t=ot[n.data.series].yAxis===2?w:p;n.value=u.x()(n.data);n.series={value:u.y()(n.data),color:n.color,key:n.data.key};r.duration(0).valueFormatter(function(n,i){return t.tickFormat()(n,i)}).data(n).hidden(!1)}var vt=d3.select(this),gi=this,wt,bt,kt,lt,st,at,dt,fi;n.utils.initSVG(vt);t.update=function(){vt.transition().call(t)};t.container=this;var ct=n.utils.availableWidth(it,vt,i),ht=n.utils.availableHeight(k,vt,i),gt=ot.filter(function(n){return n.type=="line"&&n.yAxis==1}),ni=ot.filter(function(n){return n.type=="line"&&n.yAxis==2}),ti=ot.filter(function(n){return n.type=="scatter"&&n.yAxis==1}),ii=ot.filter(function(n){return n.type=="scatter"&&n.yAxis==2}),ri=ot.filter(function(n){return n.type=="bar"&&n.yAxis==1}),ui=ot.filter(function(n){return n.type=="bar"&&n.yAxis==2}),yt=ot.filter(function(n){return n.type=="area"&&n.yAxis==1}),pt=ot.filter(function(n){return n.type=="area"&&n.yAxis==2});if(ot&&ot.length&&ot.filter(function(n){return n.values.length}).length)vt.selectAll(".nv-noData").remove();else return n.utils.noData(t,vt),t;wt=ot.filter(function(n){return!n.disabled&&n.yAxis==1}).map(function(n){return n.values.map(function(n){return{x:b(n),y:d(n)}})});bt=ot.filter(function(n){return!n.disabled&&n.yAxis==2}).map(function(n){return n.values.map(function(n){return{x:b(n),y:d(n)}})});nt.domain(d3.extent(d3.merge(wt.concat(bt)),function(n){return b(n)})).range([0,ct]);kt=vt.selectAll("g.wrap.multiChart").data([ot]);lt=kt.enter().append("g").attr("class","wrap nvd3 multiChart").append("g");lt.append("g").attr("class","nv-x nv-axis");lt.append("g").attr("class","nv-y1 nv-axis");lt.append("g").attr("class","nv-y2 nv-axis");lt.append("g").attr("class","lines1Wrap");lt.append("g").attr("class","lines2Wrap");lt.append("g").attr("class","scatters1Wrap");lt.append("g").attr("class","scatters2Wrap");lt.append("g").attr("class","bars1Wrap");lt.append("g").attr("class","bars2Wrap");lt.append("g").attr("class","stack1Wrap");lt.append("g").attr("class","stack2Wrap");lt.append("g").attr("class","legendWrap");st=kt.select("g");at=ot.map(function(n,t){return ot[t].color||tt(n,t)});rt&&(dt=a.align()?ct/2:ct,fi=a.align()?dt:0,a.width(dt),a.color(at),st.select(".legendWrap").datum(ot.map(function(n){return n.originalKey=n.originalKey===undefined?n.key:n.originalKey,n.key=n.originalKey+(n.yAxis==1?"":" (right axis)"),n})).call(a),i.top!=a.height()&&(i.top=a.height(),ht=n.utils.availableHeight(k,vt,i)),st.select(".legendWrap").attr("transform","translate("+fi+","+-i.top+")"));s.width(ct).height(ht).interpolate(g).color(at.filter(function(n,t){return!ot[t].disabled&&ot[t].yAxis==1&&ot[t].type=="line"}));h.width(ct).height(ht).interpolate(g).color(at.filter(function(n,t){return!ot[t].disabled&&ot[t].yAxis==2&&ot[t].type=="line"}));v.width(ct).height(ht).color(at.filter(function(n,t){return!ot[t].disabled&&ot[t].yAxis==1&&ot[t].type=="scatter"}));y.width(ct).height(ht).color(at.filter(function(n,t){return!ot[t].disabled&&ot[t].yAxis==2&&ot[t].type=="scatter"}));u.width(ct).height(ht).color(at.filter(function(n,t){return!ot[t].disabled&&ot[t].yAxis==1&&ot[t].type=="bar"}));c.width(ct).height(ht).color(at.filter(function(n,t){return!ot[t].disabled&&ot[t].yAxis==2&&ot[t].type=="bar"}));f.width(ct).height(ht).color(at.filter(function(n,t){return!ot[t].disabled&&ot[t].yAxis==1&&ot[t].type=="area"}));l.width(ct).height(ht).color(at.filter(function(n,t){return!ot[t].disabled&&ot[t].yAxis==2&&ot[t].type=="area"}));st.attr("transform","translate("+i.left+","+i.top+")");var ci=st.select(".lines1Wrap").datum(gt.filter(function(n){return!n.disabled})),li=st.select(".scatters1Wrap").datum(ti.filter(function(n){return!n.disabled})),ai=st.select(".bars1Wrap").datum(ri.filter(function(n){return!n.disabled})),vi=st.select(".stack1Wrap").datum(yt.filter(function(n){return!n.disabled})),yi=st.select(".lines2Wrap").datum(ni.filter(function(n){return!n.disabled})),pi=st.select(".scatters2Wrap").datum(ii.filter(function(n){return!n.disabled})),wi=st.select(".bars2Wrap").datum(ui.filter(function(n){return!n.disabled})),bi=st.select(".stack2Wrap").datum(pt.filter(function(n){return!n.disabled})),ki=yt.length?yt.map(function(n){return n.values}).reduce(function(n,t){return n.map(function(n,i){return{x:n.x,y:n.y+t[i].y}})}).concat([{x:0,y:0}]):[],di=pt.length?pt.map(function(n){return n.values}).reduce(function(n,t){return n.map(function(n,i){return{x:n.x,y:n.y+t[i].y}})}).concat([{x:0,y:0}]):[];e.domain(ut||d3.extent(d3.merge(wt).concat(ki),function(n){return n.y})).range([0,ht]);o.domain(ft||d3.extent(d3.merge(bt).concat(di),function(n){return n.y})).range([0,ht]);s.yDomain(e.domain());v.yDomain(e.domain());u.yDomain(e.domain());f.yDomain(e.domain());h.yDomain(o.domain());y.yDomain(o.domain());c.yDomain(o.domain());l.yDomain(o.domain());yt.length&&d3.transition(vi).call(f);pt.length&&d3.transition(bi).call(l);ri.length&&d3.transition(ai).call(u);ui.length&&d3.transition(wi).call(c);gt.length&&d3.transition(ci).call(s);ni.length&&d3.transition(yi).call(h);ti.length&&d3.transition(li).call(v);ii.length&&d3.transition(pi).call(y);et._ticks(n.utils.calcTicksX(ct/100,ot)).tickSize(-ht,0);st.select(".nv-x.nv-axis").attr("transform","translate(0,"+ht+")");d3.transition(st.select(".nv-x.nv-axis")).call(et);p._ticks(n.utils.calcTicksY(ht/36,ot)).tickSize(-ct,0);d3.transition(st.select(".nv-y1.nv-axis")).call(p);w._ticks(n.utils.calcTicksY(ht/36,ot)).tickSize(-ct,0);d3.transition(st.select(".nv-y2.nv-axis")).call(w);st.select(".nv-y1.nv-axis").classed("nv-disabled",wt.length?!1:!0).attr("transform","translate("+nt.range()[0]+",0)");st.select(".nv-y2.nv-axis").classed("nv-disabled",bt.length?!1:!0).attr("transform","translate("+nt.range()[1]+",0)");a.dispatch.on("stateChange",function(){t.update()});s.dispatch.on("elementMouseover.tooltip",ei);h.dispatch.on("elementMouseover.tooltip",ei);s.dispatch.on("elementMouseout.tooltip",function(){r.hidden(!0)});h.dispatch.on("elementMouseout.tooltip",function(){r.hidden(!0)});v.dispatch.on("elementMouseover.tooltip",oi);y.dispatch.on("elementMouseover.tooltip",oi);v.dispatch.on("elementMouseout.tooltip",function(){r.hidden(!0)});y.dispatch.on("elementMouseout.tooltip",function(){r.hidden(!0)});f.dispatch.on("elementMouseover.tooltip",si);l.dispatch.on("elementMouseover.tooltip",si);f.dispatch.on("elementMouseout.tooltip",function(){r.hidden(!0)});l.dispatch.on("elementMouseout.tooltip",function(){r.hidden(!0)});u.dispatch.on("elementMouseover.tooltip",hi);c.dispatch.on("elementMouseover.tooltip",hi);u.dispatch.on("elementMouseout.tooltip",function(){r.hidden(!0)});c.dispatch.on("elementMouseout.tooltip",function(){r.hidden(!0)});u.dispatch.on("elementMousemove.tooltip",function(){r()});c.dispatch.on("elementMousemove.tooltip",function(){r()})}),t}var i={top:30,right:20,bottom:50,left:60},tt=n.utils.defaultColor(),it=null,k=null,rt=!0,ot=null,ut,ft,b=function(n){return n.x},d=function(n){return n.y},g="monotone",st=!0,nt=d3.scale.linear(),e=d3.scale.linear(),o=d3.scale.linear(),s=n.models.line().yScale(e),h=n.models.line().yScale(o),v=n.models.scatter().yScale(e),y=n.models.scatter().yScale(o),u=n.models.multiBar().stacked(!1).yScale(e),c=n.models.multiBar().stacked(!1).yScale(o),f=n.models.stackedArea().yScale(e),l=n.models.stackedArea().yScale(o),et=n.models.axis().scale(nt).orient("bottom").tickPadding(5),p=n.models.axis().scale(e).orient("left"),w=n.models.axis().scale(o).orient("right"),a=n.models.legend().height(30),r=n.models.tooltip(),ht=d3.dispatch();return t.dispatch=ht,t.legend=a,t.lines1=s,t.lines2=h,t.scatters1=v,t.scatters2=y,t.bars1=u,t.bars2=c,t.stack1=f,t.stack2=l,t.xAxis=et,t.yAxis1=p,t.yAxis2=w,t.tooltip=r,t.options=n.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return it},set:function(n){it=n}},height:{get:function(){return k},set:function(n){k=n}},showLegend:{get:function(){return rt},set:function(n){rt=n}},yDomain1:{get:function(){return ut},set:function(n){ut=n}},yDomain2:{get:function(){return ft},set:function(n){ft=n}},noData:{get:function(){return ot},set:function(n){ot=n}},interpolate:{get:function(){return g},set:function(n){g=n}},margin:{get:function(){return i},set:function(n){i.top=n.top!==undefined?n.top:i.top;i.right=n.right!==undefined?n.right:i.right;i.bottom=n.bottom!==undefined?n.bottom:i.bottom;i.left=n.left!==undefined?n.left:i.left}},color:{get:function(){return tt},set:function(t){tt=n.utils.getColor(t)}},x:{get:function(){return b},set:function(n){b=n;s.x(n);h.x(n);v.x(n);y.x(n);u.x(n);c.x(n);f.x(n);l.x(n)}},y:{get:function(){return d},set:function(n){d=n;s.y(n);h.y(n);v.y(n);y.y(n);f.y(n);l.y(n);u.y(n);c.y(n)}},useVoronoi:{get:function(){return st},set:function(n){st=n;s.useVoronoi(n);h.useVoronoi(n);f.useVoronoi(n);l.useVoronoi(n)}}}),n.utils.initOptions(t),t};n.models.ohlcBar=function(){"use strict";function u(rt){return rt.each(function(u){var rt,st,ft,ot;e=d3.select(this);rt=n.utils.availableWidth(w,e,r);st=n.utils.availableHeight(b,e,r);n.utils.initSVG(e);ft=rt/u[0].values.length*.9;i.domain(nt||d3.extent(u[0].values.map(l).concat(k)));d?i.range(p||[rt*.5/u[0].values.length,rt*(u[0].values.length-.5)/u[0].values.length]):i.range(p||[5+ft/2,rt-ft/2-5]);t.domain(tt||[d3.min(u[0].values.map(s).concat(v)),d3.max(u[0].values.map(o).concat(v))]).range(it||[st,0]);i.domain()[0]===i.domain()[1]&&(i.domain()[0]?i.domain([i.domain()[0]-i.domain()[0]*.01,i.domain()[1]+i.domain()[1]*.01]):i.domain([-1,1]));t.domain()[0]===t.domain()[1]&&(t.domain()[0]?t.domain([t.domain()[0]+t.domain()[0]*.01,t.domain()[1]-t.domain()[1]*.01]):t.domain([-1,1]));var et=d3.select(this).selectAll("g.nv-wrap.nv-ohlcBar").data([u[0].values]),ht=et.enter().append("g").attr("class","nvd3 nv-wrap nv-ohlcBar"),ct=ht.append("defs"),lt=ht.append("g"),at=et.select("g");lt.append("g").attr("class","nv-ticks");et.attr("transform","translate("+r.left+","+r.top+")");e.on("click",function(n,t){ut.chartClick({data:n,index:t,pos:d3.event,id:h})});ct.append("clipPath").attr("id","nv-chart-clip-path-"+h).append("rect");et.select("#nv-chart-clip-path-"+h+" rect").attr("width",rt).attr("height",st);at.attr("clip-path",g?"url(#nv-chart-clip-path-"+h+")":"");ot=et.select(".nv-ticks").selectAll(".nv-tick").data(function(n){return n});ot.exit().remove();ot.enter().append("path").attr("class",function(n,t,i){return(f(n,t)>c(n,t)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+i+"-"+t}).attr("d",function(n,i){return"m0,0l0,"+(t(f(n,i))-t(o(n,i)))+"l"+-ft/2+",0l"+ft/2+",0l0,"+(t(s(n,i))-t(f(n,i)))+"l0,"+(t(c(n,i))-t(s(n,i)))+"l"+ft/2+",0l"+-ft/2+",0z"}).attr("transform",function(n,r){return"translate("+i(l(n,r))+","+t(o(n,r))+")"}).attr("fill",function(){return y[0]}).attr("stroke",function(){return y[0]}).attr("x",0).attr("y",function(n,i){return t(Math.max(0,a(n,i)))}).attr("height",function(n,i){return Math.abs(t(a(n,i))-t(0))});ot.attr("class",function(n,t,i){return(f(n,t)>c(n,t)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+i+"-"+t});d3.transition(ot).attr("transform",function(n,r){return"translate("+i(l(n,r))+","+t(o(n,r))+")"}).attr("d",function(n,i){var r=rt/u[0].values.length*.9;return"m0,0l0,"+(t(f(n,i))-t(o(n,i)))+"l"+-r/2+",0l"+r/2+",0l0,"+(t(s(n,i))-t(f(n,i)))+"l0,"+(t(c(n,i))-t(s(n,i)))+"l"+r/2+",0l"+-r/2+",0z"})}),u}var r={top:0,right:0,bottom:0,left:0},w=null,b=null,h=Math.floor(Math.random()*1e4),e=null,i=d3.scale.linear(),t=d3.scale.linear(),l=function(n){return n.x},a=function(n){return n.y},f=function(n){return n.open},c=function(n){return n.close},o=function(n){return n.high},s=function(n){return n.low},k=[],v=[],d=!1,g=!0,y=n.utils.defaultColor(),rt=!1,nt,tt,p,it,ut=d3.dispatch("stateChange","changeState","renderEnd","chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");return u.highlightPoint=function(n,t){u.clearHighlights();e.select(".nv-ohlcBar .nv-tick-0-"+n).classed("hover",t)},u.clearHighlights=function(){e.select(".nv-ohlcBar .nv-tick.hover").classed("hover",!1)},u.dispatch=ut,u.options=n.utils.optionsFunc.bind(u),u._options=Object.create({},{width:{get:function(){return w},set:function(n){w=n}},height:{get:function(){return b},set:function(n){b=n}},xScale:{get:function(){return i},set:function(n){i=n}},yScale:{get:function(){return t},set:function(n){t=n}},xDomain:{get:function(){return nt},set:function(n){nt=n}},yDomain:{get:function(){return tt},set:function(n){tt=n}},xRange:{get:function(){return p},set:function(n){p=n}},yRange:{get:function(){return it},set:function(n){it=n}},forceX:{get:function(){return k},set:function(n){k=n}},forceY:{get:function(){return v},set:function(n){v=n}},padData:{get:function(){return d},set:function(n){d=n}},clipEdge:{get:function(){return g},set:function(n){g=n}},id:{get:function(){return h},set:function(n){h=n}},interactive:{get:function(){return rt},set:function(n){rt=n}},x:{get:function(){return l},set:function(n){l=n}},y:{get:function(){return a},set:function(n){a=n}},open:{get:function(){return f()},set:function(n){f=n}},close:{get:function(){return c()},set:function(n){c=n}},high:{get:function(){return o},set:function(n){o=n}},low:{get:function(){return s},set:function(n){s=n}},margin:{get:function(){return r},set:function(n){r.top=n.top!=undefined?n.top:r.top;r.right=n.right!=undefined?n.right:r.right;r.bottom=n.bottom!=undefined?n.bottom:r.bottom;r.left=n.left!=undefined?n.left:r.left}},color:{get:function(){return y},set:function(t){y=n.utils.getColor(t)}}}),n.utils.initOptions(u),u};n.models.parallelCoordinates=function(){"use strict";function f(p){return p.each(function(f){function tt(n){return at(r.map(function(t){var e;if(isNaN(n[t])||isNaN(parseFloat(n[t]))){var r=i[t].domain(),o=i[t].range(),f=r[0]-(r[1]-r[0])/9;return st.indexOf(t)<0&&(e=d3.scale.linear().domain([f,r[1]]).range([nt-12,o[1]]),i[t].brush.y(e),st.push(t)),[u(t),i[t](f)]}return st.length>0?(d.style("display","inline"),k.style("display","inline")):(d.style("display","none"),k.style("display","none")),[u(t),i[t](n[t])]}))}function wt(){var t=r.filter(function(n){return!i[n].brush.empty()}),n=t.map(function(n){return i[n].brush.extent()});v=[];t.forEach(function(t,i){v[i]={dimension:t,extent:n[i]}});o=[];p.style("display",function(r){var u=t.every(function(t,u){return isNaN(r[t])&&n[u][0]==i[t].brush.y().domain()[0]?!0:n[u][0]<=r[t]&&r[t]<=n[u][1]});return u&&o.push(r),u?null:"none"});e.brush({filters:v,active:o})}function bt(n){s[n]=this.parentNode.__origin__=u(n);g.attr("visibility","hidden")}function kt(n){s[n]=Math.min(rt,Math.max(0,this.parentNode.__origin__+=d3.event.x));p.attr("d",tt);r.sort(function(n,t){return ht(n)-ht(t)});u.domain(r);w.attr("transform",function(n){return"translate("+ht(n)+")"})}function dt(n){delete this.parentNode.__origin__;delete s[n];d3.select(this.parentNode).attr("transform","translate("+u(n)+")");p.attr("d",tt);g.attr("d",tt).attr("visibility",null)}function ht(n){var t=s[n];return t==null?u(n):t}var it=d3.select(this),rt=n.utils.availableWidth(h,it,t),nt=n.utils.availableHeight(c,it,t),ft,g,p,w,ut;n.utils.initSVG(it);o=f;u.rangePoints([0,rt],1).domain(r);ft={};r.forEach(function(n){var t=d3.extent(f,function(t){return+t[n]});return ft[n]=!1,t[0]===undefined&&(ft[n]=!0,t[0]=0,t[1]=0),t[0]===t[1]&&(t[0]=t[0]-1,t[1]=t[1]+1),i[n]=d3.scale.linear().domain(t).range([(nt-12)*.9,0]),i[n].brush=d3.svg.brush().y(i[n]).on("brush",wt),n!="name"});var b=it.selectAll("g.nv-wrap.nv-parallelCoordinates").data([f]),ct=b.enter().append("g").attr("class","nvd3 nv-wrap nv-parallelCoordinates"),et=ct.append("g"),lt=b.select("g");et.append("g").attr("class","nv-parallelCoordinates background");et.append("g").attr("class","nv-parallelCoordinates foreground");et.append("g").attr("class","nv-parallelCoordinates missingValuesline");b.attr("transform","translate("+t.left+","+t.top+")");var at=d3.svg.line().interpolate("cardinal").tension(y),vt=d3.svg.axis().orient("left"),yt=d3.behavior.drag().on("dragstart",bt).on("drag",kt).on("dragend",dt),d,k,ot=u.range()[1]-u.range()[0],st=[],pt=[0+ot/2,nt-12,rt-ot/2,nt-12];d=b.select(".missingValuesline").selectAll("line").data([pt]);d.enter().append("line");d.exit().remove();d.attr("x1",function(n){return n[0]}).attr("y1",function(n){return n[1]}).attr("x2",function(n){return n[2]}).attr("y2",function(n){return n[3]});k=b.select(".missingValuesline").selectAll("text").data(["undefined values"]);k.append("text").data(["undefined values"]);k.enter().append("text");k.exit().remove();k.attr("y",nt).attr("x",rt-92-ot/2).text(function(n){return n});g=b.select(".background").selectAll("path").data(f);g.enter().append("path");g.exit().remove();g.attr("d",tt);p=b.select(".foreground").selectAll("path").data(f);p.enter().append("path");p.exit().remove();p.attr("d",tt).attr("stroke",a);p.on("mouseover",function(n,t){d3.select(this).classed("hover",!0);e.elementMouseover({label:n.name,data:n.data,index:t,pos:[d3.mouse(this.parentNode)[0],d3.mouse(this.parentNode)[1]]})});p.on("mouseout",function(n,t){d3.select(this).classed("hover",!1);e.elementMouseout({label:n.name,data:n.data,index:t})});w=lt.selectAll(".dimension").data(r);ut=w.enter().append("g").attr("class","nv-parallelCoordinates dimension");ut.append("g").attr("class","nv-parallelCoordinates nv-axis");ut.append("g").attr("class","nv-parallelCoordinates-brush");ut.append("text").attr("class","nv-parallelCoordinates nv-label");w.attr("transform",function(n){return"translate("+u(n)+",0)"});w.exit().remove();w.select(".nv-label").style("cursor","move").attr("dy","-1em").attr("text-anchor","middle").text(String).on("mouseover",function(n){e.elementMouseover({dim:n,pos:[d3.mouse(this.parentNode.parentNode)[0],d3.mouse(this.parentNode.parentNode)[1]]})}).on("mouseout",function(n){e.elementMouseout({dim:n})}).call(yt);w.select(".nv-axis").each(function(n,t){d3.select(this).call(vt.scale(i[n]).tickFormat(d3.format(l[t])))});w.select(".nv-parallelCoordinates-brush").each(function(n){d3.select(this).call(i[n].brush)}).selectAll("rect").attr("x",-8).attr("width",16)}),f}var t={top:30,right:0,bottom:10,left:0},h=null,c=null,u=d3.scale.ordinal(),i={},r=[],l=[],a=n.utils.defaultColor(),v=[],o=[],s=[],y=1,e=d3.dispatch("brush","elementMouseover","elementMouseout");return f.dispatch=e,f.options=n.utils.optionsFunc.bind(f),f._options=Object.create({},{width:{get:function(){return h},set:function(n){h=n}},height:{get:function(){return c},set:function(n){c=n}},dimensionNames:{get:function(){return r},set:function(n){r=n}},dimensionFormats:{get:function(){return l},set:function(n){l=n}},lineTension:{get:function(){return y},set:function(n){y=n}},dimensions:{get:function(){return r},set:function(t){n.deprecated("dimensions","use dimensionNames instead");r=t}},margin:{get:function(){return t},set:function(n){t.top=n.top!==undefined?n.top:t.top;t.right=n.right!==undefined?n.right:t.right;t.bottom=n.bottom!==undefined?n.bottom:t.bottom;t.left=n.left!==undefined?n.left:t.left}},color:{get:function(){return a},set:function(t){a=n.utils.getColor(t)}}}),n.utils.initOptions(f),f};n.models.pie=function(){"use strict";function s(ht){return st.reset(),ht.each(function(s){function vi(n,t){n.endAngle=isNaN(n.endAngle)?0:n.endAngle;n.startAngle=isNaN(n.startAngle)?0:n.startAngle;u||(n.innerRadius=0);var i=d3.interpolate(this._current,n);return this._current=i(0),function(n){return o[t](i(n))}}var gt=it-t.left-t.right,ni=rt-t.top-t.bottom,lt=Math.min(gt,ni)/2,at=[],ti=[],ri,ui,yt,wt,kt,bt,dt,vt,ai,ct,ht;if(d=d3.select(this),l.length===0)for(ri=lt-lt/5,ui=w*lt,ht=0;ht<s[0].length;ht++)at.push(ri),ti.push(ui);else at=l.map(function(n){return(n.outer-n.outer/5)*lt}),ti=l.map(function(n){return(n.inner-n.inner/5)*lt}),w=d3.min(l.map(function(n){return n.inner-n.inner/5}));n.utils.initSVG(d);var pt=d.selectAll(".nv-wrap.nv-pie").data(s),ci=pt.enter().append("g").attr("class","nvd3 nv-wrap nv-pie nv-chart-"+k),fi=ci.append("g"),ei=pt.select("g"),li=fi.append("g").attr("class","nv-pie");fi.append("g").attr("class","nv-pieLabels");pt.attr("transform","translate("+t.left+","+t.top+")");ei.select(".nv-pie").attr("transform","translate("+gt/2+","+ni/2+")");ei.select(".nv-pieLabels").attr("transform","translate("+gt/2+","+ni/2+")");d.on("click",function(n,t){i.chartClick({data:n,index:t,pos:d3.event,id:k})});for(o=[],ot=[],ht=0;ht<s[0].length;ht++)yt=d3.svg.arc().outerRadius(at[ht]),wt=d3.svg.arc().outerRadius(at[ht]+5),f!==!1&&(yt.startAngle(f),wt.startAngle(f)),e!==!1&&(yt.endAngle(e),wt.endAngle(e)),u&&(yt.innerRadius(ti[ht]),wt.innerRadius(ti[ht])),yt.cornerRadius&&p&&(yt.cornerRadius(p),wt.cornerRadius(p)),o.push(yt),ot.push(wt);kt=d3.layout.pie().sort(null).value(function(n){return n.disabled?0:a(n)});kt.padAngle&&tt&&kt.padAngle(tt);u&&y&&(li.append("text").attr("class","nv-pie-title"),pt.select(".nv-pie-title").style("text-anchor","middle").text(function(){return y}).style("font-size",Math.min(gt,ni)*w*2/(y.length+2)+"px").attr("dy","0.35em").attr("transform",function(){return"translate(0, "+et+")"}));bt=pt.select(".nv-pie").selectAll(".nv-slice").data(kt);dt=pt.select(".nv-pieLabels").selectAll(".nv-label").data(kt);bt.exit().remove();dt.exit().remove();vt=bt.enter().append("g");vt.attr("class","nv-slice");vt.on("mouseover",function(n,t){d3.select(this).classed("hover",!0);nt&&d3.select(this).select("path").transition().duration(70).attr("d",ot[t]);i.elementMouseover({data:n.data,index:t,color:d3.select(this).style("fill")})});vt.on("mouseout",function(n,t){d3.select(this).classed("hover",!1);nt&&d3.select(this).select("path").transition().duration(50).attr("d",o[t]);i.elementMouseout({data:n.data,index:t})});vt.on("mousemove",function(n,t){i.elementMousemove({data:n.data,index:t})});vt.on("click",function(n,t){i.elementClick({data:n.data,index:t,color:d3.select(this).style("fill")})});vt.on("dblclick",function(n,t){i.elementDblClick({data:n.data,index:t,color:d3.select(this).style("fill")})});if(bt.attr("fill",function(n,t){return g(n.data,t)}),bt.attr("stroke",function(n,t){return g(n.data,t)}),ai=vt.append("path").each(function(n){this._current=n}),bt.select("path").transition().attr("d",function(n,t){return o[t](n)}).attrTween("d",vi),ut){for(ct=[],ht=0;ht<s[0].length;ht++)ct.push(o[ht]),r?u&&(ct[ht]=d3.svg.arc().outerRadius(o[ht].outerRadius()),f!==!1&&ct[ht].startAngle(f),e!==!1&&ct[ht].endAngle(e)):u||ct[ht].innerRadius(0);dt.enter().append("g").classed("nv-label",!0).each(function(n){var t=d3.select(this);t.attr("transform",function(n,t){if(c){n.outerRadius=at[t]+10;n.innerRadius=at[t]+15;var i=(n.startAngle+n.endAngle)/2*(180/Math.PI);return(n.startAngle+n.endAngle)/2<Math.PI?i-=90:i+=90,"translate("+ct[t].centroid(n)+") rotate("+i+")"}return n.outerRadius=lt+10,n.innerRadius=lt+15,"translate("+ct[t].centroid(n)+")"});t.append("rect").style("stroke","#fff").style("fill","#fff").attr("rx",3).attr("ry",3);t.append("text").style("text-anchor",c?(n.startAngle+n.endAngle)/2<Math.PI?"start":"end":"middle").style("fill","#000")});var oi={},ii=14,si=140,hi=function(n){return Math.floor(n[0]/si)*si+","+Math.floor(n[1]/ii)*ii};dt.watchTransition(st,"pie labels").attr("transform",function(n,t){var r,i,u;return c?(n.outerRadius=at[t]+10,n.innerRadius=at[t]+15,r=(n.startAngle+n.endAngle)/2*(180/Math.PI),(n.startAngle+n.endAngle)/2<Math.PI?r-=90:r+=90,"translate("+ct[t].centroid(n)+") rotate("+r+")"):(n.outerRadius=lt+10,n.innerRadius=lt+15,i=ct[t].centroid(n),n.value&&(u=hi(i),oi[u]&&(i[1]-=ii),oi[hi(i)]=!0),"translate("+i+")")});dt.select(".nv-label text").style("text-anchor",function(n){return c?(n.startAngle+n.endAngle)/2<Math.PI?"start":"end":"middle"}).text(function(n,t){var r=(n.endAngle-n.startAngle)/(2*Math.PI),i="";if(!n.value||r<ft)return"";if(typeof v=="function")i=v(n,t,{key:b(n.data),value:a(n.data),percent:h(r)});else switch(v){case"key":i=b(n.data);break;case"value":i=h(a(n.data));break;case"percent":i=d3.format("%")(r)}return i})}}),st.renderEnd("pie immediate"),s}var t={top:0,right:0,bottom:0,left:0},it=500,rt=500,b=function(n){return n.x},a=function(n){return n.y},k=Math.floor(Math.random()*1e4),d=null,g=n.utils.defaultColor(),h=d3.format(",.2f"),ut=!0,r=!1,v="key",ft=.02,u=!1,y=!1,nt=!0,et=0,c=!1,f=!1,tt=!1,e=!1,p=0,w=.5,l=[],i=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),o=[],ot=[],st=n.utils.renderWatch(i);return s.dispatch=i,s.options=n.utils.optionsFunc.bind(s),s._options=Object.create({},{arcsRadius:{get:function(){return l},set:function(n){l=n}},width:{get:function(){return it},set:function(n){it=n}},height:{get:function(){return rt},set:function(n){rt=n}},showLabels:{get:function(){return ut},set:function(n){ut=n}},title:{get:function(){return y},set:function(n){y=n}},titleOffset:{get:function(){return et},set:function(n){et=n}},labelThreshold:{get:function(){return ft},set:function(n){ft=n}},valueFormat:{get:function(){return h},set:function(n){h=n}},x:{get:function(){return b},set:function(n){b=n}},id:{get:function(){return k},set:function(n){k=n}},endAngle:{get:function(){return e},set:function(n){e=n}},startAngle:{get:function(){return f},set:function(n){f=n}},padAngle:{get:function(){return tt},set:function(n){tt=n}},cornerRadius:{get:function(){return p},set:function(n){p=n}},donutRatio:{get:function(){return w},set:function(n){w=n}},labelsOutside:{get:function(){return r},set:function(n){r=n}},labelSunbeamLayout:{get:function(){return c},set:function(n){c=n}},donut:{get:function(){return u},set:function(n){u=n}},growOnHover:{get:function(){return nt},set:function(n){nt=n}},pieLabelsOutside:{get:function(){return r},set:function(t){r=t;n.deprecated("pieLabelsOutside","use labelsOutside instead")}},donutLabelsOutside:{get:function(){return r},set:function(t){r=t;n.deprecated("donutLabelsOutside","use labelsOutside instead")}},labelFormat:{get:function(){return h},set:function(t){h=t;n.deprecated("labelFormat","use valueFormat instead")}},margin:{get:function(){return t},set:function(n){t.top=typeof n.top!="undefined"?n.top:t.top;t.right=typeof n.right!="undefined"?n.right:t.right;t.bottom=typeof n.bottom!="undefined"?n.bottom:t.bottom;t.left=typeof n.left!="undefined"?n.left:t.left}},y:{get:function(){return a},set:function(n){a=d3.functor(n)}},color:{get:function(){return g},set:function(t){g=n.utils.getColor(t)}},labelType:{get:function(){return v},set:function(n){v=n||"key"}}}),n.utils.initOptions(s),s};n.models.pieChart=function(){"use strict";function t(o){return l.reset(),l.models(r),o.each(function(o){var h=d3.select(this),p,d,tt;n.utils.initSVG(h);var rt=this,l=n.utils.availableWidth(w,h,i),g=n.utils.availableHeight(y,h,i);if(t.update=function(){h.transition().call(t)},t.container=this,f.setter(k(o),t.update).getter(b(o)).update(),f.disabled=o.map(function(n){return!!n.disabled}),!e){e={};for(p in f)e[p]=f[p]instanceof Array?f[p].slice(0):f[p]}if(o&&o.length)h.selectAll(".nv-noData").remove();else return n.utils.noData(t,h),t;var v=h.selectAll("g.nv-wrap.nv-pieChart").data([o]),nt=v.enter().append("g").attr("class","nvd3 nv-wrap nv-pieChart").append("g"),it=v.select("g");nt.append("g").attr("class","nv-pieWrap");nt.append("g").attr("class","nv-legendWrap");a&&(s==="top"?(u.width(l).key(r.x()),v.select(".nv-legendWrap").datum(o).call(u),i.top!=u.height()&&(i.top=u.height(),g=n.utils.availableHeight(y,h,i)),v.select(".nv-legendWrap").attr("transform","translate(0,"+-i.top+")")):s==="right"&&(d=n.models.legend().width(),l/2<d&&(d=l/2),u.height(g).key(r.x()),u.width(d),l-=u.width(),v.select(".nv-legendWrap").datum(o).call(u).attr("transform","translate("+l+",0)")));v.attr("transform","translate("+i.left+","+i.top+")");r.width(l).height(g);tt=it.select(".nv-pieWrap").datum([o]);d3.transition(tt).call(r);u.dispatch.on("stateChange",function(n){for(var i in n)f[i]=n[i];c.stateChange(f);t.update()});c.on("changeState",function(n){typeof n.disabled!="undefined"&&(o.forEach(function(t,i){t.disabled=n.disabled[i]}),f.disabled=n.disabled);t.update()})}),l.renderEnd("pieChart immediate"),t}var r=n.models.pie(),u=n.models.legend(),o=n.models.tooltip(),i={top:30,right:20,bottom:20,left:20},w=null,y=null,a=!0,s="top",h=n.utils.defaultColor(),f=n.utils.state(),e=null,p=null,v=250,c=d3.dispatch("stateChange","changeState","renderEnd");o.duration(0).headerEnabled(!1).valueFormatter(function(n,t){return r.valueFormat()(n,t)});var l=n.utils.renderWatch(c),b=function(n){return function(){return{active:n.map(function(n){return!n.disabled})}}},k=function(n){return function(t){t.active!==undefined&&n.forEach(function(n,i){n.disabled=!t.active[i]})}};r.dispatch.on("elementMouseover.tooltip",function(n){n.series={key:t.x()(n.data),value:t.y()(n.data),color:n.color};o.data(n).hidden(!1)});r.dispatch.on("elementMouseout.tooltip",function(){o.hidden(!0)});r.dispatch.on("elementMousemove.tooltip",function(){o()});return t.legend=u,t.dispatch=c,t.pie=r,t.tooltip=o,t.options=n.utils.optionsFunc.bind(t),t._options=Object.create({},{noData:{get:function(){return p},set:function(n){p=n}},showLegend:{get:function(){return a},set:function(n){a=n}},legendPosition:{get:function(){return s},set:function(n){s=n}},defaultState:{get:function(){return e},set:function(n){e=n}},color:{get:function(){return h},set:function(n){h=n;u.color(h);r.color(h)}},duration:{get:function(){return v},set:function(n){v=n;l.reset(v)}},margin:{get:function(){return i},set:function(n){i.top=n.top!==undefined?n.top:i.top;i.right=n.right!==undefined?n.right:i.right;i.bottom=n.bottom!==undefined?n.bottom:i.bottom;i.left=n.left!==undefined?n.left:i.left}}}),n.utils.inheritOptions(t,r),n.utils.initOptions(t),t};n.models.scatter=function(){"use strict";function o(et){return y.reset(),et.each(function(o){function ci(){var n,b,k,y,g,tt,it,l;if(a=!1,!v)return!1;if(ft===!0){if(n=d3.merge(o.map(function(n,r){return n.values.map(function(n,e){var o=u(n,e),s=f(n,e);return[t(o)+Math.random()*.0001,i(s)+Math.random()*.0001,r,e,n]}).filter(function(n,t){return d(n[4],t)})})),n.length==0)return!1;n.length<3&&(n.push([t.range()[0]-20,i.range()[0]-20,null,null]),n.push([t.range()[1]+20,i.range()[1]+20,null,null]),n.push([t.range()[0]-20,i.range()[0]+20,null,null]),n.push([t.range()[1]+20,i.range()[1]-20,null,null]));b=d3.geom.polygon([[-10,-10],[-10,w+10],[p+10,w+10],[p+10,-10]]);k=d3.geom.voronoi(n).map(function(t,i){return{data:b.clip(t),series:n[i][2],point:n[i][3]}});et.select(".nv-point-paths").selectAll("path").remove();y=et.select(".nv-point-paths").selectAll("path").data(k);g=y.enter().append("svg:path").attr("d",function(n){return n&&n.data&&n.data.length!==0?"M"+n.data.join(",")+"Z":"M 0 0"}).attr("id",function(n,t){return"nv-path-"+t}).attr("clip-path",function(n,t){return"url(#nv-clip-"+s+"-"+t+")"});yt&&g.style("fill",d3.rgb(230,230,230)).style("fill-opacity",.4).style("stroke-opacity",1).style("stroke",d3.rgb(200,200,200));nt&&(et.select(".nv-point-clips").selectAll("*").remove(),tt=et.select(".nv-point-clips").selectAll("clipPath").data(n),it=tt.enter().append("svg:clipPath").attr("id",function(n,t){return"nv-clip-"+s+"-"+t}).append("svg:circle").attr("cx",function(n){return n[0]}).attr("cy",function(n){return n[1]}).attr("r",pt));l=function(n,e){var l,s;if(a)return 0;if(l=o[n.series],l!==undefined){s=l.values[n.point];s.color=c(l,n.series);s.x=u(s);s.y=f(s);var v=h.node().getBoundingClientRect(),y=window.pageYOffset||document.documentElement.scrollTop,p=window.pageXOffset||document.documentElement.scrollLeft,w={left:t(u(s,n.point))+v.left+p+r.left+10,top:i(f(s,n.point))+v.top+y+r.top+10};e({point:s,series:l,pos:w,relativePos:[t(u(s,n.point))+r.left,i(f(s,n.point))+r.top],seriesIndex:n.series,pointIndex:n.point})}};y.on("click",function(n){l(n,e.elementClick)}).on("dblclick",function(n){l(n,e.elementDblClick)}).on("mouseover",function(n){l(n,e.elementMouseover)}).on("mouseout",function(n){l(n,e.elementMouseout)})}else et.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").on("click",function(n,s){if(a||!o[n.series])return 0;var c=o[n.series],h=c.values[s];e.elementClick({point:h,series:c,pos:[t(u(h,s))+r.left,i(f(h,s))+r.top],relativePos:[t(u(h,s))+r.left,i(f(h,s))+r.top],seriesIndex:n.series,pointIndex:s})}).on("dblclick",function(n,s){if(a||!o[n.series])return 0;var c=o[n.series],h=c.values[s];e.elementDblClick({point:h,series:c,pos:[t(u(h,s))+r.left,i(f(h,s))+r.top],relativePos:[t(u(h,s))+r.left,i(f(h,s))+r.top],seriesIndex:n.series,pointIndex:s})}).on("mouseover",function(n,s){if(a||!o[n.series])return 0;var l=o[n.series],h=l.values[s];e.elementMouseover({point:h,series:l,pos:[t(u(h,s))+r.left,i(f(h,s))+r.top],relativePos:[t(u(h,s))+r.left,i(f(h,s))+r.top],seriesIndex:n.series,pointIndex:s,color:c(n,s)})}).on("mouseout",function(n,s){if(a||!o[n.series])return 0;var l=o[n.series],h=l.values[s];e.elementMouseout({point:h,series:l,pos:[t(u(h,s))+r.left,i(f(h,s))+r.top],relativePos:[t(u(h,s))+r.left,i(f(h,s))+r.top],seriesIndex:n.series,pointIndex:s,color:c(n,s)})})}var ti,ui,fi,ii,ri;h=d3.select(this);ti=n.utils.availableWidth(p,h,r);ui=n.utils.availableHeight(w,h,r);n.utils.initSVG(h);o.forEach(function(n,t){n.values.forEach(function(n){n.series=t})});fi=tt&&it&&ut?[]:d3.merge(o.map(function(n){return n.values.map(function(n,t){return{x:u(n,t),y:f(n,t),size:b(n,t)}})}));t.domain(tt||d3.extent(fi.map(function(n){return n.x}).concat(ht)));at&&o[0]?t.range(rt||[(ti*g+ti)/(2*o[0].values.length),ti-ti*(1+g)/(2*o[0].values.length)]):t.range(rt||[0,ti]);i.domain(it||d3.extent(fi.map(function(n){return n.y}).concat(ct))).range(wt||[ui,0]);l.domain(ut||d3.extent(fi.map(function(n){return n.size}).concat(lt))).range(bt||ni);dt=t.domain()[0]===t.domain()[1]||i.domain()[0]===i.domain()[1];t.domain()[0]===t.domain()[1]&&(t.domain()[0]?t.domain([t.domain()[0]-t.domain()[0]*.01,t.domain()[1]+t.domain()[1]*.01]):t.domain([-1,1]));i.domain()[0]===i.domain()[1]&&(i.domain()[0]?i.domain([i.domain()[0]-i.domain()[0]*.01,i.domain()[1]+i.domain()[1]*.01]):i.domain([-1,1]));isNaN(t.domain()[0])&&t.domain([-1,1]);isNaN(i.domain()[0])&&i.domain([-1,1]);ot=ot||t;st=st||i;kt=kt||l;var et=h.selectAll("g.nv-wrap.nv-scatter").data([o]),ei=et.enter().append("g").attr("class","nvd3 nv-wrap nv-scatter nv-chart-"+s),si=ei.append("defs"),oi=ei.append("g"),hi=et.select("g");et.classed("nv-single-point",dt);oi.append("g").attr("class","nv-groups");oi.append("g").attr("class","nv-point-paths");ei.append("g").attr("class","nv-point-clips");et.attr("transform","translate("+r.left+","+r.top+")");si.append("clipPath").attr("id","nv-edge-clip-"+s).append("rect");et.select("#nv-edge-clip-"+s+" rect").attr("width",ti).attr("height",ui>0?ui:0);hi.attr("clip-path",vt?"url(#nv-edge-clip-"+s+")":"");a=!0;ii=et.select(".nv-groups").selectAll(".nv-group").data(function(n){return n},function(n){return n.key});ii.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6);ii.exit().remove();ii.attr("class",function(n,t){return"nv-group nv-series-"+t}).classed("hover",function(n){return n.hover});ii.watchTransition(y,"scatter: groups").style("fill",function(n,t){return c(n,t)}).style("stroke",function(n,t){return c(n,t)}).style("stroke-opacity",1).style("fill-opacity",.5);ri=ii.selectAll("path.nv-point").data(function(n){return n.values.map(function(n,t){return[n,t]}).filter(function(n,t){return d(n[0],t)})});ri.enter().append("path").style("fill",function(n){return n.color}).style("stroke",function(n){return n.color}).attr("transform",function(n){return"translate("+ot(u(n[0],n[1]))+","+st(f(n[0],n[1]))+")"}).attr("d",n.utils.symbol().type(function(n){return k(n[0])}).size(function(n){return l(b(n[0],n[1]))}));ri.exit().remove();ii.exit().selectAll("path.nv-point").watchTransition(y,"scatter exit").attr("transform",function(n){return"translate("+t(u(n[0],n[1]))+","+i(f(n[0],n[1]))+")"}).remove();ri.each(function(n){d3.select(this).classed("nv-point",!0).classed("nv-point-"+n[1],!0).classed("nv-noninteractive",!v).classed("hover",!1)});ri.watchTransition(y,"scatter points").attr("transform",function(n){return"translate("+t(u(n[0],n[1]))+","+i(f(n[0],n[1]))+")"}).attr("d",n.utils.symbol().type(function(n){return k(n[0])}).size(function(n){return l(b(n[0],n[1]))}));clearTimeout(gt);gt=setTimeout(ci,300);ot=t.copy();st=i.copy();kt=l.copy()}),y.renderEnd("scatter immediate"),o}var r={top:0,right:0,bottom:0,left:0},p=null,w=null,c=n.utils.defaultColor(),s=Math.floor(Math.random()*1e5),h=null,t=d3.scale.linear(),i=d3.scale.linear(),l=d3.scale.linear(),u=function(n){return n.x},f=function(n){return n.y},b=function(n){return n.size||1},k=function(n){return n.shape||"circle"},ht=[],ct=[],lt=[],v=!0,d=function(n){return!n.notActive},at=!1,g=.1,vt=!1,nt=!0,yt=!1,pt=function(){return 25},tt=null,it=null,rt=null,wt=null,ut=null,bt=null,dt=!1,e=d3.dispatch("elementClick","elementDblClick","elementMouseover","elementMouseout","renderEnd"),ft=!0,et=250,ot,st,kt,gt,a=!1,y=n.utils.renderWatch(e,et),ni=[16,256];o.dispatch=e;o.options=n.utils.optionsFunc.bind(o);o._calls=new function(){this.clearHighlights=function(){return n.dom.write(function(){h.selectAll(".nv-point.hover").classed("hover",!1)}),null};this.highlightPoint=function(t,i,r){n.dom.write(function(){h.select(".nv-groups").selectAll(".nv-series-"+t).selectAll(".nv-point-"+i).classed("hover",r)})}};e.on("elementMouseover.point",function(n){v&&o._calls.highlightPoint(n.seriesIndex,n.pointIndex,!0)});e.on("elementMouseout.point",function(n){v&&o._calls.highlightPoint(n.seriesIndex,n.pointIndex,!1)});return o._options=Object.create({},{width:{get:function(){return p},set:function(n){p=n}},height:{get:function(){return w},set:function(n){w=n}},xScale:{get:function(){return t},set:function(n){t=n}},yScale:{get:function(){return i},set:function(n){i=n}},pointScale:{get:function(){return l},set:function(n){l=n}},xDomain:{get:function(){return tt},set:function(n){tt=n}},yDomain:{get:function(){return it},set:function(n){it=n}},pointDomain:{get:function(){return ut},set:function(n){ut=n}},xRange:{get:function(){return rt},set:function(n){rt=n}},yRange:{get:function(){return wt},set:function(n){wt=n}},pointRange:{get:function(){return bt},set:function(n){bt=n}},forceX:{get:function(){return ht},set:function(n){ht=n}},forceY:{get:function(){return ct},set:function(n){ct=n}},forcePoint:{get:function(){return lt},set:function(n){lt=n}},interactive:{get:function(){return v},set:function(n){v=n}},pointActive:{get:function(){return d},set:function(n){d=n}},padDataOuter:{get:function(){return g},set:function(n){g=n}},padData:{get:function(){return at},set:function(n){at=n}},clipEdge:{get:function(){return vt},set:function(n){vt=n}},clipVoronoi:{get:function(){return nt},set:function(n){nt=n}},clipRadius:{get:function(){return pt},set:function(n){pt=n}},showVoronoi:{get:function(){return yt},set:function(n){yt=n}},id:{get:function(){return s},set:function(n){s=n}},x:{get:function(){return u},set:function(n){u=d3.functor(n)}},y:{get:function(){return f},set:function(n){f=d3.functor(n)}},pointSize:{get:function(){return b},set:function(n){b=d3.functor(n)}},pointShape:{get:function(){return k},set:function(n){k=d3.functor(n)}},margin:{get:function(){return r},set:function(n){r.top=n.top!==undefined?n.top:r.top;r.right=n.right!==undefined?n.right:r.right;r.bottom=n.bottom!==undefined?n.bottom:r.bottom;r.left=n.left!==undefined?n.left:r.left}},duration:{get:function(){return et},set:function(n){et=n;y.reset(et)}},color:{get:function(){return c},set:function(t){c=n.utils.getColor(t)}},useVoronoi:{get:function(){return ft},set:function(n){ft=n;ft===!1&&(nt=!1)}}}),n.utils.initOptions(o),o};n.models.scatterChart=function(){"use strict";function t(et){return h.reset(),h.models(i),tt&&h.models(y),it&&h.models(l),g&&h.models(v),nt&&h.models(c),et.each(function(et){var ni=this,at,yt,pt,dt,bt,kt;if(u=d3.select(this),n.utils.initSVG(u),at=n.utils.availableWidth(ut,u,r),yt=n.utils.availableHeight(d,u,r),t.update=function(){b===0?u.call(t):u.transition().duration(b).call(t)},t.container=this,s.setter(ct(et),t.update).getter(ht(et)).update(),s.disabled=et.map(function(n){return!!n.disabled}),!p){p={};for(pt in s)p[pt]=s[pt]instanceof Array?s[pt].slice(0):s[pt]}if(et&&et.length&&et.filter(function(n){return n.values.length}).length)u.selectAll(".nv-noData").remove();else return n.utils.noData(t,u),h.renderEnd("scatter immediate"),t;e=i.xScale();o=i.yScale();var vt=u.selectAll("g.nv-wrap.nv-scatterChart").data([et]),gt=vt.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+i.id()),lt=gt.append("g"),wt=vt.select("g");lt.append("rect").attr("class","nvd3 nv-background").style("pointer-events","none");lt.append("g").attr("class","nv-x nv-axis");lt.append("g").attr("class","nv-y nv-axis");lt.append("g").attr("class","nv-scatterWrap");lt.append("g").attr("class","nv-regressionLinesWrap");lt.append("g").attr("class","nv-distWrap");lt.append("g").attr("class","nv-legendWrap");w&&wt.select(".nv-y.nv-axis").attr("transform","translate("+at+",0)");ft&&(dt=at,a.width(dt),vt.select(".nv-legendWrap").datum(et).call(a),r.top!=a.height()&&(r.top=a.height(),yt=n.utils.availableHeight(d,u,r)),vt.select(".nv-legendWrap").attr("transform","translate(0,"+-r.top+")"));vt.attr("transform","translate("+r.left+","+r.top+")");i.width(at).height(yt).color(et.map(function(n,t){return n.color=n.color||f(n,t),n.color}).filter(function(n,t){return!et[t].disabled}));vt.select(".nv-scatterWrap").datum(et.filter(function(n){return!n.disabled})).call(i);vt.select(".nv-regressionLinesWrap").attr("clip-path","url(#nv-edge-clip-"+i.id()+")");bt=vt.select(".nv-regressionLinesWrap").selectAll(".nv-regLines").data(function(n){return n});bt.enter().append("g").attr("class","nv-regLines");kt=bt.selectAll(".nv-regLine").data(function(n){return[n]});kt.enter().append("line").attr("class","nv-regLine").style("stroke-opacity",0);kt.filter(function(n){return n.intercept&&n.slope}).watchTransition(h,"scatterPlusLineChart: regline").attr("x1",e.range()[0]).attr("x2",e.range()[1]).attr("y1",function(n){return o(e.domain()[0]*n.slope+n.intercept)}).attr("y2",function(n){return o(e.domain()[1]*n.slope+n.intercept)}).style("stroke",function(n,t,i){return f(n,i)}).style("stroke-opacity",function(n){return n.disabled||typeof n.slope=="undefined"||typeof n.intercept=="undefined"?0:1});tt&&(y.scale(e)._ticks(n.utils.calcTicksX(at/100,et)).tickSize(-yt,0),wt.select(".nv-x.nv-axis").attr("transform","translate(0,"+o.range()[0]+")").call(y));it&&(l.scale(o)._ticks(n.utils.calcTicksY(yt/36,et)).tickSize(-at,0),wt.select(".nv-y.nv-axis").call(l));g&&(v.getData(i.x()).scale(e).width(at).color(et.map(function(n,t){return n.color||f(n,t)}).filter(function(n,t){return!et[t].disabled})),lt.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),wt.select(".nv-distributionX").attr("transform","translate(0,"+o.range()[0]+")").datum(et.filter(function(n){return!n.disabled})).call(v));nt&&(c.getData(i.y()).scale(o).width(yt).color(et.map(function(n,t){return n.color||f(n,t)}).filter(function(n,t){return!et[t].disabled})),lt.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),wt.select(".nv-distributionY").attr("transform","translate("+(w?at:-c.size())+",0)").datum(et.filter(function(n){return!n.disabled})).call(c));a.dispatch.on("stateChange",function(n){for(var i in n)s[i]=n[i];rt.stateChange(s);t.update()});rt.on("changeState",function(n){typeof n.disabled!="undefined"&&(et.forEach(function(t,i){t.disabled=n.disabled[i]}),s.disabled=n.disabled);t.update()});i.dispatch.on("elementMouseout.tooltip",function(n){k.hidden(!0);u.select(".nv-chart-"+i.id()+" .nv-series-"+n.seriesIndex+" .nv-distx-"+n.pointIndex).attr("y1",0);u.select(".nv-chart-"+i.id()+" .nv-series-"+n.seriesIndex+" .nv-disty-"+n.pointIndex).attr("x2",c.size())});i.dispatch.on("elementMouseover.tooltip",function(n){u.select(".nv-series-"+n.seriesIndex+" .nv-distx-"+n.pointIndex).attr("y1",n.relativePos[1]-yt);u.select(".nv-series-"+n.seriesIndex+" .nv-disty-"+n.pointIndex).attr("x2",n.relativePos[0]+v.size());k.data(n).hidden(!1)});ot=e.copy();st=o.copy()}),h.renderEnd("scatter with line immediate"),t}var i=n.models.scatter(),y=n.models.axis(),l=n.models.axis(),a=n.models.legend(),v=n.models.distribution(),c=n.models.distribution(),k=n.models.tooltip(),r={top:30,right:20,bottom:50,left:75},ut=null,d=null,u=null,f=n.utils.defaultColor(),e=i.xScale(),o=i.yScale(),g=!1,nt=!1,ft=!0,tt=!0,it=!0,w=!1,s=n.utils.state(),p=null,rt=d3.dispatch("stateChange","changeState","renderEnd"),et=null,b=250;i.xScale(e).yScale(o);y.orient("bottom").tickPadding(10);l.orient(w?"right":"left").tickPadding(10);v.axis("x");c.axis("y");k.headerFormatter(function(n,t){return y.tickFormat()(n,t)}).valueFormatter(function(n,t){return l.tickFormat()(n,t)});var ot,st,h=n.utils.renderWatch(rt,b),ht=function(n){return function(){return{active:n.map(function(n){return!n.disabled})}}},ct=function(n){return function(t){t.active!==undefined&&n.forEach(function(n,i){n.disabled=!t.active[i]})}};return t.dispatch=rt,t.scatter=i,t.legend=a,t.xAxis=y,t.yAxis=l,t.distX=v,t.distY=c,t.tooltip=k,t.options=n.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return ut},set:function(n){ut=n}},height:{get:function(){return d},set:function(n){d=n}},container:{get:function(){return u},set:function(n){u=n}},showDistX:{get:function(){return g},set:function(n){g=n}},showDistY:{get:function(){return nt},set:function(n){nt=n}},showLegend:{get:function(){return ft},set:function(n){ft=n}},showXAxis:{get:function(){return tt},set:function(n){tt=n}},showYAxis:{get:function(){return it},set:function(n){it=n}},defaultState:{get:function(){return p},set:function(n){p=n}},noData:{get:function(){return et},set:function(n){et=n}},duration:{get:function(){return b},set:function(n){b=n}},margin:{get:function(){return r},set:function(n){r.top=n.top!==undefined?n.top:r.top;r.right=n.right!==undefined?n.right:r.right;r.bottom=n.bottom!==undefined?n.bottom:r.bottom;r.left=n.left!==undefined?n.left:r.left}},rightAlignYAxis:{get:function(){return w},set:function(n){w=n;l.orient(n?"right":"left")}},color:{get:function(){return f},set:function(t){f=n.utils.getColor(t);a.color(f);v.color(f);c.color(f)}}}),n.utils.inheritOptions(t,i),n.utils.initOptions(t),t};n.models.sparkline=function(){"use strict";function e(p){return p.each(function(e){var k=o-t.left-t.right,d=s-t.top-t.bottom,w,b;h=d3.select(this);n.utils.initSVG(h);u.domain(l||d3.extent(e,f)).range(v||[0,k]);i.domain(a||d3.extent(e,r)).range(y||[d,0]);var p=h.selectAll("g.nv-wrap.nv-sparkline").data([e]),g=p.enter().append("g").attr("class","nvd3 nv-wrap nv-sparkline"),nt=g.append("g"),tt=p.select("g");p.attr("transform","translate("+t.left+","+t.top+")");w=p.selectAll("path").data(function(n){return[n]});w.enter().append("path");w.exit().remove();w.style("stroke",function(n,t){return n.color||c(n,t)}).attr("d",d3.svg.line().x(function(n,t){return u(f(n,t))}).y(function(n,t){return i(r(n,t))}));b=p.selectAll("circle.nv-point").data(function(n){function u(t){if(t!=-1){var i=n[t];return i.pointIndex=t,i}return null}var t=n.map(function(n,t){return r(n,t)}),f=u(t.lastIndexOf(i.domain()[1])),e=u(t.indexOf(i.domain()[0])),o=u(t.length-1);return[e,f,o].filter(function(n){return n!=null})});b.enter().append("circle");b.exit().remove();b.attr("cx",function(n){return u(f(n,n.pointIndex))}).attr("cy",function(n){return i(r(n,n.pointIndex))}).attr("r",2).attr("class",function(n){return f(n,n.pointIndex)==u.domain()[1]?"nv-point nv-currentValue":r(n,n.pointIndex)==i.domain()[0]?"nv-point nv-minValue":"nv-point nv-maxValue"})}),e}var t={top:2,right:0,bottom:2,left:0},o=400,s=32,h=null,p=!0,u=d3.scale.linear(),i=d3.scale.linear(),f=function(n){return n.x},r=function(n){return n.y},c=n.utils.getColor(["#000"]),l,a,v,y;return e.options=n.utils.optionsFunc.bind(e),e._options=Object.create({},{width:{get:function(){return o},set:function(n){o=n}},height:{get:function(){return s},set:function(n){s=n}},xDomain:{get:function(){return l},set:function(n){l=n}},yDomain:{get:function(){return a},set:function(n){a=n}},xRange:{get:function(){return v},set:function(n){v=n}},yRange:{get:function(){return y},set:function(n){y=n}},xScale:{get:function(){return u},set:function(n){u=n}},yScale:{get:function(){return i},set:function(n){i=n}},animate:{get:function(){return p},set:function(n){p=n}},x:{get:function(){return f},set:function(n){f=d3.functor(n)}},y:{get:function(){return r},set:function(n){r=d3.functor(n)}},margin:{get:function(){return t},set:function(n){t.top=n.top!==undefined?n.top:t.top;t.right=n.right!==undefined?n.right:t.right;t.bottom=n.bottom!==undefined?n.bottom:t.bottom;t.left=n.left!==undefined?n.left:t.left}},color:{get:function(){return c},set:function(t){c=n.utils.getColor(t)}}}),n.utils.initOptions(e),e};n.models.sparklinePlus=function(){"use strict";function r(p){return p.each(function(p){function ft(){if(!e){var n=b.selectAll(".nv-hoverValue").data(u),r=n.enter().append("g").attr("class","nv-hoverValue").style("stroke-opacity",0).style("fill-opacity",0);(n.exit().transition().duration(250).style("stroke-opacity",0).style("fill-opacity",0).remove(),n.attr("transform",function(n){return"translate("+c(i.x()(p[n],n))+",0)"}).transition().duration(250).style("stroke-opacity",1).style("fill-opacity",1),u.length)&&(r.append("line").attr("x1",0).attr("y1",-t.top).attr("x2",0).attr("y2",d),r.append("text").attr("class","nv-xValue").attr("x",-6).attr("y",-t.top).attr("text-anchor","end").attr("dy",".9em"),b.select(".nv-hoverValue .nv-xValue").text(l(i.x()(p[u[0]],u[0]))),r.append("text").attr("class","nv-yValue").attr("x",6).attr("y",-t.top).attr("text-anchor","start").attr("dy",".9em"),b.select(".nv-hoverValue .nv-yValue").text(o(i.y()(p[u[0]],u[0]))))}}function ot(){function r(n,t){for(var u=Math.abs(i.x()(n[0],0)-t),f=0,r=0;r<n.length;r++)Math.abs(i.x()(n[r],r)-t)<u&&(u=Math.abs(i.x()(n[r],r)-t),f=r);return f}if(!e){var n=d3.mouse(this)[0]-t.left;u=[r(p,Math.round(c.invert(n)))];ft()}}var w=d3.select(this),k,d,nt,rt,ut,it;if(n.utils.initSVG(w),k=n.utils.availableWidth(s,w,t),d=n.utils.availableHeight(h,w,t),r.update=function(){w.call(r)},r.container=this,p&&p.length)w.selectAll(".nv-noData").remove();else return n.utils.noData(r,w),r;nt=i.y()(p[p.length-1],p.length-1);c=i.xScale();y=i.yScale();var tt=w.selectAll("g.nv-wrap.nv-sparklineplus").data([p]),et=tt.enter().append("g").attr("class","nvd3 nv-wrap nv-sparklineplus"),g=et.append("g"),b=tt.select("g");g.append("g").attr("class","nv-sparklineWrap");g.append("g").attr("class","nv-valueWrap");g.append("g").attr("class","nv-hoverArea");tt.attr("transform","translate("+t.left+","+t.top+")");rt=b.select(".nv-sparklineWrap");i.width(k).height(d);rt.call(i);a&&(ut=b.select(".nv-valueWrap"),it=ut.selectAll(".nv-currentValue").data([nt]),it.enter().append("text").attr("class","nv-currentValue").attr("dx",f?-8:8).attr("dy",".9em").style("text-anchor",f?"end":"start"),it.attr("x",k+(f?t.right:0)).attr("y",v?function(n){return y(n)}:0).style("fill",i.color()(p[p.length-1],p.length-1)).text(o(nt)));g.select(".nv-hoverArea").append("rect").on("mousemove",ot).on("click",function(){e=!e}).on("mouseout",function(){u=[];ft()});b.select(".nv-hoverArea rect").attr("transform",function(){return"translate("+-t.left+","+-t.top+")"}).attr("width",k+t.left+t.right).attr("height",d+t.top)}),r}var i=n.models.sparkline(),t={top:15,right:100,bottom:10,left:50},s=null,h=null,c,y,u=[],e=!1,l=d3.format(",r"),o=d3.format(",.2f"),a=!0,v=!0,f=!1,p=null;return r.sparkline=i,r.options=n.utils.optionsFunc.bind(r),r._options=Object.create({},{width:{get:function(){return s},set:function(n){s=n}},height:{get:function(){return h},set:function(n){h=n}},xTickFormat:{get:function(){return l},set:function(n){l=n}},yTickFormat:{get:function(){return o},set:function(n){o=n}},showLastValue:{get:function(){return a},set:function(n){a=n}},alignValue:{get:function(){return v},set:function(n){v=n}},rightAlignValue:{get:function(){return f},set:function(n){f=n}},noData:{get:function(){return p},set:function(n){p=n}},margin:{get:function(){return t},set:function(n){t.top=n.top!==undefined?n.top:t.top;t.right=n.right!==undefined?n.right:t.right;t.bottom=n.bottom!==undefined?n.bottom:t.bottom;t.left=n.left!==undefined?n.left:t.left}}}),n.utils.inheritOptions(r,i),n.utils.initOptions(r),r};n.models.stackedArea=function(){"use strict";function t(u){return e.reset(),e.models(i),u.each(function(u){var rt=v-r.left-r.right,ut=y-r.top-r.bottom,it,ft,st;p=d3.select(this);n.utils.initSVG(p);g=i.xScale();l=i.yScale();it=u;u.forEach(function(n,t){n.seriesIndex=t;n.values=n.values.map(function(n,i){return n.index=i,n.seriesIndex=t,n})});ft=u.filter(function(n){return!n.disabled});u=d3.layout.stack().order(k).offset(b).values(function(n){return n.values}).x(o).y(a).out(function(n,t,i){n.display={y:i,y0:t}})(ft);var nt=p.selectAll("g.nv-wrap.nv-stackedarea").data([u]),et=nt.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedarea"),ht=et.append("defs"),ot=et.append("g"),w=nt.select("g");ot.append("g").attr("class","nv-areaWrap");ot.append("g").attr("class","nv-scatterWrap");nt.attr("transform","translate("+r.left+","+r.top+")");i.forceY().length==0&&i.forceY().push(0);i.width(rt).height(ut).x(o).y(function(n){if(n.display!==undefined)return n.display.y+n.display.y0}).forceY([0]).color(u.map(function(n){return n.color||s(n,n.seriesIndex)}));st=w.select(".nv-scatterWrap").datum(u);st.call(i);ht.append("clipPath").attr("id","nv-edge-clip-"+h).append("rect");nt.select("#nv-edge-clip-"+h+" rect").attr("width",rt).attr("height",ut);w.attr("clip-path",d?"url(#nv-edge-clip-"+h+")":"");var ct=d3.svg.area().x(function(n,t){return g(o(n,t))}).y0(function(n){return l(n.display.y0)}).y1(function(n){return l(n.display.y+n.display.y0)}).interpolate(c),lt=d3.svg.area().x(function(n,t){return g(o(n,t))}).y0(function(n){return l(n.display.y0)}).y1(function(n){return l(n.display.y0)}),tt=w.select(".nv-areaWrap").selectAll("path.nv-area").data(function(n){return n});tt.enter().append("path").attr("class",function(n,t){return"nv-area nv-area-"+t}).attr("d",function(n){return lt(n.values,n.seriesIndex)}).on("mouseover",function(n){d3.select(this).classed("hover",!0);f.areaMouseover({point:n,series:n.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:n.seriesIndex})}).on("mouseout",function(n){d3.select(this).classed("hover",!1);f.areaMouseout({point:n,series:n.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:n.seriesIndex})}).on("click",function(n){d3.select(this).classed("hover",!1);f.areaClick({point:n,series:n.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:n.seriesIndex})});tt.exit().remove();tt.style("fill",function(n){return n.color||s(n,n.seriesIndex)}).style("stroke",function(n){return n.color||s(n,n.seriesIndex)});tt.watchTransition(e,"stackedArea path").attr("d",function(n,t){return ct(n.values,t)});i.dispatch.on("elementMouseover.area",function(n){w.select(".nv-chart-"+h+" .nv-area-"+n.seriesIndex).classed("hover",!0)});i.dispatch.on("elementMouseout.area",function(n){w.select(".nv-chart-"+h+" .nv-area-"+n.seriesIndex).classed("hover",!1)});t.d3_stackedOffset_stackPercent=function(n){for(var u=n.length,f=n[0].length,t,r,e=[],i=0;i<f;++i){for(t=0,r=0;t<it.length;t++)r+=a(it[t].values[i]);if(r)for(t=0;t<u;t++)n[t][i][1]/=r;else for(t=0;t<u;t++)n[t][i][1]=0}for(i=0;i<f;++i)e[i]=0;return e}}),e.renderEnd("stackedArea immediate"),t}var r={top:0,right:0,bottom:0,left:0},v=960,y=500,s=n.utils.defaultColor(),h=Math.floor(Math.random()*1e5),p=null,o=function(n){return n.x},a=function(n){return n.y},w="stack",b="zero",k="default",c="linear",d=!1,g,l,i=n.models.scatter(),u=250,f=d3.dispatch("areaClick","areaMouseover","areaMouseout","renderEnd","elementClick","elementMouseover","elementMouseout"),e;i.pointSize(2.2).pointDomain([2.2,2.2]);e=n.utils.renderWatch(f,u);t.dispatch=f;t.scatter=i;i.dispatch.on("elementClick",function(){f.elementClick.apply(this,arguments)});i.dispatch.on("elementMouseover",function(){f.elementMouseover.apply(this,arguments)});i.dispatch.on("elementMouseout",function(){f.elementMouseout.apply(this,arguments)});return t.interpolate=function(n){return arguments.length?(c=n,t):c},t.duration=function(n){return arguments.length?(u=n,e.reset(u),i.duration(u),t):u},t.dispatch=f,t.scatter=i,t.options=n.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return v},set:function(n){v=n}},height:{get:function(){return y},set:function(n){y=n}},clipEdge:{get:function(){return d},set:function(n){d=n}},offset:{get:function(){return b},set:function(n){b=n}},order:{get:function(){return k},set:function(n){k=n}},interpolate:{get:function(){return c},set:function(n){c=n}},x:{get:function(){return o},set:function(n){o=d3.functor(n)}},y:{get:function(){return a},set:function(n){a=d3.functor(n)}},margin:{get:function(){return r},set:function(n){r.top=n.top!==undefined?n.top:r.top;r.right=n.right!==undefined?n.right:r.right;r.bottom=n.bottom!==undefined?n.bottom:r.bottom;r.left=n.left!==undefined?n.left:r.left}},color:{get:function(){return s},set:function(t){s=n.utils.getColor(t)}},style:{get:function(){return w},set:function(n){w=n;switch(w){case"stack":t.offset("zero");t.order("default");break;case"stream":t.offset("wiggle");t.order("inside-out");break;case"stream-center":t.offset("silhouette");t.order("inside-out");break;case"expand":t.offset("expand");t.order("default");break;case"stack_percent":t.offset(t.d3_stackedOffset_stackPercent);t.order("default")}}},duration:{get:function(){return u},set:function(n){u=n;e.reset(u);i.duration(u)}}}),n.utils.inheritOptions(t,i),n.utils.initOptions(t),t};n.models.stackedAreaChart=function(){"use strict";function i(g){return w.reset(),w.models(t),tt&&w.models(e),it&&w.models(f),g.each(function(w){var g=d3.select(this),ei=this,at,kt,ni,ii,gt,ui,fi,ri;if(n.utils.initSVG(g),at=n.utils.availableWidth(ft,g,r),kt=n.utils.availableHeight(b,g,r),i.update=function(){g.transition().duration(l).call(i)},i.container=this,u.setter(wt(w),i.update).getter(pt(w)).update(),u.disabled=w.map(function(n){return!!n.disabled}),!a){a={};for(ni in u)a[ni]=u[ni]instanceof Array?u[ni].slice(0):u[ni]}if(w&&w.length&&w.filter(function(n){return n.values.length}).length)g.selectAll(".nv-noData").remove();else return n.utils.noData(i,g),i;ht=t.xScale();lt=t.yScale();var ti=g.selectAll("g.nv-wrap.nv-stackedAreaChart").data([w]),dt=ti.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedAreaChart").append("g"),bt=ti.select("g");dt.append("rect").style("opacity",0);dt.append("g").attr("class","nv-x nv-axis");dt.append("g").attr("class","nv-y nv-axis");dt.append("g").attr("class","nv-stackedWrap");dt.append("g").attr("class","nv-legendWrap");dt.append("g").attr("class","nv-controlsWrap");dt.append("g").attr("class","nv-interactive");bt.select("rect").attr("width",at).attr("height",kt);et&&(ii=nt?at-ct:at,o.width(ii),bt.select(".nv-legendWrap").datum(w).call(o),r.top!=o.height()&&(r.top=o.height(),kt=n.utils.availableHeight(b,g,r)),bt.select(".nv-legendWrap").attr("transform","translate("+(at-ii)+","+-r.top+")"));nt&&(gt=[{key:v.stacked||"Stacked",metaKey:"Stacked",disabled:t.style()!="stack",style:"stack"},{key:v.stream||"Stream",metaKey:"Stream",disabled:t.style()!="stream",style:"stream"},{key:v.expanded||"Expanded",metaKey:"Expanded",disabled:t.style()!="expand",style:"expand"},{key:v.stack_percent||"Stack %",metaKey:"Stack_Percent",disabled:t.style()!="stack_percent",style:"stack_percent"}],ct=ut.length/3*260,gt=gt.filter(function(n){return ut.indexOf(n.metaKey)!==-1}),h.width(ct).color(["#444","#444","#444"]),bt.select(".nv-controlsWrap").datum(gt).call(h),r.top!=Math.max(h.height(),o.height())&&(r.top=Math.max(h.height(),o.height()),kt=n.utils.availableHeight(b,g,r)),bt.select(".nv-controlsWrap").attr("transform","translate(0,"+-r.top+")"));ti.attr("transform","translate("+r.left+","+r.top+")");d&&bt.select(".nv-y.nv-axis").attr("transform","translate("+at+",0)");ot&&(s.width(at).height(kt).margin({left:r.left,top:r.top}).svgContainer(g).xScale(ht),ti.select(".nv-interactive").call(s));t.width(at).height(kt);ui=bt.select(".nv-stackedWrap").datum(w);ui.transition().call(t);tt&&(e.scale(ht)._ticks(n.utils.calcTicksX(at/100,w)).tickSize(-kt,0),bt.select(".nv-x.nv-axis").attr("transform","translate(0,"+kt+")"),bt.select(".nv-x.nv-axis").transition().duration(0).call(e));it&&(fi=t.offset()==="wiggle"?0:n.utils.calcTicksY(kt/36,w),f.scale(lt)._ticks(fi).tickSize(-at,0),t.style()==="expand"||t.style()==="stack_percent"?(ri=f.tickFormat(),y&&ri===yt||(y=ri),f.tickFormat(yt)):y&&(f.tickFormat(y),y=null),bt.select(".nv-y.nv-axis").transition().duration(0).call(f));t.dispatch.on("areaClick.toggle",function(n){w.filter(function(n){return!n.disabled}).length===1?w.forEach(function(n){n.disabled=!1}):w.forEach(function(t,i){t.disabled=i!=n.seriesIndex});u.disabled=w.map(function(n){return!!n.disabled});c.stateChange(u);i.update()});o.dispatch.on("stateChange",function(n){for(var t in n)u[t]=n[t];c.stateChange(u);i.update()});h.dispatch.on("legendClick",function(n){n.disabled&&(gt=gt.map(function(n){return n.disabled=!0,n}),n.disabled=!1,t.style(n.style),u.style=t.style(),c.stateChange(u),i.update())});s.dispatch.on("elementMousemove",function(r){var c,f,l,u,a,y,o;if(t.clearHighlights(),u=[],a=0,w.filter(function(n,t){return n.seriesIndex=t,!n.disabled}).forEach(function(e,o){var s,v,h;(f=n.interactiveBisect(e.values,r.pointXValue,i.x()),s=e.values[f],v=i.y()(s,f),v!=null&&t.highlightPoint(o,f,!0),typeof s!="undefined")&&(typeof c=="undefined"&&(c=s),typeof l=="undefined"&&(l=i.xScale()(i.x()(s,f))),h=t.style()=="expand"?s.display.y:i.y()(s,f),u.push({key:e.key,value:h,color:k(e,e.seriesIndex),stackedValue:s.display}),rt&&t.style()!="expand"&&(a+=h))}),u.reverse(),u.length>2){var h=i.yScale().invert(r.mouseY),v=null;u.forEach(function(n,t){h=Math.abs(h);var i=Math.abs(n.stackedValue.y0),r=Math.abs(n.stackedValue.y);if(h>=i&&h<=r+i){v=t;return}});v!=null&&(u[v].highlight=!0)}rt&&t.style()!="expand"&&u.length>=2&&u.push({key:st,value:a,total:!0});y=e.tickFormat()(i.x()(c,f));o=s.tooltip.valueFormatter();t.style()==="expand"||t.style()==="stack_percent"?(p||(p=o),o=d3.format(".1%")):p&&(o=p,p=null);s.tooltip.chartContainer(ei.parentNode).valueFormatter(o).data({value:y,series:u})();s.renderGuideLine(l)});s.dispatch.on("elementMouseout",function(){t.clearHighlights()});c.on("changeState",function(n){typeof n.disabled!="undefined"&&w.length===n.disabled.length&&(w.forEach(function(t,i){t.disabled=n.disabled[i]}),u.disabled=n.disabled);typeof n.style!="undefined"&&(t.style(n.style),vt=n.style);i.update()})}),w.renderEnd("stacked Area chart immediate"),i}var t=n.models.stackedArea(),e=n.models.axis(),f=n.models.axis(),o=n.models.legend(),h=n.models.legend(),s=n.interactiveGuideline(),g=n.models.tooltip(),r={top:30,right:25,bottom:50,left:60},ft=null,b=null,k=n.utils.defaultColor(),nt=!0,et=!0,tt=!0,it=!0,d=!1,ot=!1,rt=!0,st="TOTAL",ht,lt,u=n.utils.state(),a=null,at=null,c=d3.dispatch("stateChange","changeState","renderEnd"),ct=250,ut=["Stacked","Stream","Expanded"],v={},l=250,y,p;u.style=t.style();e.orient("bottom").tickPadding(7);f.orient(d?"right":"left");g.headerFormatter(function(n,t){return e.tickFormat()(n,t)}).valueFormatter(function(n,t){return f.tickFormat()(n,t)});s.tooltip.headerFormatter(function(n,t){return e.tickFormat()(n,t)}).valueFormatter(function(n,t){return f.tickFormat()(n,t)});y=null;p=null;h.updateState(!1);var w=n.utils.renderWatch(c),vt=t.style(),pt=function(n){return function(){return{active:n.map(function(n){return!n.disabled}),style:t.style()}}},wt=function(n){return function(t){t.style!==undefined&&(vt=t.style);t.active!==undefined&&n.forEach(function(n,i){n.disabled=!t.active[i]})}},yt=d3.format("%");t.dispatch.on("elementMouseover.tooltip",function(n){n.point.x=t.x()(n.point);n.point.y=t.y()(n.point);g.data(n).hidden(!1)});t.dispatch.on("elementMouseout.tooltip",function(){g.hidden(!0)});return i.dispatch=c,i.stacked=t,i.legend=o,i.controls=h,i.xAxis=e,i.yAxis=f,i.interactiveLayer=s,i.tooltip=g,i.dispatch=c,i.options=n.utils.optionsFunc.bind(i),i._options=Object.create({},{width:{get:function(){return ft},set:function(n){ft=n}},height:{get:function(){return b},set:function(n){b=n}},showLegend:{get:function(){return et},set:function(n){et=n}},showXAxis:{get:function(){return tt},set:function(n){tt=n}},showYAxis:{get:function(){return it},set:function(n){it=n}},defaultState:{get:function(){return a},set:function(n){a=n}},noData:{get:function(){return at},set:function(n){at=n}},showControls:{get:function(){return nt},set:function(n){nt=n}},controlLabels:{get:function(){return v},set:function(n){v=n}},controlOptions:{get:function(){return ut},set:function(n){ut=n}},showTotalInTooltip:{get:function(){return rt},set:function(n){rt=n}},totalLabel:{get:function(){return st},set:function(n){st=n}},margin:{get:function(){return r},set:function(n){r.top=n.top!==undefined?n.top:r.top;r.right=n.right!==undefined?n.right:r.right;r.bottom=n.bottom!==undefined?n.bottom:r.bottom;r.left=n.left!==undefined?n.left:r.left}},duration:{get:function(){return l},set:function(n){l=n;w.reset(l);t.duration(l);e.duration(l);f.duration(l)}},color:{get:function(){return k},set:function(i){k=n.utils.getColor(i);o.color(k);t.color(k)}},rightAlignYAxis:{get:function(){return d},set:function(n){d=n;f.orient(d?"right":"left")}},useInteractiveGuideline:{get:function(){return ot},set:function(n){ot=!!n;i.interactive(!n);i.useVoronoi(!n);t.scatter.interactive(!n)}}}),n.utils.inheritOptions(i,t),n.utils.initOptions(i),i};n.models.sunburst=function(){"use strict";function r(g){return d.reset(),g.each(function(r){function rt(n){n.x0=n.x;n.dx0=n.dx}function ut(n){var t=d3.interpolate(e.domain(),[n.x,n.x+n.dx]),i=d3.interpolate(o.domain(),[n.y,1]),r=d3.interpolate(o.range(),[n.y?20:0,tt]);return function(n,u){return u?function(){return c(n)}:function(u){return e.domain(t(u)),o.domain(i(u)).range(r(u)),c(n)}}}u=d3.select(this);var g=n.utils.availableWidth(l,u,t),nt=n.utils.availableHeight(a,u,t),tt=Math.min(g,nt)/2,d;n.utils.initSVG(u);var it=u.selectAll(".nv-wrap.nv-sunburst").data(r),ft=it.enter().append("g").attr("class","nvd3 nv-wrap nv-sunburst nv-chart-"+s),et=ft.selectAll("nv-sunburst");it.attr("transform","translate("+g/2+","+nt/2+")");u.on("click",function(n,t){f.chartClick({data:n,index:t,pos:d3.event,id:s})});o.range([0,tt]);i=i||r;k=r[0];b.value(w[v]||w.count);d=et.data(b.nodes).enter().append("path").attr("d",c).style("fill",function(n){return y((n.children?n:n.parent).name)}).style("stroke","#FFF").on("click",function(n){p!==i&&i!==n&&(p=i);i=n;d.transition().duration(h).attrTween("d",ut(n))}).each(rt).on("dblclick",function(n){p.parent==n&&d.transition().duration(h).attrTween("d",ut(k))}).each(rt).on("mouseover",function(n){d3.select(this).classed("hover",!0).style("opacity",.8);f.elementMouseover({data:n,color:d3.select(this).style("fill")})}).on("mouseout",function(n){d3.select(this).classed("hover",!1).style("opacity",1);f.elementMouseout({data:n})}).on("mousemove",function(n){f.elementMousemove({data:n})})}),d.renderEnd("sunburst immediate"),r}var t={top:0,right:0,bottom:0,left:0},l=null,a=null,v="count",w={count:function(){return 1},size:function(n){return n.size}},s=Math.floor(Math.random()*1e4),u=null,y=n.utils.defaultColor(),h=500,f=d3.dispatch("chartClick","elementClick","elementDblClick","elementMousemove","elementMouseover","elementMouseout","renderEnd"),e=d3.scale.linear().range([0,2*Math.PI]),o=d3.scale.sqrt(),b=d3.layout.partition().sort(null).value(function(){return 1}),c=d3.svg.arc().startAngle(function(n){return Math.max(0,Math.min(2*Math.PI,e(n.x)))}).endAngle(function(n){return Math.max(0,Math.min(2*Math.PI,e(n.x+n.dx)))}).innerRadius(function(n){return Math.max(0,o(n.y))}).outerRadius(function(n){return Math.max(0,o(n.y+n.dy))}),i,p,k,d=n.utils.renderWatch(f);return r.dispatch=f,r.options=n.utils.optionsFunc.bind(r),r._options=Object.create({},{width:{get:function(){return l},set:function(n){l=n}},height:{get:function(){return a},set:function(n){a=n}},mode:{get:function(){return v},set:function(n){v=n}},id:{get:function(){return s},set:function(n){s=n}},duration:{get:function(){return h},set:function(n){h=n}},margin:{get:function(){return t},set:function(n){t.top=n.top!=undefined?n.top:t.top;t.right=n.right!=undefined?n.right:t.right;t.bottom=n.bottom!=undefined?n.bottom:t.bottom;t.left=n.left!=undefined?n.left:t.left}},color:{get:function(){return y},set:function(t){y=n.utils.getColor(t)}}}),n.utils.initOptions(r),r};n.models.sunburstChart=function(){"use strict";function t(u){return e.reset(),e.models(r),u.each(function(u){var e=d3.select(this),s;n.utils.initSVG(e);var p=this,h=n.utils.availableWidth(l,e,i),c=n.utils.availableHeight(a,e,i);if(t.update=function(){f===0?e.call(t):e.transition().duration(f).call(t)},t.container=this,u&&u.length)e.selectAll(".nv-noData").remove();else return n.utils.noData(t,e),t;var o=e.selectAll("g.nv-wrap.nv-sunburstChart").data(u),v=o.enter().append("g").attr("class","nvd3 nv-wrap nv-sunburstChart").append("g"),y=o.select("g");v.append("g").attr("class","nv-sunburstWrap");o.attr("transform","translate("+i.left+","+i.top+")");r.width(h).height(c);s=y.select(".nv-sunburstWrap").datum(u);d3.transition(s).call(r)}),e.renderEnd("sunburstChart immediate"),t}var r=n.models.sunburst(),u=n.models.tooltip(),i={top:30,right:20,bottom:20,left:20},l=null,a=null,o=n.utils.defaultColor(),v=Math.round(Math.random()*1e5),s=null,h=null,f=250,c=d3.dispatch("stateChange","changeState","renderEnd"),e;u.duration(0);e=n.utils.renderWatch(c);u.headerEnabled(!1).valueFormatter(function(n){return n});r.dispatch.on("elementMouseover.tooltip",function(n){n.series={key:n.data.name,value:n.data.size,color:n.color};u.data(n).hidden(!1)});r.dispatch.on("elementMouseout.tooltip",function(){u.hidden(!0)});r.dispatch.on("elementMousemove.tooltip",function(){u()});return t.dispatch=c,t.sunburst=r,t.tooltip=u,t.options=n.utils.optionsFunc.bind(t),t._options=Object.create({},{noData:{get:function(){return h},set:function(n){h=n}},defaultState:{get:function(){return s},set:function(n){s=n}},color:{get:function(){return o},set:function(n){o=n;r.color(o)}},duration:{get:function(){return f},set:function(n){f=n;e.reset(f);r.duration(f)}},margin:{get:function(){return i},set:function(n){i.top=n.top!==undefined?n.top:i.top;i.right=n.right!==undefined?n.right:i.right;i.bottom=n.bottom!==undefined?n.bottom:i.bottom;i.left=n.left!==undefined?n.left:i.left}}}),n.utils.inheritOptions(t,r),n.utils.initOptions(t),t};n.version="1.8.1-dev"})();
//# sourceMappingURL=nv.d3.min.js.map
