function numberWithCommas(n){var t=n.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")}function donutChart(n,t){$.ajaxSetup({cache:!1});$.ajax({url:"/PeerReviewAdmin/get"+t+"DataChart",type:"GET",dataType:"json",success:function(t){drawDonutChart(n,t)},error:function(n){console.log(n.responseText)}})}function drawDonutChart(n,t){for(var r,u=0,f=[],e=["#BFBFBF","#FF0000","#FFC000","#FFFF00","#92D050","#00B050"],i=0;i<t.length;i++)r=t[i],f.push(e[r.key]),u+=r.value;nv.addGraph(function(){var i=nv.models.pieChart().x(function(n){return n.key}).y(function(n){return n.value}).donut(!0).labelType("value").labelThreshold(.05).showLegend(!1).padAngle(.04).cornerRadius(2.5).margin({left:0,right:0,top:0,bottom:0}).color(f).valueFormat(d3.format(",.0d")).id("donut_chart");return i.title(u.toString()+" Total Reviews"),i.donutRatio(.6),i.tooltip.enabled(!1),d3.select(n).datum(t).transition().duration(1200).call(i),nv.utils.windowResize(i.update),i})}function ProjectDetail(n){$.ajaxSetup({cache:!1});$.ajax({url:"/PeerReviewAdmin/ProjectDetail",type:"GET",dataType:"html",contentType:"application/json; charset=utf-8",data:{pID:n},success:function(n){$("#ChartContain").html(n)},error:function(n){console.log(n.responseText)}})}function ProjectChartHome(){$.ajaxSetup({cache:!1});$.ajax({url:"/PeerReviewAdmin/ListProjectProgramStatus",type:"GET",dataType:"html",contentType:"application/json; charset=utf-8",success:function(n){$("#ChartContain").html(n)},error:function(n){console.log(n.responseText)}})}function PieChart(n,t,i,r,u,f,e,o,s,h,c,l,a,v){$.ajaxSetup({cache:!1});$.ajax({url:"/"+t+"/"+i,type:"GET",dataType:"json",success:function(t){drawPieChart(n,t,r,u,f,e,o,s,h,c,l,a,v)},error:function(n){console.log(n.responseText)}})}function drawPieChart(n,t,i,r){var u=["#BFBFBF","#FF0000","#FFC000","#FFFF00","#92D050","#00B050","#00ffcc","#dd99ff","#ff8533"];nv.addGraph(function(){var i=nv.models.pieChart().x(function(n){return n.label}).y(function(n){return n.value}).labelThreshold(.05).showLegend(!0).color(u).id(n);return n.indexOf("Donut")>-1&&i.donut(!0),r="percent",i.labelType("percent"),d3.select(n).datum(t).transition().duration(1200).call(i),nv.utils.windowResize(i.update),i})}function DashBoard(n,t,i,r,u,f,e,o,s,h,c,l,a,v){$(n).height("300px");$(n).append('<div class="center" style="position: relative; top: 50%; -moz-transform: translateY(-50%); -ms-transform: translateY(-50%); -o-transform: translateY(-50%); -webkit-transform: translateY(-50%); transform: translateY(-50%);"><span style="font-size:40px" class="fa fa-spinner fa-spin"><\/span><\/div>');$.ajaxSetup({cache:!1});$.ajax({url:"/"+t+"/"+i,type:"GET",dataType:"json",success:function(t){$(n).empty();$(n).height("100%");drawDashBoard(n,t,r,u,f,e,o,s,h,c,l,a,v)},error:function(n){console.log(n.responseText)}})}function drawDashBoard(n,t,i,r,u,f,e){function o(n){return{AccentureLeadership:"#cc0000",lvl6:"#ADE41B",lvl7:"#cc6600",lvl8:"#0066cc",lvl9:"#1DA500",lvl10:"#00cc99",lvl11:"#577557",lvl12:"#6600cc",lvl13:"#b8ccb8"}[n]}function v(i){function v(n){var i=t.filter(function(t){return t.Month==n[0]})[0],r=d3.keys(i.freq).map(function(n){return{type:n,freq:i.freq[n]}});l.update(r);a.update(r)}function y(){l.update(s);a.update(s)}var h={},r={t:60,r:0,b:30,l:0},e,f,u,o;r.w=500-r.l-r.r;r.h=300-r.t-r.b;e=d3.select(n).append("svg").attr("width",r.w+r.l+r.r).attr("height",r.h+r.t+r.b).append("g").attr("transform","translate("+r.l+","+r.t+")");f=d3.scale.ordinal().rangeRoundBands([0,r.w],.1).domain(i.map(function(n){return n[0]}));e.append("g").attr("class","x axis").attr("transform","translate(0,"+r.h+")").attr("fill","white").call(d3.svg.axis().scale(f).orient("bottom"));u=d3.scale.linear().range([r.h,0]).domain([0,d3.max(i,function(n){return n[1]})]);o=e.selectAll(".bar").data(i).enter().append("g").attr("class","bar");o.append("rect").attr("x",function(n){return f(n[0])}).attr("y",function(n){return u(n[1])}).attr("width",f.rangeBand()).attr("height",function(n){return r.h-u(n[1])}).attr("fill",c).on("mouseover",v).on("mouseout",y);return o.append("text").text(function(n){return d3.format("d")(n[1])}).attr("x",function(n){return f(n[0])+f.rangeBand()/2}).attr("y",function(n){return u(n[1])-5}).attr("text-anchor","middle").attr("fill","white"),h.update=function(n,t){u.domain([0,d3.max(n,function(n){return n[1]})]);var i=e.selectAll(".bar").data(n);i.select("rect").transition().duration(500).attr("y",function(n){return u(n[1])}).attr("height",function(n){return r.h-u(n[1])}).attr("fill",t);i.select("text").transition().duration(500).text(function(n){return d3.format(",")(n[1])}).attr("y",function(n){return u(n[1])-5})},h}function p(i){function l(n){h.update(t.map(function(t){return[t.Month,t.freq[n.data.type]]}),o(n.data.type))}function a(){h.update(t.map(function(n){return[n.Month,n.total]}),c)}function v(n){var t=d3.interpolate(this._current,n);return this._current=t(0),function(n){return e(t(n))}}var u={},r={w:250,h:250};r.r=Math.min(r.w,r.h)/2;var f=d3.select(n).append("svg").attr("class","Pie").attr("width",r.w).attr("height",r.h).append("g").attr("transform","translate("+r.w/2+","+r.h/2+")"),e=d3.svg.arc().outerRadius(r.r-10).innerRadius(0),s=d3.layout.pie().sort(null).value(function(n){return n.freq});f.selectAll("path").data(s(i)).enter().append("path").attr("d",e).each(function(n){this._current=n}).style("fill",function(n){return o(n.data.type)}).on("mouseover",l).on("mouseout",a);return u.update=function(n){f.selectAll("path").data(s(n)).transition().duration(500).attrTween("d",v)},u}function w(i){function a(n){h.update(t.map(function(t){return[t.Month,t.freq[n.type]]}),o(n.type))}function v(){h.update(t.map(function(n){return[n.Month,n.total]}),c)}function l(n,t){return d3.format("%")(n.freq/d3.sum(t.map(function(n){return n.freq})))}var s={},u=d3.select(n).append("table").attr("class","legend"),r,f;e=="Users"&&(r=u.append("tr"),r.append("td").attr("fill","white").text(""),r.append("td").attr("fill","white").text("Carreer Level"),r.append("td").attr("fill","white").text("Users"),r.append("td").attr("fill","white").text("%Total"));e=="Hits"&&(r=u.append("tr"),r.append("td").attr("fill","white").text(""),r.append("td").attr("fill","white").text("Carreer Level"),r.append("td").attr("fill","white").text("Hits"),r.append("td").attr("fill","white").html("%Total"));e=="Login"&&(r=u.append("tr"),r.append("td").attr("fill","white").text(""),r.append("td").attr("fill","white").text("Carreer Level"),r.append("td").attr("fill","white").text("Logins"),r.append("td").attr("fill","white").html("%Total"));f=u.append("tbody").selectAll("tr").data(i).enter().append("tr");f.append("td").append("svg").attr("width","16").attr("height","16").append("circle").attr("cx","8").attr("cy","8").attr("r","8").attr("fill",function(n){return o(n.type)}).on("mouseover",a).on("mouseout",v);return f.append("td").attr("fill","white").text(function(n){switch(n.type){case"AccentureLeadership":return"Accenture Leadership";case"lvl6":return"Level 5/6 - SMG";case"lvl7":return"Level 7 - Manager";case"lvl8":return"Level 8";case"lvl9":return"Level 9";case"lvl10":return"Level 10";case"lvl11":return"Level 11";case"lvl12":return"Level 12";case"lvl13":return"Level 13";default:return n.type}}),f.append("td").attr("class","legendFreq").text(function(n){return d3.format("d")(n.freq)}),f.append("td").attr("class","legendPerc").attr("fill","white").text(function(n){return l(n,i)}),s.update=function(n){var t=u.select("tbody").selectAll("tr").data(n);t.select(".legendFreq").text(function(n){return d3.format("d")(n.freq)});t.select(".legendPerc").text(function(t){return l(t,n)})},s}var c="steelblue",y;t.forEach(function(n){n.total=n.freq.AccentureLeadership+n.freq.lvl13+n.freq.lvl12+n.freq.lvl11+n.freq.lvl10+n.freq.lvl9+n.freq.lvl8+n.freq.lvl7+n.freq.lvl6});y=d3.select("body").append("div").attr("class","tooltip").style("opacity",0);var s=["AccentureLeadership","lvl6","lvl7","lvl8","lvl9","lvl10","lvl11","lvl12","lvl13"].map(function(n){return{type:n,freq:d3.sum(t.map(function(t){return t.freq[n]}))}}),b=t.map(function(n){return[n.Month,n.total]}),h=v(b),l=p(s),a=w(s)}function MultiBarHorizontalChart(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y){$.ajaxSetup({cache:!1});$.ajax({url:"/"+t+"/"+i,type:"GET",dataType:"json",success:function(t){drawMultiBarHorizontalChart(n,t,r,u,f,e,o,s,h,c,l,a,v,y)},error:function(n){console.log(n.responseText)}})}function drawMultiBarHorizontalChart(n,t,i,r,u,f,e,o,s,h,c,l,a,v){nv.addGraph(function(){var e=nv.models.multiBarHorizontalChart().x(function(n){return n.label}).y(function(n){return n.value}).showControls(!1).stacked(!0),y;return yAxisType=r!=""?r:",.0f",e.yAxis.axisLabel(h).tickFormat(function(n){return n==null?"N/A":d3.format(yAxisType)(n)}),f=="False"&&e.showXAxis(!1),o=="False"&&e.showYAxis(!1),c!=""&&e.margin({top:c}),l!=""&&e.margin({right:l}),a!=""&&e.margin({bottom:a}),v!=""&&e.margin({left:v}),e.showLegend(!0),s=="False"&&e.showLegend(!1),y=0,t.forEach(function(n){y=y+n.values[0].value}),u=="True"&&e.tooltip.valueFormatter(function(n){return(n*100/y).toFixed(2)+"% ("+numberWithCommas(n)+")"}),i=="InsideBar"?(e.legend.maxKeyLength(32),d3.select(n).datum(t).transition().duration(500).call(e).each("end",function(){d3.select(n).selectAll(".nv-bar").append("text").attr("x",20).attr("y",20).text(function(n){return(n.value*100/y).toFixed(0)+"% ("+abbreviateNumber(n.value)+")"})}),e.legend.dispatch.on=function(){d3.select(n).selectAll(".nv-bar").append("text").attr("x",20).attr("y",20).text(function(n){return(n.value*100/y).toFixed(2)+"% ("+abbreviateNumber(n.value)+")"})}):d3.select(n).datum(t).transition().duration(500).call(e),e})}function DateLineChart(n,t,i,r,u,f,e,o,s,h,c,l,a,v){$.ajaxSetup({cache:!1});$.ajax({url:"/"+t+"/"+i,type:"GET",dataType:"json",success:function(t){$(n).empty();drawDateLineChart(n,t,r,u,f,e,o,s,h,c,l,a,v)},error:function(n){console.log(n.responseText)}})}function drawDateLineChart(n,t,i,r,u,f,e,o,s,h,c,l,a){var v;nv.addGraph(function(){var p,y;return p=r!=""?r:",.0f",v=nv.models.lineChart().options({transitionDuration:300,useInteractiveGuideline:!0}),i=="x"||i=="forDay"?v.x(function(n){return moment(n.label,"M/D/YYYY").format("x")}):i=="dict"?(y=[],v.x(function(n){return str=n.label.split("-"),y[y.length]=str[1],str[0]})):v.x(function(n){return n.label}),u=="True"&&v.forceY(0),v.y(function(n){return n.value}),f=="False"&&v.showXAxis(!1),o=="False"&&v.showYAxis(!1),h!=""&&v.margin({top:h}),c!=""&&v.margin({right:c}),l!=""&&v.margin({bottom:l}),a!=""&&v.margin({left:a}),v.xAxis.axisLabel(e),i=="x"&&v.xAxis.axisLabel("Month").axisLabelDistance(35).tickFormat(function(n){return moment(n,"x").format("MMM YY")}).staggerLabels(!0),i=="forDay"&&v.xAxis.axisLabel("Day").axisLabelDistance(35).tickFormat(function(n){return moment(n,"x").format("MM/DD/YYYY")}).staggerLabels(!0),i=="dict"&&v.xAxis.axisLabel("").axisLabelDistance(35).tickFormat(function(n){return y[n-1]}).staggerLabels(!0),r=="dict"?(v.yAxis.tickFormat(function(n){return abbreviateNumber(n,10)}).staggerLabels(!0),v.y(function(n){return n.value})):(v.y(function(n){return n.value}),v.yAxis.axisLabel(s).tickFormat(function(n){return n==null?"N/A":d3.format(p)(n)})),d3.select(n).datum(t).call(v),nv.utils.windowResize(v.update),v})}function LinePlusBarChart(n,t,i,r,u,f,e,o,s,h,c,l,a,v,y){$.ajaxSetup({cache:!1});$.ajax({url:"/"+t+"/"+i,type:"GET",dataType:"json",success:function(t){drawLinePlusBarChart(n,t,r,u,f,e,o,s,h,c,l,a,v,y)},error:function(n){console.log(n.responseText)}})}function drawLinePlusBarChart(n,t,r,u,f,e,o,s,h,c,l,a,v,y){var p;t.map(function(n){return n.values=n.values.map(function(n){return{x:n.label,y:n.value}}),n});nv.addGraph(function(){var o,s,c,b,e,w,k;for(p=nv.models.linePlusBarChart().margin({top:50,right:60,bottom:30,left:70}).focusEnable(!1).legendLeftAxisHint("").legendRightAxisHint("").color(d3.scale.category10().range()),p.bars.forceY([t[0].yAxisMin,t[0].yAxisMax]),p.lines.forceY([t[1].yAxisMin,t[1].yAxisMax]),p.xAxis.tickPadding(15),p.xAxis.tickValues(t[0].values.map(function(n){return n.x})),l!=""&&p.margin({top:l}),a!=""&&p.margin({right:a}),v!=""&&p.margin({bottom:v}),y!=""&&p.margin({left:y}),o=9999,s=0,c=0;c<t[0].values.length;c++)b=t[0].values,e=b[c],e.x<o&&(o=e.x),e.x>s&&(s=e.x);r=="FY"&&p.xAxis.tickFormat(function(n){if(n!=o&&n!=s)return"FY"+n});u!=""&&(yAxisType=u,p.yAxis.tickFormat(function(n){return n==null?"N/A":d3.format(yAxisType)(n)}));f!=""&&(y2AxisType=f,p.y2Axis.tickFormat(function(n){return n==null?"N/A":d3.format(y2AxisType)(n)}));p.legend.maxKeyLength(30);d3.select(n).datum(t).transition().duration(500).call(p);w=d3.select(n).selectAll(".nv-focus").selectAll(".nv-bars");k=w.selectAll("rect");i=-8;k.each(function(n){if(n.y!=null){var t=this.y.animVal.value+12;w.append("text").attr("x",function(){return i=i+56}).attr("y",t).text(function(){return n.y})}});h=="False"&&(d3.select(n).selectAll(".nv-y1.nv-axis").remove(),d3.select(n).selectAll(".nv-y2.nv-axis").remove());nv.utils.windowResize(p.update);p.dispatch.on("stateChange",function(n){nv.log("New State:",JSON.stringify(n))});return p})}function getDataForDiscreteBars(n,t,i,r,u,f,e,o,s,h,c,l,a,v){$.ajaxSetup({cache:!1});$.ajax({url:"/"+t+"/"+i,type:"GET",dataType:"json",success:function(t){drawDiscreteBar(n,t,r,u,f,e,o,s,h,c,l,a,v)},error:function(n){console.log(n.responseText)}})}function drawDiscreteBar(n,t,i,r,u,f,e,o,s,h,c,l,a){nv.addGraph(function(){var u=nv.models.discreteBarChart().staggerLabels(!0).showValues(!0).duration(250);return i=="discrete"&&(u=nv.models.discreteBarChart().staggerLabels(!0).showValues(!0).duration(250).valueFormat(d3.format(".3s"))),i=="x"?u.x(function(n){return moment(n.label,"M/D/YYYY").format("x")}):i=="FY"?(u.x(function(n){return n.label}),u.xAxis.tickFormat(function(n){return"FY"+n})):u.x(function(n){return n.label}),r=="discrete"?(u.yAxis.tickFormat(function(n){return abbreviateNumber(n)}).staggerLabels(!0),u.y(function(n){return n.value})):u.y(function(n){return n.value}),f=="False"&&u.showXAxis(!1),o=="False"&&u.showYAxis(!1),h!=""&&u.margin({top:h}),c!=""&&u.margin({right:c}),l!=""&&u.margin({bottom:l}),a!=""&&u.margin({left:a}),d3.select(n).datum(t).call(u),nv.utils.windowResize(u.update),u})}function DisplayActivities(n,t,i,r,u,f){$.ajaxSetup({cache:!1});$.ajax({url:"/Home2/getActivityData",type:"GET",dataType:"html",data:{category:n,metric:t,displayName:r,isMirror:u,idContainer:f},success:function(n){$(i).append(n)},error:function(n){console.log(n.responseText);console.log("change")}})}function DisplayActivitiesMirror(n,t,i,r,u){$.ajaxSetup({cache:!1});$.ajax({url:"/Home2/getActivityDataMirror",type:"GET",dataType:"html",data:{category:n,metric:t,displayName:r,isMirror:u},success:function(n){$(i).append(n)},error:function(n){console.log(n.responseText)}})}function abbreviateNumber(n,t){if(n=parseInt(n),n===0)return"0";t=!t||t<0?0:t;var u=n.toPrecision(2).split("e"),i=u.length===1?0:Math.floor(Math.min(u[1].slice(1),14)/3),r=i<1?n.toFixed(0+t):(n/Math.pow(10,i*3)).toFixed(1+t),f=r<0?r:Math.abs(r);return f+["","K","M","B","T"][i]}function DisplayActivitiesVisits(n,t,i,r,u){$.ajaxSetup({cache:!1});$.ajax({url:"/Home2/getActivityDataVisits",type:"GET",dataType:"html",data:{category:n,metric:t,displayName:r,isMirror:u},success:function(n){$(i).append(n)},error:function(n){console.log(n.responseText)}})}function DisplayActivitiesSimpleArrow(n,t,i,r,u){$.ajaxSetup({cache:!1});$.ajax({url:"/Home2/getActivitySimpleArrowData",type:"GET",dataType:"html",data:{category:n,metric:t,displayName:r,isMirror:u},success:function(n){$(i).append(n)},error:function(n){console.log(n.responseText)}})}
//# sourceMappingURL=Chart.min.js.map
